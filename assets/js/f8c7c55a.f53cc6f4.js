"use strict";(self.webpackChunkintegration_continue=self.webpackChunkintegration_continue||[]).push([[4144],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return c}});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=a.createContext({}),u=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=u(e.components);return a.createElement(o.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=u(t),c=l,k=m["".concat(o,".").concat(c)]||m[c]||p[c]||r;return t?a.createElement(k,i(i({ref:n},d),{},{components:t})):a.createElement(k,i({ref:n},d))}));function c(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=m;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:l,i[1]=s;for(var u=2;u<r;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},4126:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return o},metadata:function(){return u},toc:function(){return d},default:function(){return m}});var a=t(7462),l=t(3366),r=(t(7294),t(3905)),i=["components"],s={description:"My document description",slug:"/admin-bdd-MySQL",tags:["MySQL","BDD"]},o="Administration BDD avec MySQL",u={unversionedId:"Base de donn\xe9e/Administration BDD/Administration BDD",id:"Base de donn\xe9e/Administration BDD/Administration BDD",isDocsHomePage:!1,title:"Administration BDD avec MySQL",description:"My document description",source:"@site/docs\\Base de donn\xe9e\\Administration BDD\\Administration BDD.mdx",sourceDirName:"Base de donn\xe9e/Administration BDD",slug:"/admin-bdd-MySQL",permalink:"/docs/admin-bdd-MySQL",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/Base de donn\xe9e\\Administration BDD\\Administration BDD.mdx",tags:[{label:"MySQL",permalink:"/docs/tags/my-sql"},{label:"BDD",permalink:"/docs/tags/bdd"}],version:"current",frontMatter:{description:"My document description",slug:"/admin-bdd-MySQL",tags:["MySQL","BDD"]},sidebar:"tutorialSidebar",previous:{title:"Tutorial Intro",permalink:"/docs/intro"},next:{title:"test",permalink:"/docs/Base de donn\xe9e/NoSQL/test"}},d=[{value:"Les d\xe9buts avec MySQL",id:"les-d\xe9buts-avec-mysql",children:[{value:"Installer MySQL Server",id:"installer-mysql-server",children:[],level:3},{value:"Se connecter",id:"se-connecter",children:[{value:"Connection",id:"connection",children:[],level:4},{value:"D\xe9connection",id:"d\xe9connection",children:[],level:4}],level:3},{value:"Syntaxe SQL et premi\xe8res commandes",id:"syntaxe-sql-et-premi\xe8res-commandes",children:[{value:"&quot;Hello World !&quot;",id:"hello-world-",children:[],level:4},{value:"Syntaxe",id:"syntaxe",children:[],level:4},{value:"Commentaires",id:"commentaires",children:[],level:4},{value:"Cha\xeenes de caract\xe8res",id:"cha\xeenes-de-caract\xe8res",children:[{value:"Quelques autres caract\xe8res sp\xe9ciaux : <br/>",id:"quelques-autres-caract\xe8res-sp\xe9ciaux--",children:[],level:5}],level:4},{value:"Un peu de math",id:"un-peu-de-math",children:[],level:4}],level:3},{value:"Utilisateur",id:"utilisateur",children:[{value:"Explications",id:"explications",children:[],level:4}],level:3},{value:"Encodage, jeux de caract\xe8res et interclassement",id:"encodage-jeux-de-caract\xe8res-et-interclassement",children:[],level:3}],level:2},{value:"Distinguez les diff\xe9rents types de donn\xe9es",id:"distinguez-les-diff\xe9rents-types-de-donn\xe9es",children:[{value:"Types num\xe9riques",id:"types-num\xe9riques",children:[],level:3},{value:"Nombres entiers",id:"nombres-entiers",children:[{value:"L&#39;attribut <code>UNSIGNED</code>",id:"lattribut-unsigned",children:[],level:4},{value:"Limiter la taille d&#39;affichage et l&#39;attribut <code>ZEROFILL</code>",id:"limiter-la-taille-daffichage-et-lattribut-zerofill",children:[],level:4}],level:3},{value:"Nombres d\xe9cimaux",id:"nombres-d\xe9cimaux",children:[{value:"NUMERIC et DECIMAL",id:"numeric-et-decimal",children:[],level:4},{value:"FLOAT, DOUBLE et REAL",id:"float-double-et-real",children:[],level:4}],level:3},{value:"Types alphanum\xe9riques",id:"types-alphanum\xe9riques",children:[{value:"Cha\xeenes de type texte",id:"cha\xeenes-de-type-texte",children:[{value:"CHAR et VARCHAR",id:"char-et-varchar",children:[],level:5},{value:"TEXT",id:"text",children:[],level:5}],level:4},{value:"Cha\xeenes de type binaire",id:"cha\xeenes-de-type-binaire",children:[],level:4}],level:3},{value:"Types temporels",id:"types-temporels",children:[{value:"DATE, TIME et DATETIME",id:"date-time-et-datetime",children:[{value:"DATE",id:"date",children:[],level:5},{value:"DATETIME",id:"datetime",children:[],level:5},{value:"TIME",id:"time",children:[],level:5},{value:"YEAR",id:"year",children:[],level:5},{value:"TIMESTAMP",id:"timestamp",children:[],level:5},{value:"La date par d\xe9faut",id:"la-date-par-d\xe9faut",children:[],level:5}],level:4}],level:3}],level:2},{value:"Cr\xe9ez une base de donn\xe9es",id:"cr\xe9ez-une-base-de-donn\xe9es",children:[{value:"Conseils",id:"conseils",children:[],level:3},{value:"Conventions",id:"conventions",children:[],level:3}],level:2},{value:"Cr\xe9ation et suppression d&#39;une base de donn\xe9es",id:"cr\xe9ation-et-suppression-dune-base-de-donn\xe9es",children:[{value:"Cr\xe9ation",id:"cr\xe9ation",children:[],level:3},{value:"Suppression",id:"suppression",children:[],level:3},{value:"Utilisation d&#39;une base de donn\xe9es",id:"utilisation-dune-base-de-donn\xe9es",children:[],level:3}],level:2},{value:"Cr\xe9ez des tables",id:"cr\xe9ez-des-tables",children:[{value:"D\xe9finition des colonnes",id:"d\xe9finition-des-colonnes",children:[{value:"Type de colonne",id:"type-de-colonne",children:[],level:4},{value:"NULL or NOT NULL ?",id:"null-or-not-null-",children:[],level:4},{value:"En r\xe9sum\xe9",id:"en-r\xe9sum\xe9",children:[],level:4}],level:3},{value:"Introduction aux cl\xe9s primaires",id:"introduction-aux-cl\xe9s-primaires",children:[{value:"Identit\xe9",id:"identit\xe9",children:[],level:4},{value:"Cl\xe9 primaire",id:"cl\xe9-primaire",children:[],level:4},{value:"Auto-incr\xe9mentation",id:"auto-incr\xe9mentation",children:[],level:4}],level:3},{value:"Syntaxe de CREATE TABLE",id:"syntaxe-de-create-table",children:[{value:"Cr\xe9ation de la table",id:"cr\xe9ation-de-la-table",children:[],level:4},{value:"D\xe9finition des colonnes",id:"d\xe9finition-des-colonnes-1",children:[],level:4},{value:"Application : cr\xe9ation de <em>Eleves</em>",id:"application--cr\xe9ation-de-eleves",children:[],level:4},{value:"V\xe9rifications",id:"v\xe9rifications",children:[],level:4}],level:3},{value:"Suppression d&#39;une table",id:"suppression-dune-table",children:[],level:3}],level:2},{value:"Modifiez une table",id:"modifiez-une-table",children:[{value:"Syntaxe de la requ\xeate",id:"syntaxe-de-la-requ\xeate",children:[{value:"Avant de continuer",id:"avant-de-continuer",children:[],level:4}],level:3},{value:"Ajout et suppression d&#39;une colonne",id:"ajout-et-suppression-dune-colonne",children:[{value:"Ajout",id:"ajout",children:[],level:4},{value:"Suppression",id:"suppression-1",children:[],level:4}],level:3},{value:"Modification de colonne",id:"modification-de-colonne",children:[{value:"Changement du nom de la colonne",id:"changement-du-nom-de-la-colonne",children:[],level:4},{value:"Changement du type de donn\xe9es",id:"changement-du-type-de-donn\xe9es",children:[],level:4}],level:3}],level:2},{value:"Ins\xe9rez des donn\xe9es",id:"ins\xe9rez-des-donn\xe9es",children:[{value:"Syntaxe de INSERT",id:"syntaxe-de-insert",children:[{value:"Insertion sans pr\xe9ciser les colonnes",id:"insertion-sans-pr\xe9ciser-les-colonnes",children:[],level:4},{value:"Insertion en pr\xe9cisant les colonnes",id:"insertion-en-pr\xe9cisant-les-colonnes",children:[],level:4},{value:"Insertion multiple",id:"insertion-multiple",children:[],level:4}],level:3},{value:"Syntaxe alternative de MySQL",id:"syntaxe-alternative-de-mysql",children:[],level:3},{value:"Utilisation de fichiers externes",id:"utilisation-de-fichiers-externes",children:[{value:"Ex\xe9cuter des commandes SQL \xe0 partir d&#39;un fichier",id:"ex\xe9cuter-des-commandes-sql-\xe0-partir-dun-fichier",children:[],level:4},{value:"Ins\xe9rer des donn\xe9es \xe0 partir d&#39;un fichier format\xe9",id:"ins\xe9rer-des-donn\xe9es-\xe0-partir-dun-fichier-format\xe9",children:[],level:4}],level:3},{value:"Remplissage de la base",id:"remplissage-de-la-base",children:[{value:"Ex\xe9cution de commandes SQL",id:"ex\xe9cution-de-commandes-sql",children:[],level:4},{value:"LOAD DATA INFILE",id:"load-data-infile",children:[],level:4}],level:3}],level:2},{value:"S\xe9lectionnez des donn\xe9es",id:"s\xe9lectionnez-des-donn\xe9es",children:[{value:"Syntaxe de <code>SELECT</code>",id:"syntaxe-de-select",children:[{value:"S\xe9lectionner toutes les colonnes",id:"s\xe9lectionner-toutes-les-colonnes",children:[],level:4}],level:3},{value:"La clause WHERE",id:"la-clause-where",children:[{value:"Les op\xe9rateurs de comparaison",id:"les-op\xe9rateurs-de-comparaison",children:[],level:4},{value:"Combinaisons de crit\xe8res",id:"combinaisons-de-crit\xe8res",children:[{value:"AND",id:"and",children:[],level:5},{value:"OR",id:"or",children:[],level:5},{value:"NOT",id:"not",children:[],level:5},{value:"XOR",id:"xor",children:[],level:5},{value:"S\xe9lection complexe",id:"s\xe9lection-complexe",children:[{value:"Exemple",id:"exemple",children:[],level:6}],level:5}],level:4},{value:"Le cas de NULL",id:"le-cas-de-null",children:[],level:4}],level:3},{value:"Tri des donn\xe9es",id:"tri-des-donn\xe9es",children:[{value:"Tri ascendant ou descendant",id:"tri-ascendant-ou-descendant",children:[],level:4},{value:"Trier sur plusieurs colonnes",id:"trier-sur-plusieurs-colonnes",children:[],level:4}],level:3},{value:"\xc9liminer les doublons",id:"\xe9liminer-les-doublons",children:[],level:3},{value:"Restreindre les r\xe9sultats",id:"restreindre-les-r\xe9sultats",children:[{value:"Syntaxe",id:"syntaxe-1",children:[],level:4}],level:3}],level:2},{value:"\xc9largissez les possibilit\xe9s de la clause WHERE",id:"\xe9largissez-les-possibilit\xe9s-de-la-clause-where",children:[],level:2},{value:"Recherche approximative",id:"recherche-approximative",children:[{value:"Quelques exemples :",id:"quelques-exemples-",children:[],level:3}],level:2},{value:"Rechercher &#39;%&#39; ou &#39;_&#39;",id:"rechercher--ou-_",children:[{value:"Exemple :",id:"exemple-",children:[],level:3}],level:2},{value:"Exclure une cha\xeene de caract\xe8res",id:"exclure-une-cha\xeene-de-caract\xe8res",children:[],level:2},{value:"Recherche dans les num\xe9riques",id:"recherche-dans-les-num\xe9riques",children:[],level:2},{value:"Recherche dans un intervalle",id:"recherche-dans-un-intervalle",children:[],level:2},{value:"Set de crit\xe8res",id:"set-de-crit\xe8res",children:[],level:2},{value:"Supprimez et modifiez des donn\xe9es",id:"supprimez-et-modifiez-des-donn\xe9es",children:[{value:"Sauvegarde d&#39;une base de donn\xe9es",id:"sauvegarde-dune-base-de-donn\xe9es",children:[],level:3},{value:"Suppression",id:"suppression-2",children:[],level:3},{value:"Modification",id:"modification",children:[],level:3}],level:2},{value:"Index",id:"index",children:[{value:"Qu&#39;est-ce qu&#39;un index ?",id:"quest-ce-quun-index-",children:[{value:"Int\xe9r\xeat des index",id:"int\xe9r\xeat-des-index",children:[],level:4},{value:"D\xe9savantages",id:"d\xe9savantages",children:[],level:4},{value:"Index sur plusieurs colonnes",id:"index-sur-plusieurs-colonnes",children:[{value:"Tirer parti des &quot;index par la gauche&quot;",id:"tirer-parti-des-index-par-la-gauche",children:[],level:5}],level:4},{value:"Index sur des colonnes de type alphanum\xe9rique",id:"index-sur-des-colonnes-de-type-alphanum\xe9rique",children:[{value:"Types CHAR et VARCHAR",id:"types-char-et-varchar",children:[],level:5},{value:"Types BLOB et TEXT (et d\xe9riv\xe9s)",id:"types-blob-et-text-et-d\xe9riv\xe9s",children:[],level:5}],level:4}],level:3},{value:"Les diff\xe9rents types d&#39;index",id:"les-diff\xe9rents-types-dindex",children:[{value:"Index UNIQUE",id:"index-unique",children:[{value:"Contraintes",id:"contraintes",children:[],level:5}],level:4},{value:"Index FULLTEXT",id:"index-fulltext",children:[],level:4}],level:3},{value:"Cr\xe9ation et suppression des index",id:"cr\xe9ation-et-suppression-des-index",children:[{value:"Ajout des index lors de la cr\xe9ation de la table",id:"ajout-des-index-lors-de-la-cr\xe9ation-de-la-table",children:[{value:"Index dans la description de la colonne",id:"index-dans-la-description-de-la-colonne",children:[],level:5},{value:"Liste d&#39;index",id:"liste-dindex",children:[],level:5},{value:"Ajout des index apr\xe8s cr\xe9ation de la table",id:"ajout-des-index-apr\xe8s-cr\xe9ation-de-la-table",children:[],level:5},{value:"Ajout avec ALTER TABLE",id:"ajout-avec-alter-table",children:[],level:5},{value:"Ajout avec CREATE INDEX",id:"ajout-avec-create-index",children:[],level:5},{value:"Compl\xe9ment pour la cr\xe9ation d&#39;un index UNIQUE - le cas des contraintes",id:"compl\xe9ment-pour-la-cr\xe9ation-dun-index-unique---le-cas-des-contraintes",children:[],level:5},{value:"Suppression d&#39;un index",id:"suppression-dun-index",children:[],level:5}],level:4}],level:3}],level:2},{value:"Cl\xe9s primaires et \xe9trang\xe8res",id:"cl\xe9s-primaires-et-\xe9trang\xe8res",children:[{value:"Cl\xe9s primaires",id:"cl\xe9s-primaires",children:[{value:"Choix de la cl\xe9 primaire",id:"choix-de-la-cl\xe9-primaire",children:[],level:4},{value:"PRIMARY KEY or not PRIMARY KEY",id:"primary-key-or-not-primary-key",children:[],level:4},{value:"Cr\xe9ation d&#39;une cl\xe9 primaire",id:"cr\xe9ation-dune-cl\xe9-primaire",children:[{value:"Lors de la cr\xe9ation de la table",id:"lors-de-la-cr\xe9ation-de-la-table",children:[],level:5},{value:"Apr\xe8s cr\xe9ation de la table",id:"apr\xe8s-cr\xe9ation-de-la-table",children:[],level:5}],level:4},{value:"Suppression de la cl\xe9 primaire",id:"suppression-de-la-cl\xe9-primaire",children:[],level:4}],level:3},{value:"Cl\xe9s \xe9trang\xe8res",id:"cl\xe9s-\xe9trang\xe8res",children:[{value:"Cr\xe9ation",id:"cr\xe9ation-1",children:[{value:"Lors de la cr\xe9ation de la table",id:"lors-de-la-cr\xe9ation-de-la-table-1",children:[],level:5},{value:"Apr\xe8s cr\xe9ation de la table",id:"apr\xe8s-cr\xe9ation-de-la-table-1",children:[],level:5}],level:4},{value:"Suppression d&#39;une cl\xe9 \xe9trang\xe8re",id:"suppression-dune-cl\xe9-\xe9trang\xe8re",children:[],level:4}],level:3}],level:2},{value:"Gestion des utilisateurs",id:"gestion-des-utilisateurs",children:[{value:"Voir les bases de donn\xe9es",id:"voir-les-bases-de-donn\xe9es",children:[],level:3},{value:"Cr\xe9ation, modification et suppression des utilisateurs",id:"cr\xe9ation-modification-et-suppression-des-utilisateurs",children:[{value:"Syntaxe pour la cr\xe9ation et la suppression",id:"syntaxe-pour-la-cr\xe9ation-et-la-suppression",children:[],level:4},{value:"Utilisateur",id:"utilisateur-1",children:[{value:"Login",id:"login",children:[],level:5},{value:"H\xf4te",id:"h\xf4te",children:[],level:5},{value:"Renommer l&#39;utilisateur",id:"renommer-lutilisateur",children:[],level:5}],level:4},{value:"Mot de passe",id:"mot-de-passe",children:[],level:4}],level:3},{value:"Ajout et r\xe9vocation de privil\xe8ges",id:"ajout-et-r\xe9vocation-de-privil\xe8ges",children:[{value:"Ajout de privil\xe8ges",id:"ajout-de-privil\xe8ges",children:[],level:4},{value:"Syntaxe",id:"syntaxe-2",children:[],level:4},{value:"R\xe9vocation de privil\xe8ges",id:"r\xe9vocation-de-privil\xe8ges",children:[],level:4}],level:3},{value:"Privil\xe8ges particuliers",id:"privil\xe8ges-particuliers",children:[{value:"ALL",id:"all",children:[],level:4},{value:"USAGE",id:"usage",children:[],level:4},{value:"GRANT OPTION",id:"grant-option",children:[],level:4}],level:3}],level:2},{value:"Informations sur la base de donn\xe9es et les requ\xeates",id:"informations-sur-la-base-de-donn\xe9es-et-les-requ\xeates",children:[{value:"Commandes de description",id:"commandes-de-description",children:[{value:"Description d&#39;objets",id:"description-dobjets",children:[{value:"Objets listables avec <code>SHOW</code>",id:"objets-listables-avec-show",children:[],level:5},{value:"DESCRIBE",id:"describe",children:[],level:5}],level:4},{value:"Requ\xeate de cr\xe9ation d&#39;un objet",id:"requ\xeate-de-cr\xe9ation-dun-objet",children:[],level:4}],level:3},{value:"La base de donn\xe9es information_schema",id:"la-base-de-donn\xe9es-information_schema",children:[],level:3},{value:"D\xe9roulement d&#39;une requ\xeate",id:"d\xe9roulement-dune-requ\xeate",children:[{value:"Exemple",id:"exemple-1",children:[],level:4}],level:3}],level:2},{value:"Annexes",id:"annexes",children:[],level:2}],p={toc:d};function m(e){var n=e.components,t=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"administration-bdd-avec-mysql"},"Administration BDD avec MySQL"),(0,r.kt)("h2",{id:"les-d\xe9buts-avec-mysql"},"Les d\xe9buts avec MySQL"),(0,r.kt)("h3",{id:"installer-mysql-server"},"Installer MySQL Server"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"[A COMPLETER]")),(0,r.kt)("h3",{id:"se-connecter"},"Se connecter"),(0,r.kt)("h4",{id:"connection"},"Connection"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"> mysql -h localhost -u root -pmotdepassetopsecret\n\n# ou\n\n> mysql --host=localhost --user=root --password=motdepassetopsecret\n\n# ou un m\xe9lange des param\xe8tres courts et longs si \xe7a vous amuse\n\n> mysql -h localhost --user=root -pmotdepassetopsecret\n\n# ou\n\n> mysql -h localhost -u root -p\nEnter password :\n")),(0,r.kt)("h4",{id:"d\xe9connection"},"D\xe9connection"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"> quit\n\n# ou\n\n> exit\n")),(0,r.kt)("h3",{id:"syntaxe-sql-et-premi\xe8res-commandes"},"Syntaxe SQL et premi\xe8res commandes"),(0,r.kt)("h4",{id:"hello-world-"},'"Hello World !"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT 'Hello World !';\n")),(0,r.kt)("h4",{id:"syntaxe"},"Syntaxe"),(0,r.kt)("p",null,"Pour signifier \xe0 MySQL qu'une instruction est termin\xe9e, il faut mettre le caract\xe8re ",(0,r.kt)("inlineCode",{parentName:"p"},";")," . Tant qu'il ne rencontre pas ce caract\xe8re, le client MySQL pense que vous n'avez pas fini d'\xe9crire votre commande et attend gentiment que vous continuiez."),(0,r.kt)("p",null,"Ce caract\xe8re de fin d'instruction obligatoire va vous permettre :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"d'\xe9crire une instruction sur plusieurs lignes ;"),(0,r.kt)("li",{parentName:"ul"},"d'\xe9crire plusieurs instructions sur une seule ligne.")),(0,r.kt)("h4",{id:"commentaires"},"Commentaires"),(0,r.kt)("p",null,"En SQL, les commentaires sont introduits par ",(0,r.kt)("inlineCode",{parentName:"p"},"--")," (deux tirets). Cependant, MySQL d\xe9roge un peu \xe0 la r\xe8gle SQL et accepte deux syntaxes :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"#")," : tout ce qui suit ce caract\xe8re sera consid\xe9r\xe9 comme commentaire."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--")," : la syntaxe normale est accept\xe9e uniquement si les deux tirets sont suivis d'une espace au moins.")),(0,r.kt)("h4",{id:"cha\xeenes-de-caract\xe8res"},"Cha\xeenes de caract\xe8res"),(0,r.kt)("p",null,"Lorsque vous \xe9crivez une cha\xeene de caract\xe8res dans une commande SQL, il faut absolument l'entourer de guillemets simples (donc des apostrophes)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT 'Bonjour les B3 !';\n")),(0,r.kt)("p",null,"Si vous d\xe9sirez utiliser un caract\xe8re sp\xe9cial dans une cha\xeene, il vous faudra l'\xe9chapper avec ",(0,r.kt)("inlineCode",{parentName:"p"},"\\")," . Par exemple, si vous entourez votre cha\xeene de caract\xe8res de guillemets simples, mais voulez utiliser un tel guillemet \xe0 l'int\xe9rieur de votre cha\xeene :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT 'Salut l'ami';  -- Pas bien !\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT 'Salut l\\'ami'; -- Bien !\n")),(0,r.kt)("h5",{id:"quelques-autres-caract\xe8res-sp\xe9ciaux--"},"Quelques autres caract\xe8res sp\xe9ciaux : ",(0,r.kt)("br",null)),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Caract\xe8re"),(0,r.kt)("th",{parentName:"tr",align:null},"Signification"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\\n"),(0,r.kt)("td",{parentName:"tr",align:null},"retour \xe0 la ligne")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\\t"),(0,r.kt)("td",{parentName:"tr",align:null},"tabulation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\\"),(0,r.kt)("td",{parentName:"tr",align:null},"antislash")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"%"),(0,r.kt)("td",{parentName:"tr",align:null},"pourcent")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"_"),(0,r.kt)("td",{parentName:"tr",align:null},"soulign\xe9")))),(0,r.kt)("p",null,"Notez que, pour \xe9chapper un guillemet simple (et uniquement ce caract\xe8re), vous pouvez \xe9galement l'\xe9crire deux fois. Cette fa\xe7on d'\xe9chapper les guillemets correspond d'ailleurs \xe0 la norme SQL. Je vous encourage par cons\xe9quent \xe0 essayer de l'utiliser au maximum."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT 'Salut l'ami';  -- ne fonctionne pas !\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT 'Salut l\\'ami'; -- fonctionne !\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT 'Salut l''ami'; -- fonctionne aussi et correspond \xe0 la norme !\n")),(0,r.kt)("h4",{id:"un-peu-de-math"},"Un peu de math"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> SELECT (5+3)*2;\n\n+---------+\n| (5+3)*2 |\n+---------+\n|      16 |\n+---------+\n1 row in set (0.00 sec)\n")),(0,r.kt)("p",null,"MySQL est sensible \xe0 la priorit\xe9 des op\xe9rations, comme vous pourrez le constater en tapant cette commande :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> SELECT (5+3)*2, 5+3*2;\n+---------+-------+\n| (5+3)*2 | 5+3*2 |\n+---------+-------+\n|      16 |    11 |\n+---------+-------+\n1 row in set (0.00 sec)\n")),(0,r.kt)("h3",{id:"utilisateur"},"Utilisateur"),(0,r.kt)("p",null,"Tapez ces commandes dans mysql, en rempla\xe7ant ",(0,r.kt)("inlineCode",{parentName:"p"},"student")," par le nom d'utilisateur que vous avez choisi, et ",(0,r.kt)("inlineCode",{parentName:"p"},"mot_de_passe")," par le mot de passe que vous voulez lui attribuer :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER 'student'@'localhost' IDENTIFIED BY 'mot_de_passe';\nGRANT ALL PRIVILEGES ON bachelor3.* TO 'student'@'localhost';\n")),(0,r.kt)("h4",{id:"explications"},"Explications"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"CREATE USER 'student'"),"  : cette commande cr\xe9e l'utilisateur student."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@'localhost'"),"  : d\xe9finit \xe0 partir d'o\xf9 l'utilisateur peut se connecter. Dans notre cas, 'localhost', donc il devra \xeatre connect\xe9 \xe0 partir de cet ordinateur."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"IDENTIFIED BY 'mot_de_passe'"),"  : d\xe9finit le mot de passe de l'utilisateur."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"GRANT ALL PRIVILEGES"),"  : cette commande permet d'attribuer tous les droits (c'est-\xe0-dire insertions de donn\xe9es, s\xe9lections, modifications, suppressions\u2026)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ON bachelor3.*"),"  : d\xe9finit les bases de donn\xe9es et les tables sur lesquelles ces droits sont acquis. Donc ici, on donne les droits sur la base \"bachelor3\" (qui n'existe pas encore, mais ce n'est pas grave, nous la cr\xe9erons plus tard), pour toutes les tables de cette base (gr\xe2ce \xe0 *)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TO 'student'@'localhost'"),"  : d\xe9finit l'utilisateur (et son h\xf4te) auquel on accorde ces droits.")),(0,r.kt)("p",null,"Pour vous connecter \xe0 mysql avec ce nouvel utilisateur, il faut donc taper la commande suivante (apr\xe8s s'\xeatre d\xe9connect\xe9, bien s\xfbr) :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mysql -u student -p\n")),(0,r.kt)("h3",{id:"encodage-jeux-de-caract\xe8res-et-interclassement"},"Encodage, jeux de caract\xe8res et interclassement"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"[A COMPLETER]")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"distinguez-les-diff\xe9rents-types-de-donn\xe9es"},"Distinguez les diff\xe9rents types de donn\xe9es"),(0,r.kt)("p",null,"Nous avons vu dans l'introduction qu'une base de donn\xe9es contenait des tables, elles-m\xeames organis\xe9es en colonnes, dans lesquelles sont stock\xe9es des donn\xe9es."),(0,r.kt)("p",null,"En SQL (et dans la plupart des langages informatiques), les donn\xe9es sont s\xe9par\xe9es en plusieurs types (par exemple : texte, nombre entier, date\u2026). Lorsque l'on d\xe9finit une colonne dans une table de la base, il faut donc lui donner un type, et toutes les donn\xe9es stock\xe9es dans cette colonne devront correspondre au type de la colonne. Nous allons donc voir les diff\xe9rents types de donn\xe9es existant dans MySQL."),(0,r.kt)("h3",{id:"types-num\xe9riques"},"Types num\xe9riques"),(0,r.kt)("p",null,"On peut subdiviser les types num\xe9riques en deux sous-cat\xe9gories : les nombres entiers, et les nombres d\xe9cimaux."),(0,r.kt)("h3",{id:"nombres-entiers"},"Nombres entiers"),(0,r.kt)("p",null,"Les types de donn\xe9es qui acceptent des nombres entiers comme valeurs sont d\xe9sign\xe9s par le mot-cl\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"INT"),", et ses d\xe9clinaisons ",(0,r.kt)("inlineCode",{parentName:"p"},"TINYINT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"SMALLINT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"MEDIUMINT"),"  et ",(0,r.kt)("inlineCode",{parentName:"p"},"BIGINT"),". La diff\xe9rence entre ces types est le nombre d'octets (donc la place en m\xe9moire) r\xe9serv\xe9s \xe0 la valeur du champ. Voici un tableau reprenant ces informations, ainsi que l'intervalle dans lequel la valeur peut \xeatre comprise pour chaque type :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Nombre d'octets"),(0,r.kt)("th",{parentName:"tr",align:null},"Minimum"),(0,r.kt)("th",{parentName:"tr",align:null},"Maximum"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TINYINT"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"-128"),(0,r.kt)("td",{parentName:"tr",align:null},"127")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SMALLINT"),(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"-32768"),(0,r.kt)("td",{parentName:"tr",align:null},"32767")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"MEDIUMINT"),(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"-8388608"),(0,r.kt)("td",{parentName:"tr",align:null},"8388607")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"INT"),(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"-2147483648"),(0,r.kt)("td",{parentName:"tr",align:null},"2147483647")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BIGINT"),(0,r.kt)("td",{parentName:"tr",align:null},"8"),(0,r.kt)("td",{parentName:"tr",align:null},"-9223372036854775808"),(0,r.kt)("td",{parentName:"tr",align:null},"9223372036854775807")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Si vous essayez de stocker une valeur en dehors de l'intervalle permis par le type de votre champ, MySQL stockera la valeur la plus proche. Par exemple, si vous essayez de stocker 12457 dans un ",(0,r.kt)("inlineCode",{parentName:"p"},"TINYINT"),", la valeur stock\xe9e sera 127 ; ce qui n'est pas exactement pareil. R\xe9fl\xe9chissez donc bien aux types de vos champs.")),(0,r.kt)("h4",{id:"lattribut-unsigned"},"L'attribut ",(0,r.kt)("inlineCode",{parentName:"h4"},"UNSIGNED")),(0,r.kt)("p",null,"Vous pouvez \xe9galement pr\xe9ciser que vos colonnes sont ",(0,r.kt)("inlineCode",{parentName:"p"},"UNSIGNED"),", c'est-\xe0-dire que l'on ne pr\xe9cise pas s'il s'agit d'une valeur positive ou n\xe9gative (on aura donc toujours une valeur positive). Dans ce cas, la longueur de l'intervalle reste la m\xeame, mais les valeurs possibles sont d\xe9cal\xe9es, le minimum valant 0. Pour les ",(0,r.kt)("inlineCode",{parentName:"p"},"TINYINT"),", on pourra par exemple aller de 0 \xe0 255."),(0,r.kt)("h4",{id:"limiter-la-taille-daffichage-et-lattribut-zerofill"},"Limiter la taille d'affichage et l'attribut ",(0,r.kt)("inlineCode",{parentName:"h4"},"ZEROFILL")),(0,r.kt)("p",null,"Il est possible de pr\xe9ciser le nombre de chiffres minimum ",(0,r.kt)("strong",{parentName:"p"},"\xe0 l'affichage")," d'une colonne de type ",(0,r.kt)("inlineCode",{parentName:"p"},"INT")," (ou un de ses d\xe9riv\xe9s). Il suffit alors de pr\xe9ciser ce nombre entre parenth\xe8ses : ",(0,r.kt)("inlineCode",{parentName:"p"},"INT(x)"),"."),(0,r.kt)("p",null,"Cette taille d'affichage est g\xe9n\xe9ralement utilis\xe9e en combinaison avec l'attribut ",(0,r.kt)("inlineCode",{parentName:"p"},"ZEROFILL"),". Cet attribut ajoute des z\xe9ros \xe0 gauche du nombre lors de son affichage, il change donc le caract\xe8re par d\xe9faut par '0'. Donc si vous d\xe9clarez une colonne comme \xe9tant :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INT(4) ZEROFILL\n")),(0,r.kt)("p",null,"Vous aurez l'affichage suivant :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Nombre stock\xe9"),(0,r.kt)("th",{parentName:"tr",align:null},"Nombre affich\xe9"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"45"),(0,r.kt)("td",{parentName:"tr",align:null},"0045")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4156"),(0,r.kt)("td",{parentName:"tr",align:null},"4156")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"785164"),(0,r.kt)("td",{parentName:"tr",align:null},"3785164")))),(0,r.kt)("h3",{id:"nombres-d\xe9cimaux"},"Nombres d\xe9cimaux"),(0,r.kt)("p",null,"Cinq mots-cl\xe9s permettent de stocker des nombres d\xe9cimaux dans une colonne :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"DECIMAL"),","),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NUMERIC"),","),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"FLOAT"),","),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"REAL"),","),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"DOUBLE"),".")),(0,r.kt)("h4",{id:"numeric-et-decimal"},"NUMERIC et DECIMAL"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"NUMERIC"),"  et ",(0,r.kt)("inlineCode",{parentName:"p"},"DECIMAL"),"  sont \xe9quivalents et acceptent deux param\xe8tres : la ",(0,r.kt)("strong",{parentName:"p"},"pr\xe9cision")," et ",(0,r.kt)("strong",{parentName:"p"},"l'\xe9chelle"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"La pr\xe9cision d\xe9finit le nombre de chiffres significatifs stock\xe9s, donc les 0 \xe0 gauche ne comptent pas. En effet, 0024 est \xe9quivalent \xe0 24. Il n'y a donc que deux chiffres significatifs dans 0024."),(0,r.kt)("li",{parentName:"ul"},"L'\xe9chelle d\xe9finit le nombre de chiffres apr\xe8s la virgule.")),(0,r.kt)("p",null,"Dans un champ ",(0,r.kt)("inlineCode",{parentName:"p"},"DECIMAL(5,3)"),", on peut donc stocker des nombres de 5 chiffres significatifs au maximum, dont 3 chiffres sont apr\xe8s la virgule."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Par exemple : 12.354, -54.258, 89.2 ou -56.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"DECIMAL(4)")," \xe9quivaut \xe0 \xe9crire ",(0,r.kt)("inlineCode",{parentName:"p"},"DECIMAL(4, 0)"))),(0,r.kt)("h4",{id:"float-double-et-real"},"FLOAT, DOUBLE et REAL"),(0,r.kt)("p",null,"Le mot-cl\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"FLOAT")," peut s'utiliser sans param\xe8tres, auquel cas 4 octets sont utilis\xe9s pour stocker les valeurs de la colonne. Il est cependant possible de sp\xe9cifier une pr\xe9cision et une \xe9chelle, de la m\xeame mani\xe8re que pour ",(0,r.kt)("inlineCode",{parentName:"p"},"DECIMAL")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"NUMERIC"),"."),(0,r.kt)("p",null,"Quant \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"REAL"),"  et ",(0,r.kt)("inlineCode",{parentName:"p"},"DOUBLE"),", ils ne supportent pas de param\xe8tres. ",(0,r.kt)("inlineCode",{parentName:"p"},"DOUBLE")," est normalement plus pr\xe9cis que ",(0,r.kt)("inlineCode",{parentName:"p"},"REAL")," (stockage dans 8 octets, contre stockage dans 4 octets), mais ce n'est pas le cas avec MySQL qui utilise 8 octets dans les deux cas. Il est donc conseill\xe9 d'utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"DOUBLE")," pour \xe9viter les surprises en cas de changement de ",(0,r.kt)("strong",{parentName:"p"},"SGBDR"),"."),(0,r.kt)("h3",{id:"types-alphanum\xe9riques"},"Types alphanum\xe9riques"),(0,r.kt)("h4",{id:"cha\xeenes-de-type-texte"},"Cha\xeenes de type texte"),(0,r.kt)("h5",{id:"char-et-varchar"},"CHAR et VARCHAR"),(0,r.kt)("p",null,"Pour stocker un texte relativement court (moins de 255 caract\xe8res), vous pouvez utiliser les types ",(0,r.kt)("inlineCode",{parentName:"p"},"CHAR")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"VARCHAR"),".\nSi vous entrez un texte plus long que la taille maximale d\xe9finie pour le champ, celui-ci sera tronqu\xe9."),(0,r.kt)("p",null,"Petit tableau explicatif, en prenant l'exemple d'un CHAR  ou d'un VARCHAR  de 5 caract\xe8res au maximum :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Texte"),(0,r.kt)("th",{parentName:"tr",align:null},"CHAR(5)"),(0,r.kt)("th",{parentName:"tr",align:null},"M\xe9moire requise"),(0,r.kt)("th",{parentName:"tr",align:null},"VARCHAR(5)"),(0,r.kt)("th",{parentName:"tr",align:null},"M\xe9moire requise"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"''"),(0,r.kt)("td",{parentName:"tr",align:null},"'     '"),(0,r.kt)("td",{parentName:"tr",align:null},"5 octets"),(0,r.kt)("td",{parentName:"tr",align:null},"'     '"),(0,r.kt)("td",{parentName:"tr",align:null},"1 octet")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"'tex'"),(0,r.kt)("td",{parentName:"tr",align:null},"'tex  '"),(0,r.kt)("td",{parentName:"tr",align:null},"5 octets"),(0,r.kt)("td",{parentName:"tr",align:null},"'tex  '"),(0,r.kt)("td",{parentName:"tr",align:null},"4 octets")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"'texte'"),(0,r.kt)("td",{parentName:"tr",align:null},"'texte'"),(0,r.kt)("td",{parentName:"tr",align:null},"5 octets"),(0,r.kt)("td",{parentName:"tr",align:null},"'texte'"),(0,r.kt)("td",{parentName:"tr",align:null},"6 octets")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"'texte trop long'"),(0,r.kt)("td",{parentName:"tr",align:null},"'texte'"),(0,r.kt)("td",{parentName:"tr",align:null},"5 octets"),(0,r.kt)("td",{parentName:"tr",align:null},"'texte'"),(0,r.kt)("td",{parentName:"tr",align:null},"6 octets")))),(0,r.kt)("p",null,"Vous voyez donc que, dans le cas o\xf9 le texte fait la longueur maximale autoris\xe9e, un ",(0,r.kt)("inlineCode",{parentName:"p"},"CHAR(x)"),"  prend moins de place en m\xe9moire qu'un ",(0,r.kt)("inlineCode",{parentName:"p"},"VARCHAR(x"),"). Pr\xe9f\xe9rez donc le ",(0,r.kt)("inlineCode",{parentName:"p"},"CHAR(x)"),"  dans le cas o\xf9 vous savez que vous aurez toujours ",(0,r.kt)("inlineCode",{parentName:"p"},"x")," caract\xe8res (par exemple si vous stockez un code postal). Par contre, si la longueur de votre texte risque de varier d'une ligne \xe0 l'autre, d\xe9finissez votre colonne comme un ",(0,r.kt)("inlineCode",{parentName:"p"},"VARCHAR(x)"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Dans le tableau ci-dessus, tous les caract\xe8res sont des caract\xe8res simples, sans accents. Dans un texte comprenant des accents et encod\xe9 en UTF-8, les caract\xe8res accentu\xe9s occupent deux octets en m\xe9moire. Il est donc possible, pour un CHAR(5), d'occuper plus de 5 octets en m\xe9moire (mais impossible d'y stocker plus que 5 caract\xe8res).")),(0,r.kt)("h5",{id:"text"},"TEXT"),(0,r.kt)("p",null,"Pour stocker des textes de plus de 255 caract\xe8res, il suffit d'utiliser le type ",(0,r.kt)("inlineCode",{parentName:"p"},"TEXT"),", ou un de ses d\xe9riv\xe9s ",(0,r.kt)("inlineCode",{parentName:"p"},"TINYTEXT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"MEDIUMTEXT")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"LONGTEXT"),". La diff\xe9rence entre ceux-ci est la place qu'ils permettent d'occuper en m\xe9moire. Petit tableau habituel :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Longueur maximale"),(0,r.kt)("th",{parentName:"tr",align:null},"M\xe9moire occup\xe9e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TINYTEXT"),(0,r.kt)("td",{parentName:"tr",align:null},"2",(0,r.kt)("sup",null,"8")," octets"),(0,r.kt)("td",{parentName:"tr",align:null},"Longueur de la cha\xeene + 1 octet")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TEXT"),(0,r.kt)("td",{parentName:"tr",align:null},"2",(0,r.kt)("sup",null,"16")," octets"),(0,r.kt)("td",{parentName:"tr",align:null},"Longueur de la cha\xeene + 2 octets")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"MEDIUMTEXT"),(0,r.kt)("td",{parentName:"tr",align:null},"2",(0,r.kt)("sup",null,"24")," octets"),(0,r.kt)("td",{parentName:"tr",align:null},"Longueur de la cha\xeene + 3 octets")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LONGTEXT"),(0,r.kt)("td",{parentName:"tr",align:null},"2",(0,r.kt)("sup",null,"32")," octets"),(0,r.kt)("td",{parentName:"tr",align:null},"Longueur de la cha\xeene + 4 octets")))),(0,r.kt)("h4",{id:"cha\xeenes-de-type-binaire"},"Cha\xeenes de type binaire"),(0,r.kt)("p",null,"Comme les cha\xeenes de type texte que l'on vient de voir, une cha\xeene binaire n'est rien d'autre qu'une suite de caract\xe8res.\nCependant, si les textes sont affect\xe9s par l'encodage et l'interclassement, ce n'est pas le cas des cha\xeenes binaires. Une cha\xeene binaire n'est rien d'autre qu'une suite d'octets. Aucune interpr\xe9tation n'est faite sur ces octets. Ceci a deux cons\xe9quences principales :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'Une cha\xeene binaire traite directement l\'octet, et pas le caract\xe8re que l\'octet repr\xe9sente. Donc par exemple, une recherche sur une cha\xeene binaire sera toujours sensible \xe0 la casse, puisque "A" (code binaire : 01000001) sera toujours diff\xe9rent de "a" (code binaire : 01100001).'),(0,r.kt)("li",{parentName:"ul"},"Tous les caract\xe8res sont utilisables, y compris les fameux caract\xe8res de contr\xf4le non affichables d\xe9finis dans la table ASCII.")),(0,r.kt)("p",null,'Par cons\xe9quent, les types binaires sont parfaits pour stocker des donn\xe9es "brutes" comme des images par exemple, tandis que les cha\xeenes de texte sont parfaites pour stocker du texte.'),(0,r.kt)("p",null,"Les types binaires sont d\xe9finis de la m\xeame fa\xe7on que les types de cha\xeenes de texte. ",(0,r.kt)("inlineCode",{parentName:"p"},"VARBINARY(x)"),"  et ",(0,r.kt)("inlineCode",{parentName:"p"},"BINARY(x)"),"  permettent de stocker des cha\xeenes binaires de ",(0,r.kt)("em",{parentName:"p"},"x")," caract\xe8res au maximum (avec une gestion de la m\xe9moire identique \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"VARCHAR(x)"),"  et ",(0,r.kt)("inlineCode",{parentName:"p"},"CHAR(x)"),"). Pour les cha\xeenes plus longues, il existe les types ",(0,r.kt)("inlineCode",{parentName:"p"},"TINYBLOB"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"BLOB"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"MEDIUMBLOB"),"  et ",(0,r.kt)("inlineCode",{parentName:"p"},"LONGBLOB"),", avec les m\xeames limites de stockage que les types ",(0,r.kt)("inlineCode",{parentName:"p"},"TEXT"),"."),(0,r.kt)("h3",{id:"types-temporels"},"Types temporels"),(0,r.kt)("p",null,"Les cinq types temporels de MySQL sont ",(0,r.kt)("inlineCode",{parentName:"p"},"DATE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"DATETIME"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"TIME"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"TIMESTAMP")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"YEAR"),"."),(0,r.kt)("h4",{id:"date-time-et-datetime"},"DATE, TIME et DATETIME"),(0,r.kt)("p",null,"Comme son nom l'indique, ",(0,r.kt)("inlineCode",{parentName:"p"},"DATE")," sert \xe0 stocker une date. ",(0,r.kt)("inlineCode",{parentName:"p"},"TIME")," sert quant \xe0 lui \xe0 stocker une heure, et ",(0,r.kt)("inlineCode",{parentName:"p"},"DATETIME")," stocke une date ",(0,r.kt)("strong",{parentName:"p"},"ET")," une heure !"),(0,r.kt)("h5",{id:"date"},"DATE"),(0,r.kt)("p",null,"Pour entrer une date, il faut donner d'abord l'ann\xe9e (deux ou quatre chiffres), ensuite le mois (deux chiffres) , et, pour finir, le jour (deux chiffres), sous forme de nombre ou de cha\xeene de caract\xe8res."),(0,r.kt)("p",null,"Voici quelques exemples d'expressions correctes (A repr\xe9sente les ann\xe9es, M les mois et J les jours) :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"AAAA-MM-JJ'")," (c'est sous ce format-ci qu'une ",(0,r.kt)("inlineCode",{parentName:"li"},"DATE")," est stock\xe9e dans MySQL)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'AAMMJJ'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'AAAA/MM/JJ'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'AA+MM+JJ'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'AAAA%MM%JJ'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"AAAAMMJJ"),"  (nombre)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"AAMMJJ"),"  (nombre)")),(0,r.kt)("p",null,"L'ann\xe9e peut donc \xeatre donn\xe9e avec deux ou quatre chiffres. Dans ce cas, le si\xe8cle n'est pas pr\xe9cis\xe9, et c'est MySQL qui va d\xe9cider de ce qu'il utilisera, selon ces crit\xe8res :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"si l'ann\xe9e donn\xe9e est entre 00 et 69, on utilisera le XXIe si\xe8cle, on ira donc de 2000 \xe0 2069 ;"),(0,r.kt)("li",{parentName:"ul"},"par contre, si l'ann\xe9e est comprise entre 70 et 99, on utilisera le XXe si\xe8cle, donc entre 1970 et 1999.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"MySQL supporte des ",(0,r.kt)("inlineCode",{parentName:"p"},"DATE")," allant de '1001-01-01' \xe0 '9999-12-31'")),(0,r.kt)("h5",{id:"datetime"},"DATETIME"),(0,r.kt)("p",null,"Tr\xe8s proche de ",(0,r.kt)("inlineCode",{parentName:"p"},"DATE"),", ce type permet de stocker une heure, en plus d'une date. Si l'on utilise une cha\xeene de caract\xe8res, il faut s\xe9parer la date et l'heure par une espace."),(0,r.kt)("p",null,"Quelques exemples corrects (H repr\xe9sente les heures, M les minutes et S les secondes) :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'AAAA-MM-JJ HH:MM:SS'")," (c'est sous ce format-ci qu'un DATETIME est stock\xe9 dans MySQL)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'AA*MM*JJ HH+MM+SS'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"AAAAMMJJHHMMSS"),"  (nombre)")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"MySQL supporte des ",(0,r.kt)("inlineCode",{parentName:"p"},"DATETIME")," allant de '1001-01-01 00:00:00' \xe0 '9999-12-31 23:59:59'.")),(0,r.kt)("h5",{id:"time"},"TIME"),(0,r.kt)("p",null,"Le type ",(0,r.kt)("inlineCode",{parentName:"p"},"TIME")," est un peu plus compliqu\xe9, puisqu'il permet non seulement de stocker une heure pr\xe9cise, mais aussi un intervalle de temps. On n'est donc pas limit\xe9 \xe0 24 heures, et il est m\xeame possible de stocker un nombre de jours ou un intervalle n\xe9gatif. Comme dans ",(0,r.kt)("inlineCode",{parentName:"p"},"DATETIME"),", il faut d'abord donner l'heure, puis les minutes, puis les secondes, chaque partie pouvant \xeatre s\xe9par\xe9e des autres par le caract\xe8re ",(0,r.kt)("inlineCode",{parentName:"p"},":")," . Dans le cas o\xf9 l'on pr\xe9cise \xe9galement un nombre de jours, alors les jours sont en premier et s\xe9par\xe9s du reste par une espace. Exemples :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'HH:MM:SS'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'HHH:MM:SS'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'MM:SS'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'J HH:MM:SS'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'HHMMSS'")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"HHMMSS"),"  (nombre)")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"MySQL supporte des ",(0,r.kt)("inlineCode",{parentName:"p"},"TIME")," allant de '-838:59:59' \xe0 '838:59:59")),(0,r.kt)("h5",{id:"year"},"YEAR"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"YEAR")," est un type int\xe9ressant pour retenir que l'ann\xe9e, car il ne prend qu'un seul octet en m\xe9moire. Cependant, un octet ne pouvant contenir que 256 valeurs diff\xe9rentes, ",(0,r.kt)("inlineCode",{parentName:"p"},"YEAR")," est fortement limit\xe9 : on ne peut y stocker que des ann\xe9es entre 1901 et 2155. Cela dit, cela devrait suffire \xe0 la majorit\xe9 d'entre vous pour au moins les cent prochaines ann\xe9es."),(0,r.kt)("p",null,"On peut entrer une donn\xe9e de type ",(0,r.kt)("inlineCode",{parentName:"p"},"YEAR")," sous forme de cha\xeene de caract\xe8res ou d'entiers, avec 2 ou 4 chiffres. Si l'on ne pr\xe9cise que deux chiffres, le si\xe8cle est ajout\xe9 par MySQL selon les m\xeames crit\xe8res que pour ",(0,r.kt)("inlineCode",{parentName:"p"},"DATE")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"DATETIME"),", ",(0,r.kt)("strong",{parentName:"p"},"\xe0 une exception pr\xe8s")," : si l'on entre 00 (un entier donc), il sera interpr\xe9t\xe9 comme la valeur par d\xe9faut de ",(0,r.kt)("inlineCode",{parentName:"p"},"YEAR"),"  0000. Par contre, si l'on entre ",(0,r.kt)("inlineCode",{parentName:"p"},"'00'")," (une cha\xeene de caract\xe8res), elle sera bien interpr\xe9t\xe9e comme l'ann\xe9e 2000.\nPlus de pr\xe9cisions sur les valeurs par d\xe9faut des types temporels dans quelques instants !"),(0,r.kt)("h5",{id:"timestamp"},"TIMESTAMP"),(0,r.kt)("p",null,"Par d\xe9finition, le timestamp d'une date est le nombre de secondes \xe9coul\xe9es depuis le 1er janvier 1970, 0 h 0 min 0 s (TUC) et la date en question.\nLes timestamps \xe9tant stock\xe9s sur 4 octets, il existe une limite sup\xe9rieure : le 19 janvier 2038 \xe0 3 h 14 min 7 s. Par cons\xe9quent, v\xe9rifiez bien que vous \xeates dans l'intervalle de validit\xe9 avant d'utiliser un timestamp."),(0,r.kt)("h5",{id:"la-date-par-d\xe9faut"},"La date par d\xe9faut"),(0,r.kt)("p",null,"Lorsque MySQL rencontre une date/heure incorrecte, ou qui n'est pas dans l'intervalle de validit\xe9 du champ, la valeur par d\xe9faut est stock\xe9e \xe0 la place. Il s'agit de la valeur \"z\xe9ro\" du type. On peut se r\xe9f\xe9rer \xe0 cette valeur par d\xe9faut en utilisant ",(0,r.kt)("inlineCode",{parentName:"p"},"'0'"),'  (caract\xe8re), 0 (nombre) ou la repr\xe9sentation du "z\xe9ro" correspondant au type de la colonne (voir tableau ci-dessous).'),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},'Date par d\xe9faut ("z\xe9ro")'))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"DATE"),(0,r.kt)("td",{parentName:"tr",align:null},"'0000-00-00'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"DATETIME"),(0,r.kt)("td",{parentName:"tr",align:null},"'0000-00-00 00:00:00'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TIME"),(0,r.kt)("td",{parentName:"tr",align:null},"'00:00:00'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"YEAR"),(0,r.kt)("td",{parentName:"tr",align:null},"0000")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TIMESTAMP"),(0,r.kt)("td",{parentName:"tr",align:null},"00000000000000")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Une exception toutefois : si vous ins\xe9rez un ",(0,r.kt)("inlineCode",{parentName:"p"},"TIME")," qui d\xe9passe l'intervalle de validit\xe9, MySQL ne le remplacera pas par le \"z\xe9ro\", mais par la plus proche valeur appartenant \xe0 l'intervalle de validit\xe9 (-838:59:59 ou 838:59:59).")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"cr\xe9ez-une-base-de-donn\xe9es"},"Cr\xe9ez une base de donn\xe9es"),(0,r.kt)("h3",{id:"conseils"},"Conseils"),(0,r.kt)("p",null,"N'utilisez jamais, ",(0,r.kt)("strong",{parentName:"p"},"d'espaces ou d'accents"),' dans vos noms de bases, tables ou colonnes. Au lieu d\'avoir une colonne "date de naissance", pr\xe9f\xe9rez "date_de_naissance" ou "date_naissance". Et au lieu d\'avoir une colonne "pr\xe9nom", utilisez "prenom". \xc9vitez \xe9galement d\'utiliser des ',(0,r.kt)("inlineCode",{parentName:"p"},"mots r\xe9serv\xe9s")," comme nom de colonnes/tables/bases. Par ",(0,r.kt)("inlineCode",{parentName:"p"},'"mot r\xe9serv\xe9"'),", on entends un mot-cl\xe9 SQL, donc un mot qui sert \xe0 d\xe9finir quelque chose dans le langage SQL. ",(0,r.kt)("a",{parentName:"p",href:"https://sql.sh/"},"documentation officielle")),(0,r.kt)("h3",{id:"conventions"},"Conventions"),(0,r.kt)("p",null,"Une convention largement r\xe9pandue veut que les commandes et mots-cl\xe9s SQL soient \xe9crits compl\xe8tement en ",(0,r.kt)("strong",{parentName:"p"},"MAJUSCULES"),". Il est plus facile de relire une commande de 5 lignes lorsque l'on peut diff\xe9rencier au premier coup d\u2019\u0153il les commandes SQL des noms de tables et de colonnes."),(0,r.kt)("h2",{id:"cr\xe9ation-et-suppression-dune-base-de-donn\xe9es"},"Cr\xe9ation et suppression d'une base de donn\xe9es"),(0,r.kt)("h3",{id:"cr\xe9ation"},"Cr\xe9ation"),(0,r.kt)("p",null,"La commande SQL pour cr\xe9er une base de donn\xe9es est la suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE DATABASE nom_base;\n")),(0,r.kt)("p",null,"Je vous rappelle qu'il faut \xe9galement d\xe9finir l'encodage utilis\xe9 (l'UTF-8, dans notre cas). Voici donc la commande compl\xe8te \xe0 taper pour cr\xe9er votre base :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE DATABASE bachelor3 CHARACTER SET 'utf8';\n")),(0,r.kt)("p",null,"Lorsque nous cr\xe9erons nos tables dans la base de donn\xe9es, automatiquement, elles seront encod\xe9es \xe9galement en UTF-8."),(0,r.kt)("h3",{id:"suppression"},"Suppression"),(0,r.kt)("p",null,"Soyez tr\xe8s prudent, car vous effacez tous les fichiers cr\xe9\xe9s par MySQL qui servent \xe0 stocker les informations de votre base."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DROP DATABASE bachelor3;\n")),(0,r.kt)("p",null,"Si vous essayez cette commande alors que la base de donn\xe9es bachelor3 n'existe pas, MySQL vous affichera une erreur :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> DROP DATABASE bachelor3;\nERROR 1008 (HY000) : Can't drop database 'bachelor3'; database doesn't exist \n")),(0,r.kt)("p",null,"Pour \xe9viter ce message d'erreur, si vous n'\xeates pas s\xfbr que la base de donn\xe9es existe, vous pouvez utiliser l'option IF EXISTS, de la mani\xe8re suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DROP DATABASE IF EXISTS bachelor3;\n")),(0,r.kt)("p",null,"Si la base de donn\xe9es existe, vous devriez alors avoir un message du type :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Query OK, 0 rows affected (0.00 sec)\n")),(0,r.kt)("p",null,"Si elle n'existe pas, vous aurez :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Query OK, 0 rows affected, 1 warning (0.00 sec)\n")),(0,r.kt)("h3",{id:"utilisation-dune-base-de-donn\xe9es"},"Utilisation d'une base de donn\xe9es"),(0,r.kt)("p",null,"Mais pour pouvoir agir sur cette base, vous devez d'abord la s\xe9lectionner. Une fois de plus, la commande est tr\xe8s simple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"USE bachelor3\n")),(0,r.kt)("p",null,"Notez que vous pouvez sp\xe9cifier la base de donn\xe9es sur laquelle vous allez travailler lors de la connexion \xe0 MySQL. Il suffit d'ajouter le nom de la base \xe0 la fin de la commande de connexion :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql -u sdz -p bachelor3\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"cr\xe9ez-des-tables"},"Cr\xe9ez des tables"),(0,r.kt)("h3",{id:"d\xe9finition-des-colonnes"},"D\xe9finition des colonnes"),(0,r.kt)("h4",{id:"type-de-colonne"},"Type de colonne"),(0,r.kt)("p",null,"Avant de choisir le type des colonnes, il faut choisir les colonnes que l'on va d\xe9finir. On va donc cr\xe9er une table ",(0,r.kt)("em",{parentName:"p"},"Eleves"),". Qu'est-ce qui caract\xe9rise un \xe9leve ? Son nom, son sexe, sa date de naissance et une \xe9ventuelle colonne commentaires qui peut servir de fourre-tout. "),(0,r.kt)("p",null,"Examinons donc les colonnes afin d'en choisir le type au mieux :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Nom")," : ce sera un champ de type alphanum\xe9rique. On choisira donc un ",(0,r.kt)("inlineCode",{parentName:"li"},"VARCHAR(30)"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Sexe")," : ici, deux choix possibles (homme ou femme).  Nous utiliserons une colonne ",(0,r.kt)("inlineCode",{parentName:"li"},"CHAR(1)"),", contenant soit ",(0,r.kt)("inlineCode",{parentName:"li"},"'H'")," (homme), soit ",(0,r.kt)("inlineCode",{parentName:"li"},"'F'")," (femme)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Date de naissance")," : il s'agit d'une date, donc soit un ",(0,r.kt)("inlineCode",{parentName:"li"},"DATETIME"),", soit une ",(0,r.kt)("inlineCode",{parentName:"li"},"DATE"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Commentaires")," : un type ",(0,r.kt)("inlineCode",{parentName:"li"},"alphanum\xe9rique"),", mais on n'a ici aucune id\xe9e de la longueur. Ce sera donc un champ ",(0,r.kt)("inlineCode",{parentName:"li"},"TEXT"),".")),(0,r.kt)("h4",{id:"null-or-not-null-"},"NULL or NOT NULL ?"),(0,r.kt)("p",null,"Il faut maintenant d\xe9terminer si l'on autorise les colonnes \xe0 ne pas stocker de valeur :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Nom")," : Cette colonne ne peut pas \xeatre ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"NULL"))," car un nom est propre \xe0 chaques \xe9l\xe8ves."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Sexe")," : Cette colonne peut \xeatre ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"NULL"))," si l'\xe9l\xe8ve ne souhaite pas se prononcer sur son sexe."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Date de naissance")," : Cette colonne ne peut pas \xeatre ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"NULL")),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Commentaires")," : Cette colonne peut tr\xe8s bien ne rien contenir.")),(0,r.kt)("h4",{id:"en-r\xe9sum\xe9"},"En r\xe9sum\xe9"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Caract\xe9ristique"),(0,r.kt)("th",{parentName:"tr",align:null},"Nom de la colonne"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"NULL"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Nom"),(0,r.kt)("td",{parentName:"tr",align:null},"nom"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"VARCHAR(40)")),(0,r.kt)("td",{parentName:"tr",align:null},"NON")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Sexe"),(0,r.kt)("td",{parentName:"tr",align:null},"sexe"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"CHAR(1)")),(0,r.kt)("td",{parentName:"tr",align:null},"OUI")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Date de naissance"),(0,r.kt)("td",{parentName:"tr",align:null},"date_naissance"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"DATETIME")),(0,r.kt)("td",{parentName:"tr",align:null},"NON")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Commentaire"),(0,r.kt)("td",{parentName:"tr",align:null},"commentaire"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"VARCHAR(30)")),(0,r.kt)("td",{parentName:"tr",align:null},"OUI")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Ne pas oublier de donner une taille aux colonnes qui en n\xe9cessitent une, comme les ",(0,r.kt)("inlineCode",{parentName:"p"},"VARCHAR(x)"),", les ",(0,r.kt)("inlineCode",{parentName:"p"},"CHAR(x)"),", les ",(0,r.kt)("inlineCode",{parentName:"p"},"DECIMAL(n, d)")," ...")),(0,r.kt)("h3",{id:"introduction-aux-cl\xe9s-primaires"},"Introduction aux cl\xe9s primaires"),(0,r.kt)("h4",{id:"identit\xe9"},"Identit\xe9"),(0,r.kt)("p",null,"On va donner \xe0 chaque \xe9l\xe8ve un num\xe9ro d'identit\xe9. La colonne que l'on ajoutera s\u2019appellera donc id, et il s'agira d'un ",(0,r.kt)("inlineCode",{parentName:"p"},"INT"),", toujours positif donc ",(0,r.kt)("inlineCode",{parentName:"p"},"UNSIGNED"),". Comme il est peu probable que l'on d\xe9passe les 65000 \xe9l\xe8ves, on utilisera ",(0,r.kt)("inlineCode",{parentName:"p"},"SMALLINT"),"."),(0,r.kt)("p",null,"Ce champ ne pourra bien s\xfbr pas \xeatre ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),", sinon il perdrait toute son utilit\xe9."),(0,r.kt)("h4",{id:"cl\xe9-primaire"},"Cl\xe9 primaire"),(0,r.kt)("p",null,"La cl\xe9 primaire d'une table est une ",(0,r.kt)("strong",{parentName:"p"},"contrainte d'unicit\xe9"),", compos\xe9e d'une ou plusieurs colonnes. La cl\xe9 primaire d'une ligne ",(0,r.kt)("strong",{parentName:"p"},"permet d'identifier de mani\xe8re unique cette ligne dans la table"),". Si l'on parle de la ligne dont la cl\xe9 primaire vaut x, il ne doit y avoir aucun doute quant \xe0 la ligne dont on parle. Lorsqu'une table poss\xe8de une cl\xe9 primaire (et il est extr\xeamement conseill\xe9 de d\xe9finir une cl\xe9 primaire pour chaque table cr\xe9\xe9e), celle-ci ",(0,r.kt)("strong",{parentName:"p"},"doit")," \xeatre d\xe9finie.\nCette d\xe9finition correspond exactement au num\xe9ro d'identit\xe9 dont nous venons de parler. Nous d\xe9finirons donc id comme la cl\xe9 primaire de la table El\xe8ves, en utilisant les mots-cl\xe9s ",(0,r.kt)("inlineCode",{parentName:"p"},"PRIMARY KEY(id)"),".\nLorsque vous ins\xe9rerez une nouvelle ligne dans la table, MySQL v\xe9rifiera que vous ins\xe9rez bien un id, et que cet id n'existe pas encore dans la table. Si vous ne respectez pas ces deux contraintes, MySQL n\u2019ins\xe9rera pas la ligne et vous renverra une erreur."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ERROR 1062 (23000): Duplicate entry '1' for key 'PRIMARY'\n")),(0,r.kt)("h4",{id:"auto-incr\xe9mentation"},"Auto-incr\xe9mentation"),(0,r.kt)("p",null,"Il faut donc, pour chaque \xe9l\xe8ve, d\xe9cider d'une valeur pour ",(0,r.kt)("inlineCode",{parentName:"p"},"id"),". Donc, si l'on d\xe9clare qu'une colonne doit s'auto-incr\xe9menter (gr\xe2ce au mot-cl\xe9 ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"AUTO_INCREMENT")),"), plus besoin de chercher quelle valeur on va y mettre lors de la prochaine insertion."),(0,r.kt)("h3",{id:"syntaxe-de-create-table"},"Syntaxe de CREATE TABLE"),(0,r.kt)("p",null,"Par souci de clart\xe9, l'explication de la syntaxe de ",(0,r.kt)("inlineCode",{parentName:"p"},"CREATE TABLE")," sera divis\xe9 en deux. La premi\xe8re partie vous donne la syntaxe globale de la commande, et la deuxi\xe8me partie s'attarde sur la description des colonnes cr\xe9\xe9es dans la table."),(0,r.kt)("h4",{id:"cr\xe9ation-de-la-table"},"Cr\xe9ation de la table"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE [IF NOT EXISTS] Nom_table (\n    colonne1 description_colonne1,\n    colonne2 description_colonne2,\n    colonne3 description_colonne3,\n    ...,\n    [PRIMARY KEY (colonne_cl\xe9_primaire)]\n)\nENGINE=INNODB;\n")),(0,r.kt)("p",null,"Le ",(0,r.kt)("inlineCode",{parentName:"p"},"IF NOT EXISTS")," est facultatif (d'o\xf9 l'utilisation de crochets ","[ ]","), et a le m\xeame r\xf4le que dans la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"CREATE DATABASE")," : si une table de ce nom existe d\xe9j\xe0 dans la base de donn\xe9es, la requ\xeate renverra un warning plut\xf4t qu'une erreur si ",(0,r.kt)("inlineCode",{parentName:"p"},"IF NOT EXISTS"),"  est sp\xe9cifi\xe9."),(0,r.kt)("h4",{id:"d\xe9finition-des-colonnes-1"},"D\xe9finition des colonnes"),(0,r.kt)("p",null,"Pour d\xe9finir une colonne, il faut donner son nom en premier, puis sa description. La description est constitu\xe9e au minimum du type de la colonne. Exemple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"nom VARCHAR(30),\nsexe CHAR(1)\n")),(0,r.kt)("p",null,"C'est aussi dans la description que l'on pr\xe9cise si la colonne peut contenir ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),"  ou pas (par d\xe9faut, ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),"  est autoris\xe9). Exemple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"nom VARCHAR(30) NOT NULL,\ndate_naissance DATETIME NOT NULL\n")),(0,r.kt)("p",null,"L'auto-incr\xe9mentation se d\xe9finit \xe9galement \xe0 cet endroit."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT [PRIMARY KEY]\n")),(0,r.kt)("p",null,"Enfin, on peut donner une valeur par d\xe9faut au champ. Si lorsque l'on ins\xe8re une ligne, aucune valeur n'est pr\xe9cis\xe9e pour le champ, c'est la valeur par d\xe9faut qui sera utilis\xe9e."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"nom VARCHAR(30) NOT NULL DEFAULT 'Hamilton'\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Une valeur par d\xe9faut DOIT \xeatre une constante. Ce ne peut pas \xeatre une fonction.")),(0,r.kt)("h4",{id:"application--cr\xe9ation-de-eleves"},"Application : cr\xe9ation de ",(0,r.kt)("em",{parentName:"h4"},"Eleves")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE Eleves (\n    id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,\n    nom VARCHAR(30) NOT NULL,\n    sexe CHAR(1),\n    date_naissance DATETIME NOT NULL,\n    commentaires TEXT,\n    PRIMARY KEY (id)\n)\nENGINE=INNODB;\n")),(0,r.kt)("h4",{id:"v\xe9rifications"},"V\xe9rifications"),(0,r.kt)("p",null,"Voici deux commandes vous permettant de v\xe9rifier que vous avez bien cr\xe9\xe9 une table ",(0,r.kt)("em",{parentName:"p"},"Eleves")," avec les cinq colonnes que vous vouliez."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SHOW TABLES;      -- liste les tables de la base de donn\xe9es\n\nDESCRIBE Eleves;  -- liste les colonnes de la table avec leurs caract\xe9ristiques\n")),(0,r.kt)("h3",{id:"suppression-dune-table"},"Suppression d'une table"),(0,r.kt)("p",null,"La commande pour supprimer une table est la m\xeame que celle pour supprimer une base de donn\xe9es."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DROP TABLE Eleves;\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"modifiez-une-table"},"Modifiez une table"),(0,r.kt)("h3",{id:"syntaxe-de-la-requ\xeate"},"Syntaxe de la requ\xeate"),(0,r.kt)("p",null,"Lorsque l'on modifie une table, on peut vouloir lui ajouter, retirer ou modifier quelque chose. Dans les trois cas, c'est la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"ALTER TABLE"),"  qui sera utilis\xe9e, une variante existant pour chacune des op\xe9rations :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE nom_table ADD ... -- permet d'ajouter quelque chose (une colonne par exemple)\n\nALTER TABLE nom_table DROP ... -- permet de retirer quelque chose \n\nALTER TABLE nom_table CHANGE ...\nALTER TABLE nom_table MODIFY ... -- permettent de modifier une colonne\n")),(0,r.kt)("h4",{id:"avant-de-continuer"},"Avant de continuer"),(0,r.kt)("p",null,"Dans la seconde partie de ce chapitre, nous allons faire quelques modifications sur notre table ",(0,r.kt)("em",{parentName:"p"},"Eleves"),", mais en attendant, nous allons utiliser la table suivante afin de tester les diff\xe9rentes possibilit\xe9s d'",(0,r.kt)("inlineCode",{parentName:"p"},"ALTER TABLE"),"  :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE Test (\n    id INT NOT NULL,\n    nom VARCHAR(10) NOT NULL,\n        PRIMARY KEY(id)\n);\n")),(0,r.kt)("h3",{id:"ajout-et-suppression-dune-colonne"},"Ajout et suppression d'une colonne"),(0,r.kt)("h4",{id:"ajout"},"Ajout"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> ALTER TABLE nom_table \n    -> ADD [COLUMN] nom_colonne description_colonne;\n")),(0,r.kt)("p",null,"Le ",(0,r.kt)("inlineCode",{parentName:"p"},"[COLUMN]")," est facultatif, donc, si \xe0 la suite de ",(0,r.kt)("inlineCode",{parentName:"p"},"ADD")," , vous ne pr\xe9cisez pas ce que vous voulez ajouter, MySQL consid\xe9rera qu'il s'agit d'une colonne.\n",(0,r.kt)("inlineCode",{parentName:"p"},"description_colonne")," correspond \xe0 la m\xeame chose que lorsque l'on cr\xe9e une table."),(0,r.kt)("p",null,"Ajoutons une colonne ",(0,r.kt)("em",{parentName:"p"},"date_insertion")," \xe0 notre table de test. Il s'agit d'une date, donc une colonne de type ",(0,r.kt)("inlineCode",{parentName:"p"},"Date")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> ALTER TABLE Test\n    -> ADD COLUMN date_insertion DATE NOT NULL;\n")),(0,r.kt)("p",null,"La commande ",(0,r.kt)("inlineCode",{parentName:"p"},"DESCRIBE Test;"),"  vous permettra de v\xe9rifier les changements apport\xe9s."),(0,r.kt)("h4",{id:"suppression-1"},"Suppression"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> ALTER TABLE nom_table \n    -> DROP [COLUMN] nom_colonne;\n")),(0,r.kt)("p",null,"Comme pour les ajouts, le mot ",(0,r.kt)("inlineCode",{parentName:"p"},"COLUMN")," est facultatif. Par d\xe9faut, MySQL consid\xe9rera que vous parlez d'une colonne."),(0,r.kt)("p",null,"Si l'on reprend notre pr\xe9c\xe9dent exemple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> ALTER TABLE Test \n    -> DROP COLUMN date_insertion; -- Suppression de la colonne date_insertion\n")),(0,r.kt)("h3",{id:"modification-de-colonne"},"Modification de colonne"),(0,r.kt)("h4",{id:"changement-du-nom-de-la-colonne"},"Changement du nom de la colonne"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> ALTER TABLE nom_table\n    -> CHANGE ancien_nom nouveau_nom description_colonne;\n")),(0,r.kt)("p",null,"Si l'on reprend notre pr\xe9c\xe9dent exemple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> ALTER TABLE Test\n    -> CHANGE nom prenom VARCHAR(10) NOT NULL;\n")),(0,r.kt)("p",null,"Attention, la description de la colonne doit \xeatre compl\xe8te, sinon elle sera \xe9galement modifi\xe9e. Si vous ne pr\xe9cisez pas ",(0,r.kt)("inlineCode",{parentName:"p"},"NOT NULL"),"  dans la commande pr\xe9c\xe9dente, ",(0,r.kt)("em",{parentName:"p"},"prenom")," pourra contenir ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),", alors que, du temps o\xf9 elle s'appelait ",(0,r.kt)("em",{parentName:"p"},"nom"),", cela lui \xe9tait interdit."),(0,r.kt)("h4",{id:"changement-du-type-de-donn\xe9es"},"Changement du type de donn\xe9es"),(0,r.kt)("p",null,"Les mots-cl\xe9s ",(0,r.kt)("inlineCode",{parentName:"p"},"CHANGE")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"MODIFY")," peuvent \xeatre utilis\xe9s pour changer le type de donn\xe9e de la colonne, mais aussi changer la valeur par d\xe9faut ou ajouter/supprimer une propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"AUTO_INCREMENT"),". Si vous utilisez ",(0,r.kt)("inlineCode",{parentName:"p"},"CHANGE"),", vous pouvez renommer la colonne en m\xeame temps. Si vous ne d\xe9sirez pas la renommer, il suffit d'indiquer deux fois le m\xeame nom."),(0,r.kt)("p",null,"Voici les syntaxes possibles :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE nom_table \nCHANGE ancien_nom nouveau_nom nouvelle_description;\n\nALTER TABLE nom_table \nMODIFY nom_colonne nouvelle_description;\n")),(0,r.kt)("p",null,"Des exemples pour illustrer :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE Test\nCHANGE prenom nom VARCHAR(30) NOT NULL; -- Changement du type + changement du nom\n\nALTER TABLE Test\nCHANGE id id BIGINT NOT NULL; -- Changement du type sans renommer\n\nALTER TABLE Test\nMODIFY id BIGINT NOT NULL AUTO_INCREMENT; -- Ajout de l'auto-incr\xe9mentation\n\nALTER TABLE Test\nMODIFY nom VARCHAR(30) NOT NULL DEFAULT 'Blabla'; -- Changement de la description (m\xeame type mais ajout d'une valeur par d\xe9faut)\n")),(0,r.kt)("p",null,"Il existe d'autres possibilit\xe9s et combinaisons pour la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"ALTER TABLE")," que vous trouverez dans la ",(0,r.kt)("a",{parentName:"p",href:"https://dev.mysql.com/doc/refman/5.5/en/alter-table.html"},"documentation officielle"),"."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"ins\xe9rez-des-donn\xe9es"},"Ins\xe9rez des donn\xe9es"),(0,r.kt)("h3",{id:"syntaxe-de-insert"},"Syntaxe de INSERT"),(0,r.kt)("p",null,"Deux possibilit\xe9s s'offrent \xe0 nous lorsque l'on veut ins\xe9rer une ligne dans une table : soit donner une valeur pour chaque colonne de la ligne, soit ne donner les valeurs que de certaines colonnes, auquel cas il faut bien s\xfbr pr\xe9ciser de quelles colonnes il s'agit."),(0,r.kt)("h4",{id:"insertion-sans-pr\xe9ciser-les-colonnes"},"Insertion sans pr\xe9ciser les colonnes"),(0,r.kt)("p",null,"Notre table ",(0,r.kt)("em",{parentName:"p"},"Eleves")," est compos\xe9e de six colonnes : ",(0,r.kt)("em",{parentName:"p"},"id"),", ",(0,r.kt)("em",{parentName:"p"},"nom"),", ",(0,r.kt)("em",{parentName:"p"},"sexe"),", ",(0,r.kt)("em",{parentName:"p"},"date_naissance")," et ",(0,r.kt)("em",{parentName:"p"},"commentaires"),"."),(0,r.kt)("p",null,"Voici donc la syntaxe \xe0 utiliser pour ins\xe9rer une ligne dans ",(0,r.kt)("em",{parentName:"p"},"Eleves"),", sans renseigner les colonnes pour lesquelles on donne une valeur (implicitement, MySQL consid\xe8re que l'on donne une valeur pour chaque colonne de la table)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO Eleves\nVALUES (1, 'Hamilton', 'H', '2010-04-05 13:43:00', 'El\xe8ve impliqu\xe9');\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Deuxi\xe8me exemple")," : cette fois-ci, on ne conna\xeet pas le sexe et on n'a aucun commentaire \xe0 faire sur l'\xe9l\xe8ve."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO Eleves \nVALUES (2, 'Verstappen', NULL, '2010-03-24 02:23:00', NULL);\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Troisi\xe8me et dernier exemple")," : on donne ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL")," comme valeur d'",(0,r.kt)("em",{parentName:"p"},"id"),", ce qui en principe est impossible puisque ",(0,r.kt)("em",{parentName:"p"},"id")," est d\xe9fini comme ",(0,r.kt)("inlineCode",{parentName:"p"},"NOT NULL")," et comme cl\xe9 primaire. Cependant, l'auto-incr\xe9mentation fait que MySQL va calculer tout seul quel ",(0,r.kt)("em",{parentName:"p"},"id")," il faut donner \xe0 la ligne (ici : 3)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO Eleves \nVALUES (NULL , 'Calder\xf3n', 'F', '2010-09-13 15:02:00', NULL);\n")),(0,r.kt)("p",null,"Vous avez maintenant trois \xe9l\xe8ves dans votre table :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Id"),(0,r.kt)("th",{parentName:"tr",align:null},"Nom"),(0,r.kt)("th",{parentName:"tr",align:null},"Sexe"),(0,r.kt)("th",{parentName:"tr",align:null},"Date de naissance"),(0,r.kt)("th",{parentName:"tr",align:null},"Commentaires"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"Hamilton"),(0,r.kt)("td",{parentName:"tr",align:null},"H"),(0,r.kt)("td",{parentName:"tr",align:null},"2010-04-05 13:43:00"),(0,r.kt)("td",{parentName:"tr",align:null},"El\xe8ve impliqu\xe9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"Verstappen"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL"),(0,r.kt)("td",{parentName:"tr",align:null},"2010-03-24 02:23:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"Calder\xf3n"),(0,r.kt)("td",{parentName:"tr",align:null},"F"),(0,r.kt)("td",{parentName:"tr",align:null},"2010-09-13 15:02:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")))),(0,r.kt)("p",null,"Pour v\xe9rifier, vous pouvez utiliser la requ\xeate suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM Eleves;\n")),(0,r.kt)("h4",{id:"insertion-en-pr\xe9cisant-les-colonnes"},"Insertion en pr\xe9cisant les colonnes"),(0,r.kt)("p",null,"Dans la requ\xeate, nous allons donc \xe9crire explicitement \xe0 quelle(s) colonne(s) nous donnons une valeur. Ceci va permettre deux choses :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"On ne doit plus donner les valeurs dans l'ordre de cr\xe9ation des colonnes, mais dans l'ordre pr\xe9cis\xe9 par la requ\xeate."),(0,r.kt)("li",{parentName:"ul"},"On n'est plus oblig\xe9 de donner une valeur \xe0 chaque colonne ; plus besoin de NULL  lorsque l'on n'a pas de valeur \xe0 mettre.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO Eleves (nom, sexe, date_naissance) \n    VALUES ('Senna', 'H', '2010-04-05 13:43:00');\nINSERT INTO Eleves (nom, commentaires, date_naissance) \n    VALUES ('Schumacher', 'El\xe8ve turbulent', '2010-03-24 02:23:00');\nINSERT INTO Eleves (date_naissance, commentaires, nom, sexe) \n    VALUES ('2010-09-13 15:02:00', 'Peut mieux faire', 'Floersch', 'F');\n")),(0,r.kt)("h4",{id:"insertion-multiple"},"Insertion multiple"),(0,r.kt)("p",null,"Si vous avez plusieurs lignes \xe0 introduire, il est possible de le faire en une seule requ\xeate de la mani\xe8re suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO Eleves (nom, sexe, date_naissance, commentaire) \nVALUES ('Vettel', NULL, '2008-12-06 05:18:00', 'El\xe8ve tr\xe8s respectueux'),\n        ('Prost', 'M', '2008-09-11 15:38:00', NULL),\n        ('Visser', 'F', '2010-08-23 05:18:00', NULL);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Vous \xeates oblig\xe9 de pr\xe9ciser les m\xeames colonnes pour chaque entr\xe9e, quitte \xe0 mettre ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL")," pour certaines.")),(0,r.kt)("h3",{id:"syntaxe-alternative-de-mysql"},"Syntaxe alternative de MySQL"),(0,r.kt)("p",null,"MySQL propose une syntaxe alternative \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"INSERT INTO ... VALUES ...")," pour ins\xe9rer des donn\xe9es dans une table."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO Eleves \nSET nom='Alonso', sexe='M', date_naissance='2010-07-21 15:41:00';\n")),(0,r.kt)("p",null,"Cette syntaxe pr\xe9sente deux avantages :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Le fait d'avoir l'un \xe0 c\xf4t\xe9 de l'autre la colonne et la valeur qu'on lui attribue (",(0,r.kt)("inlineCode",{parentName:"li"},"nom = 'Alonso'"),") rend la syntaxe plus lisible et plus facile \xe0 manipuler. En effet, ici, il n'y a que cinq colonnes, mais imaginez une table avec 20, voire 100 colonnes. Difficile d'\xeatre s\xfbr que l'ordre dans lequel on a d\xe9clar\xe9 les colonnes est bien le m\xeame que l'ordre des valeurs qu'on leur donne..."),(0,r.kt)("li",{parentName:"ul"},"Elle est tr\xe8s semblable \xe0 la syntaxe de ",(0,r.kt)("inlineCode",{parentName:"li"},"UPDATE"),", que nous verrons plus tard et qui permet de modifier des donn\xe9es existantes. C'est donc moins de choses \xe0 retenir.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Cependant, cette syntaxe alternative pr\xe9sente \xe9galement des d\xe9fauts qui sont plus importants que les avantages apport\xe9s. C'est pourquoi il est d\xe9conseill\xe9 de l'utiliser.")),(0,r.kt)("p",null,"En effet, cette syntaxe pr\xe9sente deux d\xe9fauts majeurs."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Elle est propre \xe0 MySQL. Ce n'est pas du SQL pur. De ce fait, si vous d\xe9cidez un jour de migrer votre base vers un autre SGBDR, vous devrez r\xe9\xe9crire toutes les requ\xeates ",(0,r.kt)("inlineCode",{parentName:"li"},"INSERT")," utilisant cette syntaxe."),(0,r.kt)("li",{parentName:"ul"},"Elle ne permet pas l'insertion multiple.")),(0,r.kt)("h3",{id:"utilisation-de-fichiers-externes"},"Utilisation de fichiers externes"),(0,r.kt)("p",null,"Pour \xe9viter d'\xe9crire vous-m\xeame toutes les requ\xeates d'insertion, nous allons voir comment on peut utiliser un fichier texte pour interagir avec notre base de donn\xe9es."),(0,r.kt)("h4",{id:"ex\xe9cuter-des-commandes-sql-\xe0-partir-dun-fichier"},"Ex\xe9cuter des commandes SQL \xe0 partir d'un fichier"),(0,r.kt)("p",null,"Une solution pour \xe9viter d'\xe9crire toutes les commandes \xe0 la main dans la console est d'\xe9crire les requ\xeates dans un fichier texte, puis de dire \xe0 MySQL d'ex\xe9cuter les requ\xeates contenues dans ce fichier :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SOURCE monFichier.sql;\n\n# ou\n\n\\. monFichier.sql;\n")),(0,r.kt)("p",null,"Ces deux commandes sont \xe9quivalentes et vont ex\xe9cuter le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"monFichier.sql"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Attention")," : si vous ne lui indiquez pas le chemin, MySQL va aller chercher votre fichier dans le dossier o\xf9 vous \xe9tiez lors de votre connexion")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},'SOURCE Users\\michel\\ynov\\monFichier.sql;\n\nSOURCE C:/"Document and Settings"/ynov/monFichier.sql; --Si vous utilisez Windows, utilisez "/" au lieu de "\\" \n')),(0,r.kt)("h4",{id:"ins\xe9rer-des-donn\xe9es-\xe0-partir-dun-fichier-format\xe9"},"Ins\xe9rer des donn\xe9es \xe0 partir d'un fichier format\xe9"),(0,r.kt)("p",null,"Par fichier format\xe9, on entend un fichier qui suit certaines r\xe8gles de format. Un exemple typique serait les fichiers .csv. Ces fichiers contiennent un certain nombre de donn\xe9es et sont organis\xe9s en tables. Chaque ligne correspond \xe0 une entr\xe9e, et les colonnes de la table sont s\xe9par\xe9es par un caract\xe8re d\xe9fini (souvent une virgule ou un point-virgule). Ceci, par exemple, est un format csv :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"nom;prenom;date_naissance\nCharles;Myeur;1994-12-30\nBruno;Debor;1978-05-12\nMireille;Franelli;1990-08-23\n")),(0,r.kt)("p",null,"Ce type de fichier est facile \xe0 produire et \xe0 lire avec un logiciel de type tableur (Microsoft Excel, ExcelViewer, Numbers...). La bonne nouvelle est qu'il est aussi possible de lire ce type de fichier avec MySQL, afin de remplir une table avec les donn\xe9es contenues dans le fichier."),(0,r.kt)("p",null,"La commande SQL permettant cela est ",(0,r.kt)("inlineCode",{parentName:"p"},"LOAD DATA INFILE")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"LOAD DATA [LOCAL] INFILE 'nom_fichier'\nINTO TABLE nom_table\n[FIELDS\n    [TERMINATED BY '\\t']\n    [ENCLOSED BY '']\n    [ESCAPED BY '\\\\' ]\n]\n[LINES \n    [STARTING BY '']    \n    [TERMINATED BY '\\n']\n]\n[IGNORE nombre LINES]\n[(nom_colonne,...)];\n")),(0,r.kt)("p",null,"Le mot-cl\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"LOCAL")," sert \xe0 sp\xe9cifier si le fichier se trouve c\xf4t\xe9 client ou c\xf4t\xe9 serveur (auquel cas, on ne met pas ",(0,r.kt)("inlineCode",{parentName:"p"},"LOCAL")," dans la commande). Si le fichier se trouve du c\xf4t\xe9 du serveur, il est obligatoire, pour des raisons de s\xe9curit\xe9, qu'il soit dans le r\xe9pertoire de la base de donn\xe9es, c'est-\xe0-dire dans le r\xe9pertoire cr\xe9\xe9 par MySQL \xe0 la cr\xe9ation de la base de donn\xe9es, qui contient les fichiers dans lesquels sont stock\xe9es les donn\xe9es de la base."),(0,r.kt)("p",null,"Les clauses ",(0,r.kt)("inlineCode",{parentName:"p"},"FIELDS")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"LINES")," permettent de d\xe9finir le format de fichier utilis\xe9. ",(0,r.kt)("inlineCode",{parentName:"p"},"FIELDS")," se rapporte aux colonnes, et ",(0,r.kt)("inlineCode",{parentName:"p"},"LINES")," aux lignes. Ces deux clauses sont facultatives."),(0,r.kt)("p",null,"Si vous pr\xe9cisez une clause ",(0,r.kt)("inlineCode",{parentName:"p"},"FIELDS"),', il faut lui donner au moins une des trois "sous-clauses".'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TERMINATED BY"),", qui d\xe9finit le caract\xe8re s\xe9parant les colonnes, entre guillemets bien s\xfbr. ",(0,r.kt)("inlineCode",{parentName:"li"},"'\\t'"),"  correspond \xe0 une tabulation. C'est le caract\xe8re par d\xe9faut."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ENCLOSED BY"),", qui d\xe9finit le caract\xe8re entourant les valeurs dans chaque colonne (vide par d\xe9faut)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ESCAPED BY"),", qui d\xe9finit le caract\xe8re d'\xe9chappement pour les caract\xe8res sp\xe9ciaux. Si par exemple vous d\xe9finissez vos valeurs comme entour\xe9es d'apostrophes, mais que certaines valeurs contiennent des apostrophes, il faut \xe9chapper ces apostrophes \"internes\" afin qu'elles ne soient pas consid\xe9r\xe9es comme un d\xe9but ou une fin de valeur. Par d\xe9faut, il s'agit du ",(0,r.kt)("inlineCode",{parentName:"li"},"\\")," habituel. Remarquez qu'il faut lui-m\xeame l'\xe9chapper dans la clause.")),(0,r.kt)("p",null,"De m\xeame pour ",(0,r.kt)("inlineCode",{parentName:"p"},"LINES"),", si vous l'utilisez, il faut lui donner une ou deux sous-clauses."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"STARTING BY"),", qui d\xe9finit le caract\xe8re de d\xe9but de ligne (vide par d\xe9faut)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TERMINATED BY"),", qui d\xe9finit le caract\xe8re de fin de ligne (",(0,r.kt)("inlineCode",{parentName:"li"},"'\\n'")," par d\xe9faut, mais attention, les fichiers g\xe9n\xe9r\xe9s sous Windows ont souvent ",(0,r.kt)("inlineCode",{parentName:"li"},"'\\r\\n'")," comme caract\xe8re de fin de ligne).")),(0,r.kt)("p",null,"La clause",(0,r.kt)("inlineCode",{parentName:"p"}," IGNORE nombre LINES")," permet d'ignorer un certain nombre de lignes. Par exemple, si la premi\xe8re ligne de votre fichier contient les noms des colonnes, vous ne voulez pas l'ins\xe9rer dans votre table. Il suffit alors d'utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"IGNORE 1 LINES"),"."),(0,r.kt)("p",null,"Enfin, vous pouvez pr\xe9ciser le nom des colonnes pr\xe9sentes dans votre fichier. Attention, \xe9videmment, \xe0 ce que les colonnes absentes acceptent ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL")," ou soient auto-incr\xe9ment\xe9es."),(0,r.kt)("p",null,"On reprend l'example pr\xe9c\xe9dent, en imaginant que nous ayons une table ",(0,r.kt)("em",{parentName:"p"},"Personne")," contenant les colonnes ",(0,r.kt)("em",{parentName:"p"},"id")," (cl\xe9 primaire auto-incr\xe9ment\xe9e), ",(0,r.kt)("em",{parentName:"p"},"nom"),", ",(0,r.kt)("em",{parentName:"p"},"prenom"),", ",(0,r.kt)("em",{parentName:"p"},"date_naissance")," et ",(0,r.kt)("em",{parentName:"p"},"adresse")," (qui peut \xeatre ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),")."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"nom;prenom;date_naissance\nCharles;Myeur;1994-12-30\nBruno;Debor;1978-05-12\nMireille;Franelli;1990-08-23\n")),(0,r.kt)("p",null,"Si ce fichier est enregistr\xe9 sous le nom personne.csv, il vous suffit d'ex\xe9cuter la commande suivante pour enregistrer ces trois lignes dans la table ",(0,r.kt)("em",{parentName:"p"},"Personne"),", en sp\xe9cifiant si n\xe9cessaire le chemin complet vers personne.csv :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"LOAD DATA LOCAL INFILE 'personne.csv'\nINTO TABLE Personne\nFIELDS TERMINATED BY ';'\nLINES TERMINATED BY '\\n' -- ou '\\r\\n' selon l'ordinateur et le programme utilis\xe9s pour cr\xe9er le fichier\nIGNORE 1 LINES\n(nom,prenom,date_naissance);\n")),(0,r.kt)("h3",{id:"remplissage-de-la-base"},"Remplissage de la base"),(0,r.kt)("p",null,"Nous allons utiliser les deux techniques pr\xe9sent\xe9s pour remplir un peu notre base."),(0,r.kt)("h4",{id:"ex\xe9cution-de-commandes-sql"},"Ex\xe9cution de commandes SQL"),(0,r.kt)("p",null,"Voici pour l'example le contenu d'un fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"remplissageEleve.sql")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO Eleves (nom, sexe, date_naissance, commentaires) VALUES \n('Bottas', 'M', '2008-02-20 15:45:00' , NULL),\n('Villeneuve', 'M','2009-05-26 08:54:00'  , NULL),\n('Laffite', 'F','2007-04-24 12:54:00' , NULL),\n('Ogier', 'M','2009-05-26 08:56:00' , NULL),\n('Quartararo', 'M','2008-02-20 15:47:00' , 'El\xe8ve brillant !'),\n('Hubert', NULL,'2009-05-26 08:50:00' , NULL),\n('Grosjean', 'M', '2008-03-10 13:45:00', NULL),\n('Stroll', NULL,'2007-04-24 12:59:00' , NULL),\n('Lauda', 'M', '2009-05-26 09:02:00', NULL),\n('Hunt', 'M','2007-04-24 12:45:00' , NULL),\n('Norris', 'M','2008-03-10 13:43:00' , NULL),\n('Fangio', 'M','2007-04-24 12:42:00' , NULL),\n('Sainz', 'M', '2009-03-05 13:54:00', NULL),\n('Ricciardo', 'M','2007-04-12 05:23:00' , NULL),\n('Leclerc', 'M', '2006-05-14 15:50:00', NULL),\n('Gasly', 'M','2006-05-14 15:48:00' , NULL),\n('Russel', 'M', '2008-03-10 13:40:00',, NULL),\n('Perez', 'M', '2006-05-14 15:40:00', NULL),\n('Ocon', 'M','2009-05-14 06:30:00' , NULL),\n('Raikkonen', 'M','2007-03-12 12:05:00' , NULL),\n('Mazepin', 'M','2008-02-20 15:45:00' , 'N''as rien \xe0 faire ici'),\n('De Vries', 'M','2007-03-12 12:07:00' , NULL),\n('Stewart', 'M','2006-05-19 16:17:00' , NULL),\n('Pourchaire', 'M','2008-04-20 03:22:00' , NULL),\n('Kubica ', 'M','2006-05-19 16:56:00' , NULL);\n")),(0,r.kt)("p",null,"Il faut alors taper :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SOURCE remplissageEleves.sql;\n")),(0,r.kt)("h4",{id:"load-data-infile"},"LOAD DATA INFILE"),(0,r.kt)("p",null,"\xc0 nouveau, voici pour l'example le contenu d'un fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"eleve.csv")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"Quartararo";"M";"2009-05-14 06:42:00";NULL\n"Bradl";"F";"2006-05-19 16:06:00";NULL\n"Petrucci";"F";"2009-05-14 06:45:00";NULL\n"Marini";"F";"2008-04-20 03:26:00";NULL\n"Vi\xf1ales";"F";"2007-03-12 12:00:00";NULL\n"Morbidelli";"F";"2006-05-19 15:59:00";NULL\n"Bastianini";"F";"2008-04-20 03:20:00";"Ne fais pas ses devoirs"\n"Lecuona";"F";"2007-03-12 11:54:00";NULL\n"Nakagami";"F";"2006-05-19 16:16:00";NULL\n"Savadori";"F";"2007-04-01 18:17:00";NULL\n"Binder";"F";"2009-03-24 08:23:00";NULL\n"Crutchlow";"F";"2009-03-26 01:24:00";NULL\n"Mir";"F";"2006-03-15 14:56:00";NULL\n"Espargaro";"F";"2008-03-15 12:02:00";NULL\n"Rins";"F";"2009-05-25 19:57:00";NULL\n"Miller";"F";"2007-04-01 03:54:00";NULL\n"Bagnaia";"F";"2006-03-15 14:26:00";"Insomniaque"\n"Marquez";"M";"2007-04-02 01:45:00";NULL\n"Oliveira";"M";"2008-03-16 08:20:00";NULL\n"Martin";"M";"2008-03-15 18:45:00";"Surpoids"\n"Marquez";"M";"2009-05-25 18:54:00";NULL\n"Bradl";"M";"2007-03-04 19:36:00";NULL\n"Navarro";"M";"2008-02-20 02:50:00";NULL\n"Rossi";"M";"2009-03-26 08:28:00";NULL\n"Zarco";"F";"2009-03-26 07:55:00";NULL\n\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Attention, le fichier doit se terminer par un saut de ligne !"))),(0,r.kt)("p",null,"Il faut alors ex\xe9cuter la commande suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"LOAD DATA LOCAL INFILE 'eleve.csv'\nINTO TABLE Eleves\nFIELDS TERMINATED BY ';' ENCLOSED BY '\"'\nLINES TERMINATED BY '\\n' -- ou '\\r\\n' selon l'ordinateur et le programme utilis\xe9s pour cr\xe9er le fichier\n(nom, sexe, date_naissance, commentaires);\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"s\xe9lectionnez-des-donn\xe9es"},"S\xe9lectionnez des donn\xe9es"),(0,r.kt)("h3",{id:"syntaxe-de-select"},"Syntaxe de ",(0,r.kt)("inlineCode",{parentName:"h3"},"SELECT")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"SELECT")," permet d'afficher des donn\xe9es directement : des cha\xeenes de caract\xe8res, des r\xe9sultats de calculs, etc."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT 'Hello World !';\nSELECT 3+2;\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"SELECT")," permet \xe9galement de s\xe9lectionner des donn\xe9es \xe0 partir d'une table. Pour cela, il faut ajouter une clause \xe0 la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT")," : la clause ",(0,r.kt)("inlineCode",{parentName:"p"},"FROM")," qui d\xe9finit de quelle structure (dans notre cas, une table) viennent les donn\xe9es."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT colonne1, colonne2, ... \nFROM nom_table;\n")),(0,r.kt)("p",null,"Par exemple, si l'on veut s\xe9lectionner le nom, le sexe et la date de naissance pr\xe9sents dans la table ",(0,r.kt)("em",{parentName:"p"},"Eleves"),", on utilisera :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT nom, sexe, date_naissance\nFROM Eleves\n")),(0,r.kt)("h4",{id:"s\xe9lectionner-toutes-les-colonnes"},"S\xe9lectionner toutes les colonnes"),(0,r.kt)("p",null,"Si vous d\xe9sirez s\xe9lectionner toutes les colonnes, vous pouvez utiliser le caract\xe8re ",(0,r.kt)("inlineCode",{parentName:"p"},"*")," dans votre requ\xeate :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves;\n")),(0,r.kt)("p",null,"Il est cependant d\xe9conseill\xe9 d'utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT *")," trop souvent. Donner explicitement le nom des colonnes dont vous avez besoin pr\xe9sente deux avantages :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"d'une part, vous \xeates certain de ce que vous r\xe9cup\xe9rez ;"),(0,r.kt)("li",{parentName:"ul"},"d'autre part, vous r\xe9cup\xe9rez uniquement ce dont vous avez vraiment besoin, ce qui permet d'\xe9conomiser des ressources.")),(0,r.kt)("p",null,"Le d\xe9savantage est bien s\xfbr que vous avez plus \xe0 \xe9crire."),(0,r.kt)("h3",{id:"la-clause-where"},"La clause WHERE"),(0,r.kt)("p",null,"La clause ",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),' ("o\xf9" en anglais) permet de restreindre les r\xe9sultats selon des crit\xe8res de recherche :'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE sexe='F';\n")),(0,r.kt)("h4",{id:"les-op\xe9rateurs-de-comparaison"},"Les op\xe9rateurs de comparaison"),(0,r.kt)("p",null,"Les op\xe9rateurs de comparaison sont les symboles que l'on utilise pour d\xe9finir les crit\xe8res de recherche (le ",(0,r.kt)("inlineCode",{parentName:"p"},"=")," dans notre exemple pr\xe9c\xe9dent). Huit op\xe9rateurs simples peuvent \xeatre utilis\xe9s :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Op\xe9rateur"),(0,r.kt)("th",{parentName:"tr",align:null},"Signification"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"="),(0,r.kt)("td",{parentName:"tr",align:null},"\xe9gal")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"<"),(0,r.kt)("td",{parentName:"tr",align:null},"inf\xe9rieur")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"<","="),(0,r.kt)("td",{parentName:"tr",align:null},"inf\xe9rieur ou \xe9gal")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},">"),(0,r.kt)("td",{parentName:"tr",align:null},"sup\xe9rieur")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},">","="),(0,r.kt)("td",{parentName:"tr",align:null},"sup\xe9rieur ou \xe9gal")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"<",">"," ou !="),(0,r.kt)("td",{parentName:"tr",align:null},"diff\xe9rent")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"<","=",">"),(0,r.kt)("td",{parentName:"tr",align:null},"\xe9gal (valable pour ",(0,r.kt)("inlineCode",{parentName:"td"},"NULL")," aussi)")))),(0,r.kt)("p",null,"Exemple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE date_naissance < '2008-01-01'; -- Eleves n\xe9s avant 2008\n\nSELECT * \nFROM Eleves \nWHERE nom <> 'Mazepin'; -- Tous les Eleves sauf Mazepin (d\xe9sol\xe9 ^^)\n")),(0,r.kt)("h4",{id:"combinaisons-de-crit\xe8res"},"Combinaisons de crit\xe8res"),(0,r.kt)("p",null,"Imaginons que l'on veuille ",(0,r.kt)("em",{parentName:"p"},"Leclerc")," et ",(0,r.kt)("em",{parentName:"p"},"Sainz")," en m\xeame temps. Pour cela, il suffit de combiner les crit\xe8res. Il faut donc des op\xe9rateurs logiques :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Op\xe9rateur"),(0,r.kt)("th",{parentName:"tr",align:null},"Symbole"),(0,r.kt)("th",{parentName:"tr",align:null},"Signification"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"AND")),(0,r.kt)("td",{parentName:"tr",align:null},"&&"),(0,r.kt)("td",{parentName:"tr",align:null},"ET")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"OR")),(0,r.kt)("td",{parentName:"tr",align:null},"|","|"),(0,r.kt)("td",{parentName:"tr",align:null},"OU")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"XOR")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"OU Exclusif")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"NOT")),(0,r.kt)("td",{parentName:"tr",align:null},"!"),(0,r.kt)("td",{parentName:"tr",align:null},"NON")))),(0,r.kt)("h5",{id:"and"},"AND"),(0,r.kt)("p",null,"Je veux s\xe9lectionner toutes les femmes n\xe9es en 2010. Je veux donc s\xe9lectionner les \xe9l\xe8ves qui sont \xe0 la fois des femmes ET n\xe9es en 2010. J'utilise l'op\xe9rateur AND  :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE sexe='F' \n    AND YEAR(date_naissance)='2010';\n-- OU\nSELECT * \nFROM Eleves \nWHERE sexe='F' \n    && YEAR(date_naissance)='2010';\n")),(0,r.kt)("h5",{id:"or"},"OR"),(0,r.kt)("p",null,"Je d\xe9sire donc obtenir les hommes OU les \xe9l\xe8ves n\xe9s en 2008 :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE sexe='H' \n    OR YEAR(date_naissance)='2008';\n-- OU\nSELECT * \nFROM Eleves \nWHERE sexe='H' \n    || YEAR(date_naissance)='2008';\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Il est conseill\xe9 d'utiliser plut\xf4t ",(0,r.kt)("inlineCode",{parentName:"p"},"OR"),"  que ",(0,r.kt)("inlineCode",{parentName:"p"},"||"),", car, dans la majorit\xe9 des SGBDR (et dans la norme SQL), l'op\xe9rateur ",(0,r.kt)("inlineCode",{parentName:"p"},"||"),"  sert \xe0 la concat\xe9nation, c'est-\xe0-dire \xe0 rassembler plusieurs cha\xeenes de caract\xe8res en une seule. Il vaut donc mieux prendre l'habitude d'utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"OR"),", au cas o\xf9 vous changeriez un jour de SGBDR (ou tout simplement parce que c'est une bonne habitude).")),(0,r.kt)("h5",{id:"not"},"NOT"),(0,r.kt)("p",null,"S\xe9lection de tous les \xe9l\xe8ves femme sauf n\xe9 en 2009."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE sexe='F' \n    AND NOT YEAR(date_naissance)='2009';\n-- OU\nSELECT * \nFROM Eleves \nWHERE sexe='F' \n    AND ! YEAR(date_naissance)='2009';\n")),(0,r.kt)("p",null,"Les parenth\xe8ses sont indispensables dans le cas du  ",(0,r.kt)("inlineCode",{parentName:"p"},"!")," , sinon il porte uniquement sur ",(0,r.kt)("em",{parentName:"p"},"date_naissance"),". Oublier les parenth\xe8ses revient \xe0 faire ",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE (NOT date_naissance) = 'YEAR(date_naissance)='2009''")," , ce qui n'a pas de sens."),(0,r.kt)("h5",{id:"xor"},"XOR"),(0,r.kt)("p",null,"S\xe9lection des \xe9k\xe8ves qui sont soit des hommes, soit n\xe9 en 2005 (mais pas les deux) :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE sexe='H' \n    XOR YEAR(date_naissance)='2005';\n")),(0,r.kt)("h5",{id:"s\xe9lection-complexe"},"S\xe9lection complexe"),(0,r.kt)("p",null,"Lorsque vous utilisez plusieurs crit\xe8res et que vous devez donc combiner plusieurs op\xe9rateurs logiques, il est extr\xeamement important de bien structurer la requ\xeate. En particulier, il faut placer des parenth\xe8ses au bon endroit."),(0,r.kt)("p",null,"Petit exemple simple : ",(0,r.kt)("br",null),"\nCrit\xe8res : rouge ",(0,r.kt)("inlineCode",{parentName:"p"},"AND")," vert ",(0,r.kt)("inlineCode",{parentName:"p"},"OR")," bleu"),(0,r.kt)("p",null,"Qu'accepte-t-on ?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ce qui est rouge et vert, et ce qui est bleu ?"),(0,r.kt)("li",{parentName:"ul"},"Ou ce qui est rouge, et soit vert, soit bleu ?")),(0,r.kt)("p",null,"Dans le premier cas, ","[rouge, vert]"," et ","[bleu]"," seraient accept\xe9s. Dans le deuxi\xe8me, c'est ","[rouge, vert]"," et ","[rouge, bleu]"," qui seront accept\xe9s, et non ","[bleu]","."),(0,r.kt)("p",null,"En fait, le premier cas correspond \xe0 (rouge ",(0,r.kt)("inlineCode",{parentName:"p"},"AND")," vert) ",(0,r.kt)("inlineCode",{parentName:"p"},"OR")," bleu, et le deuxi\xe8me cas \xe0 rouge ",(0,r.kt)("inlineCode",{parentName:"p"},"AND")," (vert ",(0,r.kt)("inlineCode",{parentName:"p"},"OR")," bleu)."),(0,r.kt)("p",null,"Avec des parenth\xe8ses, pas moyen de se tromper sur ce que l'on d\xe9sire s\xe9lectionner."),(0,r.kt)("h6",{id:"exemple"},"Exemple"),(0,r.kt)("p",null,"Je voudrais les \xe9l\xe8ves qui sont soit n\xe9s apr\xe8s 2009, soit des hommes ou des femmes, mais dans le cas des femmes, elles doivent \xeatre n\xe9es avant juin 2007."),(0,r.kt)("p",null,"L'astuce, c'est de penser en niveaux. Nous allons d\xe9couper la requ\xeate."),(0,r.kt)("p",null,"On cherche :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"les \xe9l\xe8ves n\xe9s apr\xe8s 2009 ;"),(0,r.kt)("li",{parentName:"ul"},"les \xe9l\xe8ves hommes et femmes (uniquement n\xe9es avant juin 2007 pour les femmes).")),(0,r.kt)("p",null,"L'op\xe9rateur logique sera ",(0,r.kt)("inlineCode",{parentName:"p"},"OR")," puisqu'il faut que les \xe9l\xe8ves r\xe9pondent \xe0 un seul des deux crit\xe8res pour \xeatre s\xe9lectionn\xe9s."),(0,r.kt)("p",null,"On continue \xe0 d\xe9couper. Le premier crit\xe8re ne peut plus \xeatre subdivis\xe9, contrairement au deuxi\xe8me. On cherche :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"les \xe9l\xe8ves n\xe9s apr\xe8s 2009 ;"),(0,r.kt)("li",{parentName:"ul"},"les \xe9l\xe8ves :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"hommes ;"),(0,r.kt)("li",{parentName:"ul"},"et femmes n\xe9es avant juin 2007.")))),(0,r.kt)("p",null,"Nous avons bien d\xe9fini les diff\xe9rents niveaux, il n'y a plus qu'\xe0 \xe9crire la requ\xeate avec les bons op\xe9rateurs logiques :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE date_naissance > '2009-12-31'\n     AND\n    ( sexe='H'\n        OR\n        ( sexe='F' AND date_naissance < '2007-06-01' )\n    );\n")),(0,r.kt)("h4",{id:"le-cas-de-null"},"Le cas de NULL"),(0,r.kt)("p",null,"Le marqueur ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL")," est un peu particulier. En effet, vous ne pouvez pas tester directement colonne = ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),". Essayons donc :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE nom = NULL; -- s\xe9lection des \xe9l\xe8ves sans nom\n\nSELECT * \nFROM Eleves  \nWHERE commentaires <> NULL; -- s\xe9lection des \xe9l\xe8ves pour lesquels un commentaire existe\n")),(0,r.kt)("p",null,"Ces deux requ\xeates ne renvoient pas les r\xe9sultats que l'on pourrait esp\xe9rer. En fait, elles ne renvoient aucun r\xe9sultat. C'est donc ici qu'intervient notre op\xe9rateur de comparaison un peu sp\xe9cial ",(0,r.kt)("inlineCode",{parentName:"p"},"<=>")," qui permet de reconna\xeetre ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),". Une autre possibilit\xe9 est d'utiliser les mots-cl\xe9s ",(0,r.kt)("inlineCode",{parentName:"p"},"IS NULL"),", et si l'on veut exclure les ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL")," : ",(0,r.kt)("inlineCode",{parentName:"p"},"IS NOT NULL"),". Nous pouvons donc r\xe9\xe9crire nos requ\xeates, correctement cette fois-ci :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Elevs \nWHERE sexe <=> NULL; -- s\xe9lection des \xe9l\xe8ves dont le sexe n'est pas prononc\xe9\n\n-- OU\n\nSELECT * \nFROM Elevs \nWHERE sexe IS NULL;\n\nSELECT * \nFROM Elevs \nWHERE commentaires IS NOT NULL; -- s\xe9lection des \xe9l\xe8ves pour lesquels un commentaire existe\n")),(0,r.kt)("p",null,"Cette fois-ci, cela fonctionne parfaitement :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"id"),(0,r.kt)("th",{parentName:"tr",align:null},"nom"),(0,r.kt)("th",{parentName:"tr",align:null},"sexe"),(0,r.kt)("th",{parentName:"tr",align:null},"date_naissance"),(0,r.kt)("th",{parentName:"tr",align:null},"commentaires"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"Hamilton"),(0,r.kt)("td",{parentName:"tr",align:null},"H"),(0,r.kt)("td",{parentName:"tr",align:null},"2009-08-03 05:12:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"9"),(0,r.kt)("td",{parentName:"tr",align:null},"Verstappen"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL"),(0,r.kt)("td",{parentName:"tr",align:null},"2010-08-23 05:18:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")))),(0,r.kt)("h3",{id:"tri-des-donn\xe9es"},"Tri des donn\xe9es"),(0,r.kt)("p",null,"Pour trier vos donn\xe9es, il suffit d'ajouter",(0,r.kt)("inlineCode",{parentName:"p"}," ORDER BY tri")," \xe0 votre requ\xeate (apr\xe8s les crit\xe8res de s\xe9lection de ",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),' s\'il y en a) et de remplacer "tri" par la colonne sur laquelle vous voulez trier vos donn\xe9es bien s\xfbr.'),(0,r.kt)("p",null,"Par exemple, pour trier la date de naissance :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM El\xe8ves \nWHERE sexe='H' \nORDER BY date_naissance;\n")),(0,r.kt)("p",null,"Vos donn\xe9es sont tri\xe9es, les plus vieux hommes sont r\xe9cup\xe9r\xe9s en premier, les plus jeunes \xe0 la fin."),(0,r.kt)("h4",{id:"tri-ascendant-ou-descendant"},"Tri ascendant ou descendant"),(0,r.kt)("p",null,"Pour d\xe9terminer le sens du tri effectu\xe9, SQL poss\xe8de deux mots-cl\xe9s : ",(0,r.kt)("inlineCode",{parentName:"p"},"ASC")," pour ascendant, et ",(0,r.kt)("inlineCode",{parentName:"p"},"DESC")," pour descendant. Par d\xe9faut, si vous ne pr\xe9cisez rien, c'est un tri ascendant qui est effectu\xe9. ",(0,r.kt)("br",null),"\nSi, par contre, vous utilisez le mot ",(0,r.kt)("inlineCode",{parentName:"p"},"DESC"),", l'ordre est invers\xe9 : plus grand nombre d'abord, date la plus r\xe9cente d'abord, et ordre anti-alphab\xe9tique pour les caract\xe8res."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE sexe='F' \n    AND nom IS NOT NULL \nORDER BY nom DESC;\n")),(0,r.kt)("h4",{id:"trier-sur-plusieurs-colonnes"},"Trier sur plusieurs colonnes"),(0,r.kt)("p",null,"Il est \xe9galement possible de trier sur plusieurs colonnes. Par exemple, si vous voulez que les r\xe9sultats soient tri\xe9s par nom et, dans chaque nom, tri\xe9s par date de naissance, il suffit de donner les deux colonnes correspondantes \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"ORDER BY")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nORDER BY nom, date_naissance;\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"L'ordre dans lequel vous donnez les colonnes est important, le tri se fera d'abord sur la premi\xe8re colonne donn\xe9e, puis sur la seconde, etc.")),(0,r.kt)("p",null,"Vous pouvez trier sur autant de colonnes que vous voulez."),(0,r.kt)("h3",{id:"\xe9liminer-les-doublons"},"\xc9liminer les doublons"),(0,r.kt)("p",null,"Il peut arriver que MySQL vous donne plusieurs fois le m\xeame r\xe9sultat parce que certaines informations sont pr\xe9sentes plusieurs fois dans la table."),(0,r.kt)("p",null,"Petit exemple : vous voulez savoir quelles sont les noms que vous poss\xe9dez dans votre \xe9tablissement :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT sexe \nFROM Eleves;\n")),(0,r.kt)("p",null,"En effet, vous allez bien r\xe9cup\xe9rer toutes les noms que vous poss\xe9dez, mais si vous avez 500 femmes, vous allez r\xe9cup\xe9rer 500 lignes 'femmes'."),(0,r.kt)("p",null,"Pour cela il y a une solution : le mot-cl\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"DISTINCT"),".\nCe mot-cl\xe9 se place juste apr\xe8s ",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT")," et permet d'\xe9liminer les doublons."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT DISTINCT sexe \nFROM Eleves;\n")),(0,r.kt)("p",null,"Ceci devrait vous ramener deux lignes avec les deux sexes qui se trouvent dans la table. "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Pour \xe9liminer un doublon, il faut que toute la ligne ",(0,r.kt)("strong",{parentName:"p"},"s\xe9lectionn\xe9e")," soit \xe9gale \xe0 une autre ligne du jeu de r\xe9sultats. Ne seront donc prises en compte que les colonnes que vous avez pr\xe9cis\xe9es dans votre ",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT"),". Uniquement ",(0,r.kt)("em",{parentName:"p"},"sexe")," donc, dans notre exemple.")),(0,r.kt)("h3",{id:"restreindre-les-r\xe9sultats"},"Restreindre les r\xe9sultats"),(0,r.kt)("p",null,"En plus de restreindre une recherche en lui donnant des crit\xe8res gr\xe2ce \xe0 la clause ",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),", il est possible de restreindre le nombre de lignes r\xe9cup\xe9r\xe9es.\nCela se fait gr\xe2ce \xe0 la clause ",(0,r.kt)("inlineCode",{parentName:"p"},"LIMIT"),"."),(0,r.kt)("h4",{id:"syntaxe-1"},"Syntaxe"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"LIMIT")," s'utilise avec deux param\xe8tres :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"le nombre de lignes que l'on veut r\xe9cup\xe9rer ;"),(0,r.kt)("li",{parentName:"ul"},"le d\xe9calage, introduit par le mot-cl\xe9 ",(0,r.kt)("inlineCode",{parentName:"li"},"OFFSET"),", qui indique \xe0 partir de quelle ligne on r\xe9cup\xe8re les r\xe9sultats. Ce param\xe8tre est facultatif. S'il n'est pas pr\xe9cis\xe9, il est mis \xe0 0.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"LIMIT nombre_de_lignes [OFFSET decalage];\n")),(0,r.kt)("p",null,"Exemple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nORDER BY id \nLIMIT 6 OFFSET 0;\n\nSELECT * \nFROM Eleves \nORDER BY id \nLIMIT 6 OFFSET 3;\n")),(0,r.kt)("p",null,"Avec la premi\xe8re requ\xeate, vous devriez obtenir six lignes, les six plus petits id, puisque nous n'avons demand\xe9 aucun d\xe9calage (",(0,r.kt)("inlineCode",{parentName:"p"},"OFFSET 0"),")."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"id"),(0,r.kt)("th",{parentName:"tr",align:null},"nom"),(0,r.kt)("th",{parentName:"tr",align:null},"sexe"),(0,r.kt)("th",{parentName:"tr",align:null},"date_naissance"),(0,r.kt)("th",{parentName:"tr",align:null},"commentaires"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"Hamilton"),(0,r.kt)("td",{parentName:"tr",align:null},"H"),(0,r.kt)("td",{parentName:"tr",align:null},"2009-08-03 05:12:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"Verstappen"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL"),(0,r.kt)("td",{parentName:"tr",align:null},"2010-10-03 16:44:00"),(0,r.kt)("td",{parentName:"tr",align:null},"El\xe8ve turbulent")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"Calder\xf3n"),(0,r.kt)("td",{parentName:"tr",align:null},"F"),(0,r.kt)("td",{parentName:"tr",align:null},"2009-06-13 08:17:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"Russel"),(0,r.kt)("td",{parentName:"tr",align:null},"H"),(0,r.kt)("td",{parentName:"tr",align:null},"2008-12-06 05:18:00"),(0,r.kt)("td",{parentName:"tr",align:null},"Passage en ann\xe9e sup\xe9rieur")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"5"),(0,r.kt)("td",{parentName:"tr",align:null},"Norris"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL"),(0,r.kt)("td",{parentName:"tr",align:null},"2008-09-11 15:38:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"6"),(0,r.kt)("td",{parentName:"tr",align:null},"Gasly"),(0,r.kt)("td",{parentName:"tr",align:null},"H"),(0,r.kt)("td",{parentName:"tr",align:null},"2010-08-23 05:18:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")))),(0,r.kt)("p",null,"Par contre, dans la deuxi\xe8me, vous r\xe9cup\xe9rez toujours six lignes, mais vous devriez commencer au quatri\xe8me plus petit id, puisque l'on a demand\xe9 un d\xe9calage de trois lignes."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"id"),(0,r.kt)("th",{parentName:"tr",align:null},"nom"),(0,r.kt)("th",{parentName:"tr",align:null},"sexe"),(0,r.kt)("th",{parentName:"tr",align:null},"date_naissance"),(0,r.kt)("th",{parentName:"tr",align:null},"commentaires"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"Ricciardo"),(0,r.kt)("td",{parentName:"tr",align:null},"H"),(0,r.kt)("td",{parentName:"tr",align:null},"2009-08-03 05:12:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"5"),(0,r.kt)("td",{parentName:"tr",align:null},"Latifi"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL"),(0,r.kt)("td",{parentName:"tr",align:null},"2010-10-03 16:44:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"6"),(0,r.kt)("td",{parentName:"tr",align:null},"Floersch"),(0,r.kt)("td",{parentName:"tr",align:null},"F"),(0,r.kt)("td",{parentName:"tr",align:null},"2009-06-13 08:17:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"7"),(0,r.kt)("td",{parentName:"tr",align:null},"Schumacher"),(0,r.kt)("td",{parentName:"tr",align:null},"H"),(0,r.kt)("td",{parentName:"tr",align:null},"2008-12-06 05:18:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"8"),(0,r.kt)("td",{parentName:"tr",align:null},"Tsunoda"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL"),(0,r.kt)("td",{parentName:"tr",align:null},"2008-09-11 15:38:00"),(0,r.kt)("td",{parentName:"tr",align:null},"El\xe8ve dissip\xe9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"9"),(0,r.kt)("td",{parentName:"tr",align:null},"Bottas"),(0,r.kt)("td",{parentName:"tr",align:null},"H"),(0,r.kt)("td",{parentName:"tr",align:null},"2010-08-23 05:18:00"),(0,r.kt)("td",{parentName:"tr",align:null},"NULL")))),(0,r.kt)("p",null,"Exemple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nORDER BY id \nLIMIT 10;\n")),(0,r.kt)("p",null,"Cette requ\xeate est donc \xe9quivalente \xe0 :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nORDER BY id \nLIMIT 10 OFFSET 0;\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"\xe9largissez-les-possibilit\xe9s-de-la-clause-where"},"\xc9largissez les possibilit\xe9s de la clause WHERE"),(0,r.kt)("h2",{id:"recherche-approximative"},"Recherche approximative"),(0,r.kt)("p",null,"Pour ce genre de recherches, l'op\xe9rateur ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"LIKE")),"  est tr\xe8s utile, car il permet de faire des recherches en utilisant des \"jokers\", c'est-\xe0-dire des caract\xe8res qui repr\xe9sentent n'importe quel caract\xe8re."),(0,r.kt)("p",null,"Deux jokers existent pour ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"LIKE")),"  :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'%'"),"  : qui repr\xe9sente n'importe quelle cha\xeene de caract\xe8res, quelle que soit sa longueur (y compris une cha\xeene de longueur 0) ;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"'_'"),"  : qui repr\xe9sente un seul caract\xe8re.")),(0,r.kt)("h3",{id:"quelques-exemples-"},"Quelques exemples :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"'b%'"),'  cherchera toutes les cha\xeenes de caract\xe8res commen\xe7ant par \'b\'  ("brocoli", "bouli", "b").')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"'b_'"),'  cherchera toutes les cha\xeenes de caract\xe8res contenant deux lettres dont la premi\xe8re est\'b\'  ("ba", "bf", "b8").')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"'%ch%ne'"),'  cherchera toutes les cha\xeenes de caract\xe8res contenant \'ch\'  et finissant par \'ne\'  ("chne", "chine", "\xe9chine", "le pays le plus peupl\xe9 du monde est la Chine").')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"'p_rl_'"),'  cherchera toutes les cha\xeenes de caract\xe8res commen\xe7ant par un "p" suivi d\'un caract\xe8re, puis de "rl" et enfin se terminant par un caract\xe8re ("parle", "perla", "perle").'))),(0,r.kt)("h2",{id:"rechercher--ou-_"},"Rechercher '%' ou '_'"),(0,r.kt)("p",null,"Comment faire si vous cherchez une cha\xeene de caract\xe8res contenant ",(0,r.kt)("inlineCode",{parentName:"p"},"%")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"_")," ? \xc9videmment, si vous \xe9crivez ",(0,r.kt)("inlineCode",{parentName:"p"},"LIKE '%'  ou LIKE '_'"),", MySQL vous donnera absolument toutes les cha\xeenes de caract\xe8res dans le premier cas, et toutes les cha\xeenes de 1 caract\xe8re dans le deuxi\xe8me.\nIl faut donc signaler \xe0 MySQL que vous ne d\xe9sirez pas utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"%")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"_")," en tant que joker, mais bien en tant que caract\xe8re de recherche. Pour \xe7a, il suffit de mettre le caract\xe8re d'\xe9chappement ",(0,r.kt)("inlineCode",{parentName:"p"},"\\"),", dont je vous ai d\xe9j\xe0 parl\xe9, devant le ",(0,r.kt)("inlineCode",{parentName:"p"},"%")," ou le ",(0,r.kt)("inlineCode",{parentName:"p"},"_"),"."),(0,r.kt)("h3",{id:"exemple-"},"Exemple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE commentaires LIKE '%\\%%';\n")),(0,r.kt)("h2",{id:"exclure-une-cha\xeene-de-caract\xe8res"},"Exclure une cha\xeene de caract\xe8res"),(0,r.kt)("p",null,"C'est logique, mais je pr\xe9cise quand m\xeame (et puis, cela fait un petit rappel) : l'op\xe9rateur logique ",(0,r.kt)("inlineCode",{parentName:"p"},"NOT"),"  est utilisable avec ",(0,r.kt)("inlineCode",{parentName:"p"},"LIKE"),". Si l'on veut rechercher les animaux dont le nom ne contient pas la lettre a, on peut donc \xe9crire :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE nom NOT LIKE '%a%';\n")),(0,r.kt)("h2",{id:"recherche-dans-les-num\xe9riques"},"Recherche dans les num\xe9riques"),(0,r.kt)("p",null,"Vous pouvez bien entendu utiliser des chiffres dans une cha\xeene de caract\xe8res. Apr\xe8s tout, ce sont des caract\xe8res comme les autres. Par contre, utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"LIKE"),"  sur un type num\xe9rique (",(0,r.kt)("inlineCode",{parentName:"p"},"INT"),"  , par exemple), c'est d\xe9j\xe0 plus \xe9tonnant.\nEt pourtant, MySQL le permet. ",(0,r.kt)("strong",{parentName:"p"},"Attention"),", cependant, il s'agit bien d'une particularit\xe9 MySQL, qui prend souvent un malin plaisir \xe0 \xe9tendre la norme SQL pure."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"LIKE '1%'"),"  sur une colonne de type num\xe9rique trouvera donc des nombres comme 10, 1000, 153."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE id LIKE '1%';\n")),(0,r.kt)("h2",{id:"recherche-dans-un-intervalle"},"Recherche dans un intervalle"),(0,r.kt)("p",null,"Il est possible de faire une recherche sur un intervalle \xe0 l'aide uniquement des op\xe9rateurs de comparaison >= et <=. Par exemple, on peut rechercher les animaux qui sont n\xe9s entre le 5 janvier 2008 et le 23 mars 2009 de la mani\xe8re suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE date_naissance <= '2009-03-23' \n    AND date_naissance >= '2008-01-05';\n")),(0,r.kt)("p",null,"Cela fonctionne tr\xe8s bien. Cependant, SQL dispose d'un op\xe9rateur sp\xe9cifique, pour les intervalles, qui pourrait vous \xe9viter les erreurs d'inattention classiques (< au lieu de >, par exemple) en plus de rendre votre requ\xeate plus lisible et plus performante : ",(0,r.kt)("inlineCode",{parentName:"p"},"BETWEEN minimum AND maximum"),'  (between signifie "entre" en anglais). La requ\xeate pr\xe9c\xe9dente peut donc s\'\xe9crire :'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE date_naissance BETWEEN '2008-01-05' AND '2009-03-23';\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"BETWEEN"),"  peut s'utiliser avec des dates, mais aussi avec des nombres (",(0,r.kt)("inlineCode",{parentName:"p"},"BETWEEN 0 AND 100"),") ou avec des cha\xeenes de caract\xe8res (",(0,r.kt)("inlineCode",{parentName:"p"},"BETWEEN 'a' AND 'd'"),"), auquel cas c'est l'ordre alphab\xe9tique qui sera utilis\xe9 (toujours insensible \xe0 la casse sauf si l'on utilise des cha\xeenes binaires :",(0,r.kt)("inlineCode",{parentName:"p"},"BETWEEN BINARY 'a' AND BINARY 'd'"),").\nBien \xe9videmment, on peut aussi exclure un intervalle avec ",(0,r.kt)("inlineCode",{parentName:"p"},"NOT BETWEEN"),"."),(0,r.kt)("h2",{id:"set-de-crit\xe8res"},"Set de crit\xe8res"),(0,r.kt)("p",null,"Le dernier op\xe9rateur \xe0 utiliser dans la clause ",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),"  que nous verrons est ",(0,r.kt)("inlineCode",{parentName:"p"},"IN"),"."),(0,r.kt)("p",null,"Imaginons que vous vouliez r\xe9cup\xe9rer les informations des \xe9l\xe8ves r\xe9pondant aux noms d'Hamilton, Verstappen, Vettel, Norris, Russel, Schumacher et Senna. Jusqu'\xe0 maintenant, vous auriez sans doute fait quelque chose comme \xe7a :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE nom = 'Hamilton' \n    OR nom = 'Verstappen' \n    OR nom = 'Vettel' \n    OR nom = 'Norris' \n    OR nom = 'Russel' \n    OR nom = 'Schumacher' \n    OR nom = 'Senna';\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"IN")," vous permet de faire des recherches dans une liste de valeurs. Parfait pour nous, donc, qui voulons rechercher les \xe9l\xe8ves correspondant \xe0 une liste de noms. Voici la mani\xe8re d'utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"IN"),"  :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * \nFROM Eleves \nWHERE nom IN ('Hamilton', 'Verstappen', 'Vettel', 'Norris', 'Russel', 'Schumacher', 'Senna');\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"supprimez-et-modifiez-des-donn\xe9es"},"Supprimez et modifiez des donn\xe9es"),(0,r.kt)("h3",{id:"sauvegarde-dune-base-de-donn\xe9es"},"Sauvegarde d'une base de donn\xe9es"),(0,r.kt)("p",null,"MySQL dispose donc d'un outil sp\xe9cialement d\xe9di\xe9 \xe0 la sauvegarde des donn\xe9es sous forme de fichiers texte : ",(0,r.kt)("inlineCode",{parentName:"p"},"mysqldump"),"."),(0,r.kt)("p",null,"Cette fonction de sauvegarde s'utilise \xe0 partir de la console. Vous devez donc \xeatre d\xe9connect\xe9 de MySQL pour la lancer."),(0,r.kt)("p",null,"La mani\xe8re classique de faire la sauvegarde d'une base de donn\xe9es est de taper la commande suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mysqldump -u user -p --opt nom_de_la_base > sauvegarde.sql\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mysqldump")," : il s'agit du client permettant de sauvegarder les bases. Rien de sp\xe9cial \xe0 signaler."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"--opt")," : c'est une option de ",(0,r.kt)("inlineCode",{parentName:"li"},"mysqldump")," qui lance la commande avec une s\xe9rie de param\xe8tres qui font que la commande s'effectue tr\xe8s rapidement."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"nom_de_la_base")," : vous l'avez sans doute devin\xe9, c'est ici qu'il faut indiquer le nom de la base que l'on veut sauvegarder."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"> sauvegarde.sql")," : le signe ",(0,r.kt)("inlineCode",{parentName:"li"},">")," indique que l'on va donner la destination de ce qui va \xeatre g\xe9n\xe9r\xe9 par la commande ",(0,r.kt)("inlineCode",{parentName:"li"},"sauvegarde.sql"),". Il s'agit du nom du fichier qui contiendra la sauvegarde de notre base. Vous pouvez bien s\xfbr l'appeler comme bon vous semble.")),(0,r.kt)("p",null,"Si vous effacez votre base par m\xe9garde, il vous faut d'abord recr\xe9er la base de donn\xe9es (avec ",(0,r.kt)("inlineCode",{parentName:"p"},"CREATE DATABASE nom_base"),"), puis ex\xe9cuter la commande suivante (dans la console) :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mysql nom_base < chemin_fichier_de_sauvegarde.sql\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"mysqldump")," poss\xe8de de nombreuses options qui sont d\xe9taill\xe9s dans la ",(0,r.kt)("a",{parentName:"p",href:"https://dev.mysql.com/doc/refman/5.5/en/mysqldump.html"},"documentation de MySQL")," .")),(0,r.kt)("h3",{id:"suppression-2"},"Suppression"),(0,r.kt)("p",null,"La commande utilis\xe9e pour supprimer des donn\xe9es est DELETE. ",(0,r.kt)("strong",{parentName:"p"},"Cette op\xe9ration est irr\xe9versible, soyez tr\xe8s prudent !"),"\nOn utilise la clause ",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE")," de la m\xeame mani\xe8re qu'avec la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT")," pour pr\xe9ciser quelles lignes doivent \xeatre supprim\xe9es."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DELETE FROM nom_table \nWHERE crit\xe8res;\n")),(0,r.kt)("p",null,"Par exemple : Kimi Raikkonen est parti de l'\xe9cole. Nous allons donc le retirer de la base de donn\xe9es."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DELETE FROM Eleves \nWHERE nom = 'Raikkonen';\n")),(0,r.kt)("p",null,"Si vous d\xe9sirez supprimer toutes les lignes d'une table, il suffit de ne pas pr\xe9ciser de clause ",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DELETE FROM Eleves;\n")),(0,r.kt)("h3",{id:"modification"},"Modification"),(0,r.kt)("p",null,"La modification des donn\xe9es se fait gr\xe2ce \xe0 la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"UPDATE"),", dont la syntaxe est la suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE nom_table \nSET col1 = val1 [, col2 = val2, ...] \n[WHERE ...];\n")),(0,r.kt)("p",null,"Par exemple, dans le cas o\xf9 il y ai une faute de frappe et que Verstappen soit Verstapp",(0,r.kt)("strong",{parentName:"p"},"p"),"en dans la bdd. Il faut donc modifier son nom :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE Eleve \nSET nom='Verstappen' \nWHERE id=21;\n")),(0,r.kt)("p",null,"V\xe9rifiez d'abord chez vous que l'\xe9l\xe8ve portant le num\xe9ro d'identification 21 est bien Verstappen. La cl\xe9 primaire (",(0,r.kt)("em",{parentName:"p"},"id"),") est utilis\xe9e pour identifier la ligne \xe0 modifier, car c'est la seule mani\xe8re d'\xeatre s\xfbr que l'on ne modifiera que la ligne que l'on d\xe9sire."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Tout comme pour la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE"),", si vous omettez la clause ",(0,r.kt)("inlineCode",{parentName:"p"},"WHERE")," dans un ",(0,r.kt)("inlineCode",{parentName:"p"},"UPDATE"),", la modification se fera sur toutes les lignes de la table. Soyez prudent !")),(0,r.kt)("p",null,"La requ\xeate suivante changerait donc le commentaire pour tous les \xe9l\xe8ves stock\xe9s dans la table Eleves :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE Eleves \nSET commentaires='modification de toutes les lignes';\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"index"},"Index"),(0,r.kt)("p",null,"Un index est une structure qui reprend la liste ordonn\xe9e des valeurs auxquelles il se rapporte.\nLes index sont utilis\xe9s pour acc\xe9l\xe9rer les requ\xeates (notamment les requ\xeates impliquant plusieurs tables, ou les requ\xeates de recherche), et sont indispensables \xe0 la cr\xe9ation de cl\xe9s, \xe9trang\xe8res et primaires, qui permettent de garantir l'int\xe9grit\xe9 des donn\xe9es de la base."),(0,r.kt)("h3",{id:"quest-ce-quun-index-"},"Qu'est-ce qu'un index ?"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Structure de donn\xe9es")," qui reprend la ",(0,r.kt)("strong",{parentName:"p"},"liste ordonn\xe9e")," des valeurs auxquelles il se rapporte.")),(0,r.kt)("p",null,"Lorsque vous cr\xe9ez un index sur une table, MySQL stocke cet index sous forme d'une structure particuli\xe8re, contenant les valeurs des colonnes impliqu\xe9es dans l'index. Cette structure stocke les valeurs ",(0,r.kt)("strong",{parentName:"p"},"tri\xe9es")," et permet d'acc\xe9der \xe0 chacune de mani\xe8re efficace et rapide."),(0,r.kt)("p",null,"Les donn\xe9es d'",(0,r.kt)("em",{parentName:"p"},"Eleves")," ne sont pas stock\xe9es suivant un ordre intelligible pour nous. Par contre, l'index sur l'",(0,r.kt)("em",{parentName:"p"},"id")," est tri\xe9 simplement par ordre croissant. Cela permet de grandement acc\xe9l\xe9rer toute recherche faite sur cet ",(0,r.kt)("em",{parentName:"p"},"id"),". ",(0,r.kt)("br",null),"\nImaginons en effet que nous voulions r\xe9cup\xe9rer toutes les lignes dont l'",(0,r.kt)("em",{parentName:"p"},"id")," est inf\xe9rieur ou \xe9gal \xe0 5. Sans index, MySQL doit parcourir toutes les lignes une \xe0 une. Par contre, gr\xe2ce \xe0 l'index, d\xe8s qu'il tombe sur la ligne dont l'",(0,r.kt)("em",{parentName:"p"},"id")," est 6, il sait qu'il peut s'arr\xeater, puisque toutes les lignes suivantes auront un ",(0,r.kt)("em",{parentName:"p"},"id")," sup\xe9rieur ou \xe9gal \xe0 6. Dans cet exemple, on ne gagne que quelques lignes, mais imaginez une table contenant des millions de lignes. Le gain de temps peut \xeatre assez consid\xe9rable. ",(0,r.kt)("br",null),"\nPar ailleurs, avec les ",(0,r.kt)("em",{parentName:"p"},"id")," tri\xe9s par ordre croissant, pour rechercher un ",(0,r.kt)("em",{parentName:"p"},"id")," particulier, MySQL n'est pas oblig\xe9 de simplement parcourir les donn\xe9es ligne par ligne. Il peut utiliser des algorithmes de recherche puissants (comme la recherche dichotomique), toujours afin d\u2019acc\xe9l\xe9rer la recherche."),(0,r.kt)("p",null,"Mais pourquoi ne pas simplement trier la table compl\xe8te sur la base de la colonne ",(0,r.kt)("em",{parentName:"p"},"id")," ? Pourquoi cr\xe9er et stocker une structure sp\xe9cialement pour l'index ? Tout simplement parce qu'il peut y avoir plusieurs index sur une m\xeame table, et que l'ordre des lignes, pour chacun de ces index, n'est pas n\xe9cessairement le m\xeame. Par exemple, nous pouvons cr\xe9er un second index pour notre table ",(0,r.kt)("em",{parentName:"p"},"Eleves"),", sur la colonne ",(0,r.kt)("em",{parentName:"p"},"date_naissance"),"."),(0,r.kt)("h4",{id:"int\xe9r\xeat-des-index"},"Int\xe9r\xeat des index"),(0,r.kt)("p",null,"Vous devriez avoir compris maintenant que tout l'int\xe9r\xeat des index est d'acc\xe9l\xe9rer les requ\xeates qui utilisent des colonnes index\xe9es comme crit\xe8res de recherche. Par cons\xe9quent, si vous savez que, dans votre application, vous ferez \xe9norm\xe9ment de recherches sur la colonne ",(0,r.kt)("em",{parentName:"p"},"X"),", ajoutez donc un index sur cette colonne, vous ne vous en porterez que mieux. ",(0,r.kt)("br",null),"\nLes index permettent aussi d'assurer l'int\xe9grit\xe9 des donn\xe9es de la base. Pour cela, il existe plusieurs types d'index diff\xe9rents, et deux types de \"cl\xe9s\". Lorsque je parle de garantir l'int\xe9grit\xe9 de vos donn\xe9es, cela signifie garantir la qualit\xe9 de vos donn\xe9es, vous assurer que vos donn\xe9es ont du sens. Gr\xe2ce aux cl\xe9s et aux index, vous pouvez par exemple avoir la garantie que tous les clients auxquels vous faites r\xe9f\xe9rence dans la table ",(0,r.kt)("em",{parentName:"p"},"Commande")," existent bien dans la table ",(0,r.kt)("em",{parentName:"p"},"Client"),"."),(0,r.kt)("h4",{id:"d\xe9savantages"},"D\xe9savantages"),(0,r.kt)("p",null,"Si tout ce que fait un index, c'est acc\xe9l\xe9rer les requ\xeates utilisant les crit\xe8res de recherche correspondants, autant en mettre partout et en profiter \xe0 chaque requ\xeate ! Sauf qu'\xe9videmment, ce n'est pas si simple. Les index ont deux inconv\xe9nients."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ils prennent de la place en m\xe9moire"),(0,r.kt)("li",{parentName:"ul"},"Ils ralentissent les requ\xeates d'insertion, modification et suppression, puisqu'\xe0 chaque fois, il faut remettre l'index \xe0 jour en plus de la table.")),(0,r.kt)("p",null,"Par cons\xe9quent, n'ajoutez pas d'index lorsque ce n'est pas vraiment utile."),(0,r.kt)("h4",{id:"index-sur-plusieurs-colonnes"},"Index sur plusieurs colonnes"),(0,r.kt)("p",null,"Reprenons l'exemple d'une table appel\xe9e Client qui reprend les informations des clients d'une soci\xe9t\xe9. Elle se pr\xe9sente comme suit :"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"id"),(0,r.kt)("th",{parentName:"tr",align:null},"nom"),(0,r.kt)("th",{parentName:"tr",align:null},"prenom"),(0,r.kt)("th",{parentName:"tr",align:null},"init_2e_prenom"),(0,r.kt)("th",{parentName:"tr",align:null},"email"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"Dupont"),(0,r.kt)("td",{parentName:"tr",align:null},"Charles"),(0,r.kt)("td",{parentName:"tr",align:null},"T"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"mailto:charles.dupont@email.com"},"charles.dupont@email.com"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"Fran\xe7ois"),(0,r.kt)("td",{parentName:"tr",align:null},"Damien"),(0,r.kt)("td",{parentName:"tr",align:null},"V"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"mailto:fdamien@email.com"},"fdamien@email.com"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"Dupont"),(0,r.kt)("td",{parentName:"tr",align:null},"Guillaume"),(0,r.kt)("td",{parentName:"tr",align:null},"A"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"mailto:guillaumevdb@email.com"},"guillaumevdb@email.com"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"Dupont"),(0,r.kt)("td",{parentName:"tr",align:null},"Val\xe9rie"),(0,r.kt)("td",{parentName:"tr",align:null},"G"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"mailto:dupont.valerie@email.com"},"dupont.valerie@email.com"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"5"),(0,r.kt)("td",{parentName:"tr",align:null},"Fran\xe7ois"),(0,r.kt)("td",{parentName:"tr",align:null},"Martin"),(0,r.kt)("td",{parentName:"tr",align:null},"D"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"mailto:mdmartin@email.com"},"mdmartin@email.com"))))),(0,r.kt)("p",null,"Vous avez bien s\xfbr un index sur la colonne ",(0,r.kt)("em",{parentName:"p"},"id"),", mais vous constatez que vous faites \xe9norm\xe9ment de recherches par nom, pr\xe9nom et initiale du second pr\xe9nom. Vous pourriez donc faire trois index, un pour chacune de ces colonnes. Mais, si vous faites souvent des recherches sur les trois colonnes \xe0 la fois, il vaut encore mieux faire un seul index, sur les trois colonnes (",(0,r.kt)("em",{parentName:"p"},"nom, prenom, init_2e_prenom"),"). L'index contiendra donc les valeurs des trois colonnes et sera tri\xe9 par nom, ensuite par pr\xe9nom, et enfin par initiale (l'ordre des colonnes a donc de l'importance !)."),(0,r.kt)("p",null,'Donc lorsque vous chercherez "Dupont Val\xe9rie C.", gr\xe2ce \xe0 l\'index, MySQL trouvera rapidement tous les "Dupont", parmi lesquels il trouvera toutes les "Val\xe9rie" (toujours en se servant du m\xeame index), parmi lesquelles il trouvera celle (ou celles) dont le second pr\xe9nom commence par "C".'),(0,r.kt)("h5",{id:"tirer-parti-des-index-par-la-gauche"},'Tirer parti des "index par la gauche"'),(0,r.kt)("p",null,"Tout cela est bien beau si l'on fait souvent des recherches \xe0 la fois sur le nom, le pr\xe9nom et l'initiale. Mais comment fait-on si l'on fait aussi souvent des recherches uniquement sur le nom, ou uniquement sur le pr\xe9nom, ou sur le nom et le pr\xe9nom en m\xeame temps, mais sans l'initiale ? Faut-il cr\xe9er un nouvel index pour chaque type de recherche ?\nEh bien non ! MySQl est beaucoup trop fort : il est capable de tirer parti de votre index sur (",(0,r.kt)("em",{parentName:"p"},"nom, prenom, init_2e_prenom"),") pour certaines autres recherches."),(0,r.kt)("h4",{id:"index-sur-des-colonnes-de-type-alphanum\xe9rique"},"Index sur des colonnes de type alphanum\xe9rique"),(0,r.kt)("h5",{id:"types-char-et-varchar"},"Types CHAR et VARCHAR"),(0,r.kt)("p",null,"Lorsque l'on indexe une colonne de type ",(0,r.kt)("inlineCode",{parentName:"p"},"VARCHAR")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"CHAR")," (comme la colonne ",(0,r.kt)("em",{parentName:"p"},"nom")," de la table ",(0,r.kt)("em",{parentName:"p"},"Client")," par exemple), on peut d\xe9composer l'index de la mani\xe8re suivante :"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://openclassrooms.com/fr/courses/1959476-administrez-vos-bases-de-donnees-avec-mysql/1962880-index#/id/r-1979790"},"https://openclassrooms.com/fr/courses/1959476-administrez-vos-bases-de-donnees-avec-mysql/1962880-index#/id/r-1979790")),(0,r.kt)("p",null,"Ici, nous n'avons que des noms assez courts. La colonne nom peut par exemple \xeatre de type ",(0,r.kt)("inlineCode",{parentName:"p"},"VARCHAR(30)"),". Mais imaginez une colonne de type ",(0,r.kt)("inlineCode",{parentName:"p"},"VARCHAR(150)"),", qui contient des titres de livres par exemple. Si l'on met un index dessus, MySQL va indexer jusqu'\xe0 150 caract\xe8res. Or, il est fort probable que les 25-30 premiers caract\xe8res du titre suffisent \xe0 trier ceux-ci. Au pire, un ou deux ne seront pas exactement \xe0 la bonne place, mais les requ\xeates en seraient d\xe9j\xe0 grandement acc\xe9l\xe9r\xe9es.\nIl serait donc plut\xf4t pratique de dire \xe0 MySQL : \"Indexe cette colonne, mais base-toi seulement sur les ",(0,r.kt)("em",{parentName:"p"},"x")," premiers caract\xe8res\". Et c'est possible \xe9videmment, et c'est m\xeame tr\xe8s simple. Lorsque l'on cr\xe9era l'index sur la colonne ",(0,r.kt)("em",{parentName:"p"},"titre_livre"),", il suffira d'indiquer un nombre entre parenth\xe8ses : ",(0,r.kt)("em",{parentName:"p"},"titre_livre(25)")," par exemple. Ce nombre \xe9tant bien s\xfbr le nombre de caract\xe8res (dans le sens de la lecture, donc \xe0 partir de la gauche) \xe0 prendre en compte pour l'index."),(0,r.kt)("p",null,"Le fait d'utiliser ces index partiels sur des champs alphanum\xe9riques permet de ",(0,r.kt)("strong",{parentName:"p"},"gagner de la place")," (un index sur 150 lettres prend \xe9videmment plus de place qu'un index sur 20 lettres), et si la longueur est intelligemment d\xe9finie, l'acc\xe9l\xe9ration permise par l'index sera la m\xeame que si l'on avait pris la colonne enti\xe8re."),(0,r.kt)("h5",{id:"types-blob-et-text-et-d\xe9riv\xe9s"},"Types BLOB et TEXT (et d\xe9riv\xe9s)"),(0,r.kt)("p",null,"Si vous mettez un index sur une colonne de type ",(0,r.kt)("inlineCode",{parentName:"p"},"BLOB")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"TEXT")," (ou un de leurs d\xe9riv\xe9s), MySQL ",(0,r.kt)("strong",{parentName:"p"},"exige")," que vous pr\xe9cisiez un nombre de caract\xe8res \xe0 prendre en compte. Et heureusement... vu la longueur potentielle de ce que l'on stocke dans de telles colonnes."),(0,r.kt)("h3",{id:"les-diff\xe9rents-types-dindex"},"Les diff\xe9rents types d'index"),(0,r.kt)("p",null,'En plus des index "simples", que je viens de vous d\xe9crire, il existe trois types d\'index qui ont des propri\xe9t\xe9s particuli\xe8res. Les index ',(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE"),", les index ",(0,r.kt)("inlineCode",{parentName:"p"},"FULLTEXT"),", et enfin les index ",(0,r.kt)("inlineCode",{parentName:"p"},"SPATIAL"),"."),(0,r.kt)("h4",{id:"index-unique"},"Index UNIQUE"),(0,r.kt)("p",null,"Avoir un index ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE")," sur une colonne (ou plusieurs) permet de s'assurer que jamais vous n\u2019ins\xe9rerez deux fois la m\xeame valeur (ou combinaison de valeurs) dans la table."),(0,r.kt)("p",null,"Par exemple, vous cr\xe9ez un site internet, et vous voulez le doter d'un espace membre. Chaque membre devra se connecter gr\xe2ce \xe0 un pseudo et un mot de passe. Vous avez donc une table ",(0,r.kt)("em",{parentName:"p"},"Membre"),", qui contient 4 colonnes : ",(0,r.kt)("em",{parentName:"p"},"id, pseudo, mot_de_passe")," et ",(0,r.kt)("em",{parentName:"p"},"date_inscription"),".",(0,r.kt)("br",null),"\nDeux membres peuvent avoir le m\xeame mot de passe, pas de probl\xe8me. Par contre, que se passerait-il si deux membres avaient le m\xeame pseudo ? Lors de la connexion, il serait impossible de savoir quel mot de passe utiliser et sur quel compte connecter le membre.\nIl faut donc absolument \xe9viter que deux membres utilisent le m\xeame pseudo. Pour cela, on va utiliser un index ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE")," sur la colonne pseudo de la table ",(0,r.kt)("em",{parentName:"p"},"Membre"),"."),(0,r.kt)("h5",{id:"contraintes"},"Contraintes"),(0,r.kt)("p",null,"Lorsque vous mettez un index ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE")," sur une table, vous ne mettez pas seulement un index, vous ajoutez surtout une ",(0,r.kt)("strong",{parentName:"p"},"contrainte"),".\nLes contraintes sont une notion importante en SQL. Sans le savoir, ou sans savoir que c'\xe9tait appel\xe9 comme cela, vous en avez d\xe9j\xe0 utilis\xe9. En effet, lorsque vous emp\xeachez une colonne d'accepter ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),", vous lui mettez une ",(0,r.kt)("strong",{parentName:"p"},"contrainte")," ",(0,r.kt)("inlineCode",{parentName:"p"},"NOT NULL"),".\nDe m\xeame, les valeurs par d\xe9faut que vous pouvez donner aux colonnes sont des contraintes. Vous contraignez la colonne \xe0 prendre une certaine valeur si aucune autre n'est pr\xe9cis\xe9e."),(0,r.kt)("h4",{id:"index-fulltext"},"Index FULLTEXT"),(0,r.kt)("p",null,"Un index ",(0,r.kt)("inlineCode",{parentName:"p"},"FULLTEXT"),"  est utilis\xe9 pour faire des recherches de mani\xe8re puissante et rapide sur un texte. On n'utilise donc ce type d'index que sur les colonnes de type ",(0,r.kt)("inlineCode",{parentName:"p"},"CHAR"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"VARCHAR"),"  ou ",(0,r.kt)("inlineCode",{parentName:"p"},"TEXT"),"."),(0,r.kt)("p",null,"Une diff\xe9rence importante entre les index ",(0,r.kt)("inlineCode",{parentName:"p"},"FULLTEXT")," et les index classiques (et ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE"),') est que l\'on ne peut plus utiliser les fameux "index par la gauche" dont je vous ai parl\xe9 pr\xe9c\xe9demment. Donc, si vous voulez faire des recherches "fulltext" sur deux colonnes (parfois l\'une, parfois l\'autre, parfois les deux ensemble), il vous faudra cr\xe9er trois index FULLTEXT  : (',(0,r.kt)("em",{parentName:"p"},"colonne1"),"), (",(0,r.kt)("em",{parentName:"p"},"colonne2"),") et (",(0,r.kt)("em",{parentName:"p"},"colonne1"),", ",(0,r.kt)("em",{parentName:"p"},"colonne2"),")."),(0,r.kt)("h3",{id:"cr\xe9ation-et-suppression-des-index"},"Cr\xe9ation et suppression des index"),(0,r.kt)("h4",{id:"ajout-des-index-lors-de-la-cr\xe9ation-de-la-table"},"Ajout des index lors de la cr\xe9ation de la table"),(0,r.kt)("p",null,"Ici, deux possibilit\xe9s : vous pouvez pr\xe9ciser dans la description de la colonne qu'il s'agit d'un index, ou lister les index par la suite."),(0,r.kt)("h5",{id:"index-dans-la-description-de-la-colonne"},"Index dans la description de la colonne"),(0,r.kt)("p",null,"Je rappelle que la description de la colonne se rapporte \xe0 l'endroit o\xf9 vous indiquez le type de donn\xe9es, si la colonne peut contenir ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),", etc. Il est donc possible, \xe0 ce m\xeame endroit, de pr\xe9ciser si la colonne est un index."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE nom_table (\n    colonne1 INT KEY,                  -- Cr\xe9e un index simple sur colonne1\n    colonne2 VARCHAR(40) UNIQUE,       -- Cr\xe9e un index unique sur colonne2\n);\n")),(0,r.kt)("p",null,"Quelques petites remarques ici :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Avec cette syntaxe, ",(0,r.kt)("strong",{parentName:"li"},"seul le mot ",(0,r.kt)("inlineCode",{parentName:"strong"},"KEY")," peut \xeatre utilis\xe9")," pour d\xe9finir un index simple. Ailleurs, vous pourrez utiliser ",(0,r.kt)("inlineCode",{parentName:"li"},"KEY")," ou ",(0,r.kt)("inlineCode",{parentName:"li"},"INDEX"),"."),(0,r.kt)("li",{parentName:"ul"},"Pour d\xe9finir un index ",(0,r.kt)("inlineCode",{parentName:"li"},"UNIQUE")," de cette mani\xe8re, on n'utilise que le mot-cl\xe9 ",(0,r.kt)("inlineCode",{parentName:"li"},"UNIQUE"),", sans le faire pr\xe9c\xe9der de ",(0,r.kt)("inlineCode",{parentName:"li"},"INDEX")," ou de ",(0,r.kt)("inlineCode",{parentName:"li"},"KEY")," (comme ce sera le cas avec d'autres syntaxes)."),(0,r.kt)("li",{parentName:"ul"},"Il n'est ",(0,r.kt)("strong",{parentName:"li"},"pas possible de d\xe9finir des index composites")," (sur plusieurs colonnes) de cette mani\xe8re."),(0,r.kt)("li",{parentName:"ul"},"Il n'est pas non plus possible de cr\xe9er un index sur une partie de la colonne (les ",(0,r.kt)("em",{parentName:"li"},"x")," premiers caract\xe8res).")),(0,r.kt)("h5",{id:"liste-dindex"},"Liste d'index"),(0,r.kt)("p",null,"L'autre possibilit\xe9 est d'ajouter les index \xe0 la suite des colonnes, en s\xe9parant chaque \xe9l\xe9ment par une virgule :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE nom_table (\n    colonne1 description_colonne1,\n    [colonne2 description_colonne2,\n    colonne3 description_colonne3,\n    ...,]\n    [PRIMARY KEY (colonne_cl\xe9_primaire)],\n    [INDEX [nom_index] (colonne1_index [, colonne2_index, ...])]\n)\n[ENGINE=moteur];\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple")," : si l'on avait voulu cr\xe9er la table ",(0,r.kt)("em",{parentName:"p"},"Eleves")," avec un index sur la date de naissance, et un autre sur les 10 premi\xe8res lettres du nom, on aurait pu utiliser la commande suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE Eleves (\n    id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,\n    nom VARCHAR(40) NOT NULL,\n    sexe CHAR(1),\n    date_naissance DATETIME NOT NULL,\n    commentaires TEXT,\n    PRIMARY KEY (id),\n    INDEX ind_date_naissance (date_naissance),  -- index sur la date de naissance\n    INDEX ind_nom (nom(10))                     -- index sur le nom (le chiffre entre parenth\xe8ses \xe9tant le nombre de caract\xe8res pris en compte)\n)\nENGINE=INNODB;\n")),(0,r.kt)("p",null,'Vous n\'\xeates pas oblig\xe9 de pr\xe9ciser un nom pour votre index. Si vous ne le faites pas, MySQL en cr\xe9era un automatiquement pour vous.\nJe pr\xe9f\xe8re nommer mes index moi-m\xeame plut\xf4t que de laisser MySQL cr\xe9er un nom par d\xe9faut, et respecter certaines conventions personnelles. Ainsi, mes index auront toujours le pr\xe9fixe "ind" suivi du ou des noms des colonnes concern\xe9es, le tout s\xe9par\xe9 par des "_". Il vous appartient de suivre vos propres conventions, bien s\xfbr, l\'important \xe9tant de vous y retrouver.'),(0,r.kt)("p",null,"Et pour ajouter des index ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"FULLTEXT"),", c'est le m\xeame principe :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE nom_table (\n    colonne1 INT NOT NULL,   \n    colonne2 VARCHAR(40), \n    colonne3 TEXT,\n    UNIQUE [INDEX] ind_uni_col2 (colonne2),     -- Cr\xe9e un index UNIQUE sur la colonne2, INDEX est facultatif\n    FULLTEXT [INDEX] ind_full_col3 (colonne3)   -- Cr\xe9e un index FULLTEXT sur la colonne3, INDEX est facultatif\n)\nENGINE=MyISAM;\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple")," : cr\xe9ation de la table ",(0,r.kt)("em",{parentName:"p"},"Eleves")," comme pr\xe9c\xe9demment, en ajoutant un index ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE")," sur (",(0,r.kt)("em",{parentName:"p"},"nom"),")."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE Eleves (\n    id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,\n    nom VARCHAR(40) NOT NULL,\n    sexe CHAR(1),\n    date_naissance DATETIME NOT NULL,\n    commentaires TEXT,\n    PRIMARY KEY (id),\n    INDEX ind_date_naissance (date_naissance),  \n    INDEX ind_nom (nom(10)),                    \n    UNIQUE INDEX ind_uni_nom_espece (nom)  -- Index sur le nom\n)\nENGINE=INNODB;\n")),(0,r.kt)("h5",{id:"ajout-des-index-apr\xe8s-cr\xe9ation-de-la-table"},"Ajout des index apr\xe8s cr\xe9ation de la table"),(0,r.kt)("p",null,"En dehors du fait que parfois vous ne penserez pas \xe0 tout au moment de la cr\xe9ation de votre table, il peut parfois \xeatre int\xe9ressant de cr\xe9er les index apr\xe8s la table.\nEn effet, je vous ai dit que l'ajout d'index sur une table ralentissait l'ex\xe9cution des requ\xeates d'\xe9criture (insertion, suppression, modification de donn\xe9es). Par cons\xe9quent, si vous cr\xe9ez une table que vous comptez remplir avec un grand nombre de donn\xe9es imm\xe9diatement, gr\xe2ce \xe0 la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"LOAD DATA INFILE"),", par exemple, il vaut bien mieux cr\xe9er la table, la remplir, et ensuite seulement cr\xe9er les index voulus sur cette table."),(0,r.kt)("p",null,"Il existe deux commandes permettant de cr\xe9er des index sur une table existante : ",(0,r.kt)("inlineCode",{parentName:"p"},"ALTER TABLE"),", que vous connaissez d\xe9j\xe0 un peu, et ",(0,r.kt)("inlineCode",{parentName:"p"},"CREATE INDEX"),". Ces deux commandes sont \xe9quivalentes, utilisez celle qui vous parle le plus."),(0,r.kt)("h5",{id:"ajout-avec-alter-table"},"Ajout avec ALTER TABLE"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE nom_table\nADD INDEX [nom_index] (colonne_index [, colonne2_index ...]); --Ajout d'un index simple\n\nALTER TABLE nom_table\nADD UNIQUE [nom_index] (colonne_index [, colonne2_index ...]); --Ajout d'un index UNIQUE\n\nALTER TABLE nom_table\nADD FULLTEXT [nom_index] (colonne_index [, colonne2_index ...]); --Ajout d'un index FULLTEXT\n")),(0,r.kt)("p",null,"Contrairement \xe0 ce qui se passait pour l'ajout d'une colonne, il est ici obligatoire de pr\xe9ciser ",(0,r.kt)("inlineCode",{parentName:"p"},"INDEX")," (ou ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE"),", ou ",(0,r.kt)("inlineCode",{parentName:"p"},"FULLTEXT"),") apr\xe8s ",(0,r.kt)("inlineCode",{parentName:"p"},"ADD"),".\nDans le cas d'un index multicolonne, il suffit comme d'habitude d'indiquer toutes les colonnes entre parenth\xe8ses, s\xe9par\xe9es par des virgules."),(0,r.kt)("p",null,"Reprenons la table Test_tuto, utilis\xe9e pour tester ",(0,r.kt)("inlineCode",{parentName:"p"},"ALTER TABLE"),", et ajoutons-lui un index sur la colonne ",(0,r.kt)("em",{parentName:"p"},"nom")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE Test_tuto \nADD INDEX ind_nom (nom);\n")),(0,r.kt)("p",null,"Si vous affichez maintenant la description de votre table ",(0,r.kt)("em",{parentName:"p"},"Test_tuto"),', vous verrez que, dans la colonne "Key", il est indiqu\xe9 ',(0,r.kt)("strong",{parentName:"p"},"MUL")," pour la colonne ",(0,r.kt)("em",{parentName:"p"},"nom"),". L'index a donc bien \xe9t\xe9 cr\xe9\xe9."),(0,r.kt)("h5",{id:"ajout-avec-create-index"},"Ajout avec CREATE INDEX"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE INDEX nom_index\nON nom_table (colonne_index [, colonne2_index ...]);  -- Cr\xe9e un index simple\n\nCREATE UNIQUE INDEX nom_index\nON nom_table (colonne_index [, colonne2_index ...]);  -- Cr\xe9e un index UNIQUE\n\n\nCREATE FULLTEXT INDEX nom_index\nON nom_table (colonne_index [, colonne2_index ...]);  -- Cr\xe9e un index FULLTEXT\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple :")," L'\xe9quivalent de la commande ",(0,r.kt)("strong",{parentName:"p"},"ALTER TABLE")," que nous avons utilis\xe9e pour ajouter un index sur la colonne ",(0,r.kt)("em",{parentName:"p"},"nom")," est donc :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE INDEX ind_nom \nON Test_tuto (nom);\n")),(0,r.kt)("h5",{id:"compl\xe9ment-pour-la-cr\xe9ation-dun-index-unique---le-cas-des-contraintes"},"Compl\xe9ment pour la cr\xe9ation d'un index UNIQUE - le cas des contraintes"),(0,r.kt)("p",null,"Vous vous rappelez, j'esp\xe8re, que les index ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE")," sont ce que l'on appelle des contraintes."),(0,r.kt)("p",null,"Or, lorsque vous cr\xe9ez un index ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE"),", vous pouvez explicitement cr\xe9er une contrainte. C'est fait automatiquement bien s\xfbr si vous ne le faites pas, mais ne soyez donc pas surpris de voir appara\xeetre le mot CONSTRAINT, c'est \xe0 cela qu'il se r\xe9f\xe8re."),(0,r.kt)("p",null,"Pour pouvoir cr\xe9er explicitement une contrainte lors de la cr\xe9ation d'un index ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE"),", vous devez cr\xe9er cet index soit lors de la cr\xe9ation de la table, en listant l'index (et la contrainte) \xe0 la suite des colonnes, soit apr\xe8s la cr\xe9ation de la table, avec la commande ALTER TABLE."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE nom_table (\n    colonne1 INT NOT NULL,   \n    colonne2 VARCHAR(40), \n    colonne3 TEXT,\n    CONSTRAINT [symbole_contrainte] UNIQUE [INDEX] ind_uni_col2 (colonne2)\n);\n\nALTER TABLE nom_table\nADD CONSTRAINT [symbole_contrainte] UNIQUE ind_uni_col2 (colonne2);\n")),(0,r.kt)("p",null,"Il n'est pas obligatoire de donner un symbole (un nom en fait) \xe0 la contrainte. D'autant plus que dans le cas des index, vous pouvez donner un nom \xe0 l'index (ici : ",(0,r.kt)("inlineCode",{parentName:"p"},"ind_uni_col"),")."),(0,r.kt)("h5",{id:"suppression-dun-index"},"Suppression d'un index"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE nom_table \nDROP INDEX nom_index;\n")),(0,r.kt)("p",null,"Notez qu'il n'existe pas de commande permettant de modifier un index. Le cas \xe9ch\xe9ant, il vous faudra supprimer, puis recr\xe9er votre index avec vos modifications."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"cl\xe9s-primaires-et-\xe9trang\xe8res"},"Cl\xe9s primaires et \xe9trang\xe8res"),(0,r.kt)("h3",{id:"cl\xe9s-primaires"},"Cl\xe9s primaires"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"La cl\xe9 primaire d'une table est une contrainte d'unicit\xe9, compos\xe9e d'une ou plusieurs colonnes, et qui permet d'identifier de mani\xe8re unique chaque ligne de la table.")),(0,r.kt)("p",null,"Examinons plus en d\xe9tail cette d\xe9finition :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Contrainte d'unicit\xe9")," : ceci ressemble fort \xe0 un index ",(0,r.kt)("inlineCode",{parentName:"li"},"UNIQUE"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Compos\xe9e d'une ou plusieurs colonnes")," : comme les index, les cl\xe9s peuvent donc \xeatre composites."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Permet d'identifier chaque ligne de mani\xe8re unique")," : dans ce cas, une cl\xe9 primaire ne peut pas \xeatre ",(0,r.kt)("inlineCode",{parentName:"li"},"NULL"),".")),(0,r.kt)("p",null,"Ces quelques consid\xe9rations r\xe9sument tr\xe8s bien l'essence des cl\xe9s primaires. En gros, une cl\xe9 primaire est un index ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE")," sur une colonne qui ne peut pas \xeatre ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL"),".\nD'ailleurs, vous savez d\xe9j\xe0 que l'on d\xe9finit une cl\xe9 primaire gr\xe2ce aux mots-cl\xe9s PRIMARY KEY. Or, nous avons vu dans le pr\xe9c\xe9dent chapitre que ",(0,r.kt)("inlineCode",{parentName:"p"},"KEY")," s'utilise pour d\xe9finir un index. Par cons\xe9quent, lorsque vous d\xe9finissez une cl\xe9 primaire, pas besoin de d\xe9finir en plus un index sur la ou les colonnes qui composent celle-ci, c'est d\xe9j\xe0 fait ! Et pas besoin non plus de rajouter une contrainte ",(0,r.kt)("inlineCode",{parentName:"p"},"NOT NULL"),"."),(0,r.kt)("p",null,"Pour le dire diff\xe9remment, une contrainte de cl\xe9 primaire est donc une combinaison de deux des contraintes que nous avons vues jusqu'\xe0 pr\xe9sent : ",(0,r.kt)("inlineCode",{parentName:"p"},"UNIQUE")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"NOT NULL"),"."),(0,r.kt)("h4",{id:"choix-de-la-cl\xe9-primaire"},"Choix de la cl\xe9 primaire"),(0,r.kt)("p",null,"Le choix d'une cl\xe9 primaire est une \xe9tape importante dans la conception d'une table. Ce n'est pas parce que vous avez l'impression qu'une colonne, ou un groupe de colonnes, pourrait faire une bonne cl\xe9 primaire que c'est le cas. Reprenons l'exemple d'une table ",(0,r.kt)("em",{parentName:"p"},"Client"),", qui contient le nom, le pr\xe9nom, la date de naissance et l'e-mail des clients d'une soci\xe9t\xe9."),(0,r.kt)("p",null,"Chaque client a bien s\xfbr un nom et un pr\xe9nom. Est-ce que (",(0,r.kt)("inlineCode",{parentName:"p"},"nom"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"prenom"),") ferait une bonne cl\xe9 primaire ? Non : il est \xe9vident ici que vous risquez des doublons. ",(0,r.kt)("br",null),"\nEt si l'on ajoute la date de naissance ? Les chances de doublons sont alors quasi nulles. Mais quasi nul, ce n'est pas nul... Qu'arrivera-t-il le jour o\xf9 vous voyez d\xe9barquer un client qui a les m\xeames nom et pr\xe9nom qu'un autre, et qui est n\xe9 le m\xeame jour ? On refait toute la base de donn\xe9es ? Non, bien s\xfbr.\nEt l'e-mail alors ? Il est impossible que deux personnes aient la m\xeame adresse e-mail, donc la contrainte d'unicit\xe9 est respect\xe9e. Par contre, tout le monde n'est pas oblig\xe9 d'avoir une adresse e-mail. Difficile donc de mettre une contrainte ",(0,r.kt)("inlineCode",{parentName:"p"},"NOT NULL")," sur cette colonne."),(0,r.kt)("p",null,"Par cons\xe9quent, on est bien souvent oblig\xe9 d'ajouter une colonne pour jouer le r\xf4le de la cl\xe9 primaire. C'est cette fameuse colonne ",(0,r.kt)("em",{parentName:"p"},"id"),", auto-incr\xe9ment\xe9e que nous avons d\xe9j\xe0 vue pour la table ",(0,r.kt)("em",{parentName:"p"},"Eleves"),"."),(0,r.kt)("p",null,"Il y a une autre raison d'utiliser une colonne sp\xe9ciale auto-incr\xe9ment\xe9e, de type ",(0,r.kt)("inlineCode",{parentName:"p"},"INT")," (ou un de ses d\xe9riv\xe9s) pour la cl\xe9 primaire. En effet, si l'on d\xe9finit une cl\xe9 primaire, c'est en partie dans le but d'utiliser au maximum cette cl\xe9 pour faire des recherches dans la table. Bien s\xfbr, parfois, ce n'est pas possible, parfois vous ne connaissez pas l'",(0,r.kt)("em",{parentName:"p"},"id")," du client, et vous \xeates oblig\xe9 de faire une recherche par nom. Cependant, vous verrez bient\xf4t que les cl\xe9s primaires peuvent servir \xe0 faire des recherches de mani\xe8re ",(0,r.kt)("strong",{parentName:"p"},"indirecte")," sur la table. Comme les recherches sont beaucoup plus rapides sur des nombres que sur des textes, il est souvent int\xe9ressant d'avoir une cl\xe9 primaire compos\xe9e de colonnes de type ",(0,r.kt)("inlineCode",{parentName:"p"},"INT"),"."),(0,r.kt)("p",null,"Enfin, il y a \xe9galement l'argument de l'auto-incr\xe9mentation. Si vous devez remplir vous-m\xeame la colonne de la cl\xe9 primaire, \xe9tant donn\xe9 que vous \xeates humain, vous risquez de faire une erreur. Avec une cl\xe9 primaire auto-incr\xe9ment\xe9e, vous ne risquez rien : MySQL fait tout pour vous. De plus, on ne peut d\xe9finir une colonne comme auto-incr\xe9ment\xe9e que si elle est de type ",(0,r.kt)("inlineCode",{parentName:"p"},"INT")," et qu'il existe un index dessus. Dans le cas d'une cl\xe9 primaire auto-incr\xe9ment\xe9e, on d\xe9finit g\xe9n\xe9ralement la colonne comme un entier ",(0,r.kt)("inlineCode",{parentName:"p"},"UNSIGNED"),", comme on l'a fait pour la table ",(0,r.kt)("em",{parentName:"p"},"Eleves"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Il peut bien s\xfbr n'y avoir qu'",(0,r.kt)("strong",{parentName:"p"},"une seule cl\xe9 primaire par table"),". De m\xeame, une seule colonne peut \xeatre auto-incr\xe9ment\xe9e (la cl\xe9 primaire en g\xe9n\xe9ral).")),(0,r.kt)("h4",{id:"primary-key-or-not-primary-key"},"PRIMARY KEY or not PRIMARY KEY"),(0,r.kt)("p",null,"D'un point de vue technique, avoir une cl\xe9 primaire sur chaque table n'est pas obligatoire. Vous pourriez travailler toute votre vie sur une base de donn\xe9es sans aucune cl\xe9 primaire, et ne jamais voir un message d'erreur \xe0 ce propos. ",(0,r.kt)("br",null),"\nCependant, d'un point de vue ",(0,r.kt)("strong",{parentName:"p"},"conceptuel"),", ce serait une grave erreur. Pensez donc \xe0 mettre une cl\xe9 primaire sur chacune de vos tables."),(0,r.kt)("h4",{id:"cr\xe9ation-dune-cl\xe9-primaire"},"Cr\xe9ation d'une cl\xe9 primaire"),(0,r.kt)("p",null,"La cr\xe9ation des cl\xe9s primaires \xe9tant extr\xeamement semblable \xe0 la cr\xe9ation d'index simples."),(0,r.kt)("p",null,"Donc, \xe0 nouveau, la cl\xe9 primaire peut \xeatre cr\xe9\xe9e en m\xeame temps que la table, ou par la suite."),(0,r.kt)("h5",{id:"lors-de-la-cr\xe9ation-de-la-table"},"Lors de la cr\xe9ation de la table"),(0,r.kt)("p",null,"On peut donc pr\xe9ciser ",(0,r.kt)("inlineCode",{parentName:"p"},"PRIMARY KEY")," dans la description de la colonne qui doit devenir la cl\xe9 primaire (pas de cl\xe9 composite, dans ce cas) :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE [IF NOT EXISTS] Nom_table (\n    colonne1 description_colonne1 PRIMARY KEY [,\n    colonne2 description_colonne2,\n    colonne3 description_colonne3,\n    ...,]\n)\n[ENGINE=moteur];\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple")," : cr\xe9ation de la table Eleves en donnant la cl\xe9 primaire dans la description de la colonne."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE Eleves (\n    id SMALLINT AUTO_INCREMENT PRIMARY KEY,\n    nom VARCHAR(40) NOT NULL,\n    sexe CHAR(1),\n    date_naissance DATETIME NOT NULL,\n    commentaires TEXT\n)\nENGINE=InnoDB;\n")),(0,r.kt)("p",null,"Ou bien, on ajoute la cl\xe9 \xe0 la suite des colonnes."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE [IF NOT EXISTS] Nom_table (\n    colonne1 description_colonne1 [,\n    colonne2 description_colonne2,\n    colonne3 description_colonne3,\n    ...],\n    [CONSTRAINT [symbole_contrainte]] PRIMARY KEY (colonne_pk1 [, colonne_pk2, ...])  -- comme pour les index UNIQUE, CONSTRAINT est facultatif\n)\n[ENGINE=moteur];\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple")," : cr\xe9ation d'Eleves."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE Eleves (\n    id SMALLINT AUTO_INCREMENT,\n    nom VARCHAR(40) NOT NULL,\n    sexe CHAR(1),\n    date_naissance DATETIME NOT NULL,\n    commentaires TEXT,\n    PRIMARY KEY (id)                 \n)\nENGINE=InnoDB;\n")),(0,r.kt)("h5",{id:"apr\xe8s-cr\xe9ation-de-la-table"},"Apr\xe8s cr\xe9ation de la table"),(0,r.kt)("p",null,"On peut toujours utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"ALTER TABLE"),". Par contre, ",(0,r.kt)("inlineCode",{parentName:"p"},"CREATE INDEX")," n'est pas utilisable pour les cl\xe9s primaires."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE nom_table\nADD [CONSTRAINT [symbole_contrainte]] PRIMARY KEY (colonne_pk1 [, colonne_pk2, ...]);\n")),(0,r.kt)("h4",{id:"suppression-de-la-cl\xe9-primaire"},"Suppression de la cl\xe9 primaire"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE nom_table\nDROP PRIMARY KEY\n")),(0,r.kt)("h3",{id:"cl\xe9s-\xe9trang\xe8res"},"Cl\xe9s \xe9trang\xe8res"),(0,r.kt)("p",null,"Les cl\xe9s \xe9trang\xe8res ont pour fonction principale la v\xe9rification de l'int\xe9grit\xe9 de votre base. Elles permettent de s'assurer que vous n'ins\xe9rez pas de b\xeatises..."),(0,r.kt)("p",null,"Reprenons l'exemple dans lequel on a une table ",(0,r.kt)("em",{parentName:"p"},"Client")," et une table ",(0,r.kt)("em",{parentName:"p"},"Commande"),". Dans la table ",(0,r.kt)("em",{parentName:"p"},"Commande"),", on a une colonne qui contient une r\xe9f\xe9rence au client. Ici, le client num\xe9ro 3, M. Nicolas Jacques, a donc pass\xe9 une commande de trois tubes de colle, tandis que Mme Marie Malherbe (cliente num\xe9ro 2) a pass\xe9 deux commandes, pour du papier et des ciseaux."),(0,r.kt)("p",null,"C'est bien joli, mais que se passe-t-il si M. Hadrien Piroux passe une commande de 15 tubes de colle, et qu'\xe0 l'insertion dans la table ",(0,r.kt)("em",{parentName:"p"},"Commande"),", votre doigt d\xe9rape et met 45 comme num\xe9ro de client ? Vous avez dans votre base de donn\xe9es une commande pass\xe9e par un client inexistant, et vous passez votre apr\xe8s-midi du lendemain \xe0 v\xe9rifier tous vos bons de commande de la veille pour retrouver qui a command\xe9 ces 15 tubes de colle."),(0,r.kt)("p",null,"Ce serait quand m\xeame simple si, \xe0 l'insertion d'une ligne dans la table ",(0,r.kt)("em",{parentName:"p"},"Commande"),", un programme allait v\xe9rifier que le num\xe9ro de client indiqu\xe9 correspond bien \xe0 quelque chose dans la table ",(0,r.kt)("em",{parentName:"p"},"Client"),". ",(0,r.kt)("br",null),'\nCe programme s\'appelle "cl\xe9 \xe9trang\xe8re".'),(0,r.kt)("p",null,"Par cons\xe9quent, si vous cr\xe9ez une cl\xe9 \xe9trang\xe8re sur la colonne client de la table ",(0,r.kt)("em",{parentName:"p"},"Commande")," en lui donnant comme r\xe9f\xe9rence la colonne numero de la table ",(0,r.kt)("em",{parentName:"p"},"Client"),", MySQL ne vous laissera plus jamais ins\xe9rer un num\xe9ro de client inexistant dans la table ",(0,r.kt)("em",{parentName:"p"},"Commande"),". Il s'agit bien d'une contrainte !"),(0,r.kt)("p",null,"Quelques points ",(0,r.kt)("strong",{parentName:"p"},"importants"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Comme pour les index et les cl\xe9s primaires, il est possible de cr\xe9er des ",(0,r.kt)("strong",{parentName:"li"},"cl\xe9s \xe9trang\xe8res composites"),"."),(0,r.kt)("li",{parentName:"ul"},"Lorsque vous cr\xe9ez une cl\xe9 \xe9trang\xe8re sur une colonne (ou un groupe de colonnes) \u2013 la colonne ",(0,r.kt)("em",{parentName:"li"},"client")," de ",(0,r.kt)("em",{parentName:"li"},"Commande")," dans notre exemple \u2013, un index est ",(0,r.kt)("strong",{parentName:"li"},"automatiquement ajout\xe9")," sur celle-ci (ou sur le groupe)."),(0,r.kt)("li",{parentName:"ul"},"Par contre, la colonne (le groupe de colonnes) qui sert de r\xe9f\xe9rence - la colonne ",(0,r.kt)("em",{parentName:"li"},"numero")," de ",(0,r.kt)("em",{parentName:"li"},"Client")," - ",(0,r.kt)("strong",{parentName:"li"},"doit")," d\xe9j\xe0 poss\xe9der un index (ou \xeatre cl\xe9 primaire, bien s\xfbr)."),(0,r.kt)("li",{parentName:"ul"},"La colonne (ou le groupe de colonnes) sur laquelle (lequel) la cl\xe9 est cr\xe9\xe9e doit \xeatre ",(0,r.kt)("strong",{parentName:"li"},"exactement")," du m\xeame type que la colonne (le groupe de colonnes) qu'elle (il) r\xe9f\xe9rence. Cela implique qu'en cas de cl\xe9 composite, il y ait le m\xeame nombre de colonnes dans la cl\xe9 et la r\xe9f\xe9rence. Donc, si ",(0,r.kt)("em",{parentName:"li"},"numero")," (dans ",(0,r.kt)("em",{parentName:"li"},"Client"),") est un ",(0,r.kt)("inlineCode",{parentName:"li"},"INT UNSIGNED"),", client (dans ",(0,r.kt)("em",{parentName:"li"},"Commande"),") doit \xeatre de type ",(0,r.kt)("inlineCode",{parentName:"li"},"INT UNSIGNED")," aussi."),(0,r.kt)("li",{parentName:"ul"},"Tous les moteurs de table ne permettent pas l'utilisation des cl\xe9s \xe9trang\xe8res. Par exemple, MyISAM ne le permet pas, contrairement \xe0 InnoDB.")),(0,r.kt)("h4",{id:"cr\xe9ation-1"},"Cr\xe9ation"),(0,r.kt)("p",null,"Une cl\xe9 \xe9trang\xe8re est un peu plus complexe \xe0 cr\xe9er qu'un index ou une cl\xe9 primaire, puisqu'il faut deux \xe9l\xe9ments :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"la ou les colonnes sur lesquelles on cr\xe9e la cl\xe9 - on utilise ",(0,r.kt)("inlineCode",{parentName:"li"},"FOREIGN KEY"),"  ;"),(0,r.kt)("li",{parentName:"ul"},"la ou les colonnes qui vont servir de r\xe9f\xe9rence - on utilise ",(0,r.kt)("inlineCode",{parentName:"li"},"REFERENCES"),".")),(0,r.kt)("h5",{id:"lors-de-la-cr\xe9ation-de-la-table-1"},"Lors de la cr\xe9ation de la table"),(0,r.kt)("p",null,"Du fait de la pr\xe9sence de deux param\xe8tres, une cl\xe9 \xe9trang\xe8re ne peut que s'ajouter \xe0 la suite des colonnes, et pas directement dans la description d'une colonne. Par ailleurs, je vous conseille ici de cr\xe9er explicitement une contrainte (gr\xe2ce au mot-cl\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"CONSTRAINT"),") et de lui donner un symbole. En effet, pour les index, on pouvait utiliser leur nom pour les identifier ; pour les cl\xe9s primaires, le nom de la table suffisait puisqu'il n'y en a qu'une par table. Par contre, pour diff\xe9rencier facilement les cl\xe9s \xe9trang\xe8res d'une table, il est utile de leur donner un nom, \xe0 travers la contrainte associ\xe9e.\n\xc0 nouveau, je respecte certaines conventions de nommage : mes cl\xe9s \xe9trang\xe8res ont des noms commen\xe7ant par fk (pour ",(0,r.kt)("inlineCode",{parentName:"p"},"FOREIGN KEY"),"), suivi du nom de la colonne dans la table, puis (si elle s'appelle diff\xe9remment) du nom de la colonne de r\xe9f\xe9rence, le tout s\xe9par\xe9 par des ",(0,r.kt)("inlineCode",{parentName:"p"},"_")," (",(0,r.kt)("em",{parentName:"p"},"fk_client_numero, par exemple"),")."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE [IF NOT EXISTS] Nom_table (\n    colonne1 description_colonne1,\n    [colonne2 description_colonne2,\n    colonne3 description_colonne3,\n    ...,]\n    [ [CONSTRAINT [symbole_contrainte]]  FOREIGN KEY (colonne(s)_cl\xe9_\xe9trang\xe8re) REFERENCES table_r\xe9f\xe9rence (colonne(s)_r\xe9f\xe9rence)]\n)\n[ENGINE=moteur];\n")),(0,r.kt)("p",null,"Donc si l'on imagine les tables ",(0,r.kt)("em",{parentName:"p"},"Client")," et ",(0,r.kt)("em",{parentName:"p"},"Commande"),", pour cr\xe9er la table ",(0,r.kt)("em",{parentName:"p"},"Commande")," avec une cl\xe9 \xe9trang\xe8re ayant pour r\xe9f\xe9rence la colonne numero de la table ",(0,r.kt)("em",{parentName:"p"},"Client"),", on utilisera :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE Commande (\n    numero INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n    client INT UNSIGNED NOT NULL,\n    produit VARCHAR(40),\n    quantite SMALLINT DEFAULT 1,\n    CONSTRAINT fk_client_numero          -- On donne un nom \xe0 notre cl\xe9\n        FOREIGN KEY (client)             -- Colonne sur laquelle on cr\xe9e la cl\xe9\n        REFERENCES Client(numero)        -- Colonne de r\xe9f\xe9rence\n)\nENGINE=InnoDB;                          -- MyISAM interdit, je le rappelle encore une fois !\n")),(0,r.kt)("h5",{id:"apr\xe8s-cr\xe9ation-de-la-table-1"},"Apr\xe8s cr\xe9ation de la table"),(0,r.kt)("p",null,"Tout comme pour les cl\xe9s primaires, pour cr\xe9er une cl\xe9 \xe9trang\xe8re apr\xe8s cr\xe9ation de la table, il faut utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"ALTER TABLE"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE Commande\nADD CONSTRAINT fk_client_numero FOREIGN KEY (client) REFERENCES Client(numero);\n")),(0,r.kt)("h4",{id:"suppression-dune-cl\xe9-\xe9trang\xe8re"},"Suppression d'une cl\xe9 \xe9trang\xe8re"),(0,r.kt)("p",null,"Il peut y avoir plusieurs cl\xe9s \xe9trang\xe8res par table. Par cons\xe9quent, lors d'une suppression, il faut identifier la cl\xe9 \xe0 d\xe9truire. Cela se fait gr\xe2ce au symbole de la contrainte."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER TABLE nom_table\nDROP FOREIGN KEY symbole_contrainte\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"gestion-des-utilisateurs"},"Gestion des utilisateurs"),(0,r.kt)("h3",{id:"voir-les-bases-de-donn\xe9es"},"Voir les bases de donn\xe9es"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SHOW DATABASES;\n")),(0,r.kt)("h3",{id:"cr\xe9ation-modification-et-suppression-des-utilisateurs"},"Cr\xe9ation, modification et suppression des utilisateurs"),(0,r.kt)("h4",{id:"syntaxe-pour-la-cr\xe9ation-et-la-suppression"},"Syntaxe pour la cr\xe9ation et la suppression"),(0,r.kt)("p",null,"Voici les requ\xeates \xe0 utiliser pour cr\xe9er et supprimer un utilisateur :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- Cr\xe9ation\nCREATE USER 'login'@'hote' [IDENTIFIED BY 'mot_de_passe'];\n\n-- Suppression\nDROP USER 'login'@'hote';\n")),(0,r.kt)("h4",{id:"utilisateur-1"},"Utilisateur"),(0,r.kt)("p",null,"L'utilisateur est donc d\xe9fini par deux \xe9l\xe9ments :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"son login ;"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"l'h\xf4te \xe0 partir duquel il se connecte.")))),(0,r.kt)("h5",{id:"login"},"Login"),(0,r.kt)("p",null,"Le login est un simple identifiant. Vous pouvez le choisir comme vous voulez. Il n'est pas obligatoire de l'entourer de guillemets, sauf s'il contient des caract\xe8res sp\xe9ciaux comme ",(0,r.kt)("inlineCode",{parentName:"p"},"-")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"@"),". C'est cependant conseill\xe9."),(0,r.kt)("h5",{id:"h\xf4te"},"H\xf4te"),(0,r.kt)("p",null,"L'h\xf4te est ",(0,r.kt)("inlineCode",{parentName:"p"},"l'adresse \xe0 partir de laquelle l'utilisateur va se connecter"),". Si l'utilisateur se connecte \xe0 partir de la machine sur laquelle le serveur MySQL se trouve, on peut utiliser 'localhost'. Sinon, on utilise en g\xe9n\xe9ral une adresse IP ou un nom de domaine."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER 'max'@'localhost' IDENTIFIED BY 'maxisthebest';\nCREATE USER 'elodie'@'194.28.12.4' IDENTIFIED BY 'ginko1';\nCREATE USER 'gabriel'@'arb.brab.net' IDENTIFIED BY 'chinypower';\n")),(0,r.kt)("p",null,"Il est \xe9galement possible de permettre \xe0 un utilisateur de se connecter \xe0 partir de plusieurs h\xf4tes diff\xe9rents (sans devoir cr\xe9er un utilisateur par h\xf4te) : en utilisant le joker %, on peut pr\xe9ciser des noms d'h\xf4tes partiels ou permettre \xe0 l'utilisateur de se connecter \xe0 partir de n'importe quel h\xf4te."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- thibault peut se connecter \xe0 partir de n'importe quel h\xf4te dont l'adresse IP commence par 194.28.12.\nCREATE USER 'thibault'@'194.28.12.%' IDENTIFIED BY 'basketball8';\n\n-- joelle peut se connecter \xe0 partir de n'importe quel h\xf4te du domaine brab.net\nCREATE USER 'joelle'@'%.brab.net' IDENTIFIED BY 'singingisfun';\n\n-- hannah peut se connecter \xe0 partir de n'importe quel h\xf4te\nCREATE USER 'hannah'@'%' IDENTIFIED BY 'looking4sun';\n")),(0,r.kt)("p",null,"Comme pour le ",(0,r.kt)("inlineCode",{parentName:"p"},"login"),", les guillemets ne sont pas obligatoires, sauf si un caract\xe8re sp\xe9cial est utilis\xe9 (comme le ",(0,r.kt)("inlineCode",{parentName:"p"},"joker %"),", par exemple). Notez que, si vous ne pr\xe9cisez pas d'h\xf4te, c'est comme si vous autorisiez tous les h\xf4tes. ",(0,r.kt)("inlineCode",{parentName:"p"},"'hannah'@'%'"),"  est donc \xe9quivalent \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"'hannah'"),"."),(0,r.kt)("h5",{id:"renommer-lutilisateur"},"Renommer l'utilisateur"),(0,r.kt)("p",null,"Pour modifier l'identifiant d'un utilisateur (login et/ou h\xf4te), on peut utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"RENAME USER ancien_utilisateur TO nouvel_utilisateur"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple")," : on renomme max en maxime, en gardant le m\xeame h\xf4te."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"RENAME USER 'max'@'localhost' TO 'maxime'@'localhost';\n")),(0,r.kt)("h4",{id:"mot-de-passe"},"Mot de passe"),(0,r.kt)("p",null,"Le mot de passe de l'utilisateur est donn\xe9 par la clause ",(0,r.kt)("inlineCode",{parentName:"p"},"IDENTIFIED BY"),". Cette clause n'est pas obligatoire, auquel cas l'utilisateur peut se connecter sans donner de mot de passe. Ce n'est \xe9videmment pas une bonne id\xe9e du point de vue de la s\xe9curit\xe9. ",(0,r.kt)("strong",{parentName:"p"},"\xc9vitez au maximum les utilisateurs sans mot de passe"),"."),(0,r.kt)("p",null,"Lorsqu'un mot de passe est pr\xe9cis\xe9, il n'est pas stock\xe9 tel quel dans la table mysql.user. Il est d'abord hash\xe9, et c'est cette valeur hash\xe9e qui est stock\xe9e."),(0,r.kt)("p",null,"Modifier le mot de passe\nPour modifier le mot de passe d'un utilisateur, on peut utiliser la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"SET PASSWORD"),"  (\xe0 condition d'avoir les privil\xe8ges n\xe9cessaires, ou d'\xeatre connect\xe9 avec l'utilisateur dont on veut changer le mot de passe).\nCependant, cette commande ne hashe pas le mot de passe automatiquement. Il faut donc utiliser la fonction ",(0,r.kt)("inlineCode",{parentName:"p"},"PASSWORD()"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SET PASSWORD FOR 'thibault'@'194.28.12.%' = PASSWORD('basket8');\n")),(0,r.kt)("h3",{id:"ajout-et-r\xe9vocation-de-privil\xe8ges"},"Ajout et r\xe9vocation de privil\xe8ges"),(0,r.kt)("h4",{id:"ajout-de-privil\xe8ges"},"Ajout de privil\xe8ges"),(0,r.kt)("p",null,"Pour pouvoir ajouter un privil\xe8ge \xe0 un utilisateur, il faut poss\xe9der le privil\xe8ge ",(0,r.kt)("inlineCode",{parentName:"p"},"GRANT OPTION"),". Pour l'instant, seul l'utilisateur \"root\" le poss\xe8de. \xc9tant donn\xe9 qu'il s'agit d'un privil\xe8ge un peu particulier, nous n'en parlerons pas tout de suite. Connectez-vous donc avec \"root\" pour ex\xe9cuter les commandes de cette partie."),(0,r.kt)("h4",{id:"syntaxe-2"},"Syntaxe"),(0,r.kt)("p",null,"La commande pour ajouter des privil\xe8ges \xe0 un utilisateur est la suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"GRANT privilege [(liste_colonnes)] [, privilege [(liste_colonnes)], ...]\nON [type_objet] niveau_privilege\nTO utilisateur [IDENTIFIED BY mot_de_passe];\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"privilege"),"  : le privil\xe8ge \xe0 accorder \xe0 l'utilisateur (",(0,r.kt)("inlineCode",{parentName:"li"},"SELECT"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"CREATE VIEW"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"EXECUTE"),"...) ;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"(liste_colonnes)"),"  : facultatif - liste des colonnes auxquelles le privil\xe8ge s'applique ;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"niveau_privilege"),"  : niveau auquel le privil\xe8ge s'applique (",(0,r.kt)("em",{parentName:"li"},"*",".","*",", nom_bdd.nom_table..."),") ;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"type_objet"),"  : en cas de noms ambigus, il est possible de pr\xe9ciser \xe0 quoi se rapporte le niveau, ",(0,r.kt)("inlineCode",{parentName:"li"},"TABLE")," ou ",(0,r.kt)("inlineCode",{parentName:"li"},"PROCEDURE"),".")),(0,r.kt)("h4",{id:"r\xe9vocation-de-privil\xe8ges"},"R\xe9vocation de privil\xe8ges"),(0,r.kt)("p",null,"Pour retirer un ou plusieurs privil\xe8ges \xe0 un utilisateur, on utilise la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"REVOKE"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"REVOKE privilege [, privilege, ...]\nON niveau_privilege\nFROM utilisateur;\n")),(0,r.kt)("h3",{id:"privil\xe8ges-particuliers"},"Privil\xe8ges particuliers"),(0,r.kt)("h4",{id:"all"},"ALL"),(0,r.kt)("p",null,"Le privil\xe8ge ",(0,r.kt)("inlineCode",{parentName:"p"},"ALL")," (ou ",(0,r.kt)("inlineCode",{parentName:"p"},"ALL PRIVILEGES"),"), comme son nom l'indique, repr\xe9sente tous les privil\xe8ges. Accorder le privil\xe8ge ",(0,r.kt)("inlineCode",{parentName:"p"},"ALL")," revient donc \xe0 accorder tous les droits \xe0 l'utilisateur. Il faut \xe9videmment pr\xe9ciser le niveau auquel tous les droits sont accord\xe9s (on octroie tous les privil\xe8ges possibles sur une table, ou sur une base de donn\xe9es, etc.)."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Un privil\xe8ge fait exception : ",(0,r.kt)("inlineCode",{parentName:"p"},"GRANT OPTION")," n'est pas compris dans les privil\xe8ges repr\xe9sent\xe9s par ",(0,r.kt)("inlineCode",{parentName:"p"},"ALL"),".")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple :")," on accorde tous les droits sur la table ",(0,r.kt)("em",{parentName:"p"},"Client")," \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"'john'@'localhost'"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"GRANT ALL \nON bachelor3.Client\nTO 'john'@'localhost';\n")),(0,r.kt)("h4",{id:"usage"},"USAGE"),(0,r.kt)("p",null,"\xc0 l'inverse de ",(0,r.kt)("inlineCode",{parentName:"p"},"ALL"),", le privil\xe8ge ",(0,r.kt)("inlineCode",{parentName:"p"},"USAGE"),' signifie "aucun privil\xe8ge".\n\xc0 premi\xe8re vue, utiliser la commande ',(0,r.kt)("inlineCode",{parentName:"p"},"GRANT")," pour n'accorder aucun privil\xe8ge peut sembler un peu ridicule. En r\xe9alit\xe9, c'est extr\xeamement utile : ",(0,r.kt)("inlineCode",{parentName:"p"},"USAGE")," permet en fait de modifier les caract\xe9ristiques d'un compte avec la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"GRANT"),", sans modifier les privil\xe8ges du compte. Cet usage de la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"GRANT")," est cependant d\xe9conseill\xe9.\n",(0,r.kt)("inlineCode",{parentName:"p"},"USAGE")," est toujours utilis\xe9 comme un privil\xe8ge global (donc ",(0,r.kt)("inlineCode",{parentName:"p"},"ON *.*"),")."),(0,r.kt)("h4",{id:"grant-option"},"GRANT OPTION"),(0,r.kt)("p",null,"Nous voici donc au fameux privil\xe8ge ",(0,r.kt)("inlineCode",{parentName:"p"},"GRANT OPTION"),". Un utilisateur ayant ce privil\xe8ge est autoris\xe9 \xe0 utiliser la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"GRANT"),", pour accorder des privil\xe8ges \xe0 d'autres utilisateurs.\nCe privil\xe8ge n'est pas compris dans le privil\xe8ge ",(0,r.kt)("inlineCode",{parentName:"p"},"ALL"),". Par ailleurs, un utilisateur ne peut accorder que les privil\xe8ges qu'il poss\xe8de lui-m\xeame."),(0,r.kt)("p",null,"On peut accorder ",(0,r.kt)("inlineCode",{parentName:"p"},"GRANT OPTION"),"  de deux mani\xe8res :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"comme un privil\xe8ge normal, apr\xe8s le mot ",(0,r.kt)("inlineCode",{parentName:"li"},"GRANT"),"  ;"),(0,r.kt)("li",{parentName:"ul"},"\xe0 la fin de la commande ",(0,r.kt)("inlineCode",{parentName:"li"},"GRANT"),", avec la clause ",(0,r.kt)("inlineCode",{parentName:"li"},"WITH GRANT OPTION"),".")),(0,r.kt)("p",null,"Exemple : on accorde les privil\xe8ges ",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"UPDATE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"INSERT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE"),"  et ",(0,r.kt)("inlineCode",{parentName:"p"},"GRANT OPTION"),"  sur la base de donn\xe9es ",(0,r.kt)("em",{parentName:"p"},"bachelor3")," \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"'joseph'@'localhost'"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"GRANT SELECT, UPDATE, INSERT, DELETE, GRANT OPTION\nON bachelor3.*\nTO 'joseph'@'localhost' IDENTIFIED BY 'ploc4';\n\n-- OU\n\nGRANT SELECT, UPDATE, INSERT, DELETE\nON bachelor3.*\nTO 'joseph'@'localhost' IDENTIFIED BY 'ploc4'\nWITH GRANT OPTION;\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"informations-sur-la-base-de-donn\xe9es-et-les-requ\xeates"},"Informations sur la base de donn\xe9es et les requ\xeates"),(0,r.kt)("h3",{id:"commandes-de-description"},"Commandes de description"),(0,r.kt)("h4",{id:"description-dobjets"},"Description d'objets"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SHOW objets;\n")),(0,r.kt)("p",null,"Cette commande permet d'afficher une liste des objets, ainsi que certaines caract\xe9ristiques de ces objets."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple")," : liste des tables et des vues"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SHOW TABLES;\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Pour pouvoir utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"SHOW TABLES"),", il faut avoir s\xe9lectionn\xe9 une base de donn\xe9es.")),(0,r.kt)("h5",{id:"objets-listables-avec-show"},"Objets listables avec ",(0,r.kt)("inlineCode",{parentName:"h5"},"SHOW")),(0,r.kt)("p",null,"Les tables et les vues ne sont pas les seuls objets que l'on peut lister avec la commande ",(0,r.kt)("inlineCode",{parentName:"p"},"SHOW"),". Pour une liste exhaustive, je vous renvoie \xe0 la documentation officielle, mais voici quelques-uns de ces objets."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Commande"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW CHARACTER SET")),(0,r.kt)("td",{parentName:"tr",align:null},"Montre les sets de caract\xe8res (encodages) disponibles.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW [FULL] COLUMNS FROM nom_table [FROM nom_bdd]")),(0,r.kt)("td",{parentName:"tr",align:null},"Liste les colonnes de la table pr\xe9cis\xe9e, ainsi que diverses informations (type, contraintes\u2026). Il est possible de pr\xe9ciser \xe9galement le nom de la base de donn\xe9es. En ajoutant le mot-cl\xe9 ",(0,r.kt)("inlineCode",{parentName:"td"},"FULL"),", les informations affich\xe9es pour chaque colonne sont plus nombreuses.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW DATABASES")),(0,r.kt)("td",{parentName:"tr",align:null},"Montre les bases de donn\xe9es sur lesquelles on poss\xe8de des privil\xe8ges (ou toutes si l'on poss\xe8de le privil\xe8ge global ",(0,r.kt)("inlineCode",{parentName:"td"},"SHOW DATABASES"),").")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW GRANTS [FOR utilisateur]")),(0,r.kt)("td",{parentName:"tr",align:null},"Liste les privil\xe8ges de l'utilisateur courant, ou de l'utilisateur pr\xe9cis\xe9 par la clause ",(0,r.kt)("inlineCode",{parentName:"td"},"FOR")," optionnelle.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW INDEX FROM nom_table [FROM nom_bdd]")),(0,r.kt)("td",{parentName:"tr",align:null},"Liste les index de la table d\xe9sign\xe9e. Il est possible de pr\xe9ciser \xe9galement le nom de la base de donn\xe9es.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW PRIVILEGES")),(0,r.kt)("td",{parentName:"tr",align:null},"Liste les privil\xe8ges accept\xe9s par le serveur MySQL (d\xe9pend de la version de MySQL).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW PROCEDURE STATUS")),(0,r.kt)("td",{parentName:"tr",align:null},"Liste les proc\xe9dures stock\xe9es.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW [FULL] TABLES [FROM nom_bdd]")),(0,r.kt)("td",{parentName:"tr",align:null},"Liste les tables de la base de donn\xe9es courante, ou de la base de donn\xe9es d\xe9sign\xe9e par la clause ",(0,r.kt)("inlineCode",{parentName:"td"},"FROM"),". Si ",(0,r.kt)("inlineCode",{parentName:"td"},"FULL")," est utilis\xe9, une colonne appara\xeetra en plus, pr\xe9cisant s'il s'agit d'une vraie table ou d'une vue.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW TRIGGERS [FROM nom_bdd]")),(0,r.kt)("td",{parentName:"tr",align:null},"Liste les triggers de la base de donn\xe9es courante, ou de la base de donn\xe9es pr\xe9cis\xe9e gr\xe2ce \xe0 la clause ",(0,r.kt)("inlineCode",{parentName:"td"},"FROM"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"`SHOW [GLOBAL"),(0,r.kt)("td",{parentName:"tr",align:null},"SESSION] VARIABLES`")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"SHOW WARNINGS")),(0,r.kt)("td",{parentName:"tr",align:null},"Liste les avertissements g\xe9n\xe9r\xe9s par la derni\xe8re requ\xeate effectu\xe9e.")))),(0,r.kt)("h5",{id:"describe"},"DESCRIBE"),(0,r.kt)("p",null,"La commande ",(0,r.kt)("inlineCode",{parentName:"p"},"DESCRIBE nom_table"),", qui affiche les colonnes d'une table ainsi que certaines de leurs caract\xe9ristiques, est en fait un raccourci pour ",(0,r.kt)("inlineCode",{parentName:"p"},"SHOW COLUMNS FROM nom_table"),"."),(0,r.kt)("h4",{id:"requ\xeate-de-cr\xe9ation-dun-objet"},"Requ\xeate de cr\xe9ation d'un objet"),(0,r.kt)("p",null,"La commande ",(0,r.kt)("inlineCode",{parentName:"p"},"SHOW")," peut \xe9galement montrer ",(0,r.kt)("inlineCode",{parentName:"p"},"la requ\xeate ayant servi \xe0 cr\xe9er un objet"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SHOW CREATE type_objet nom_objet;\n")),(0,r.kt)("h3",{id:"la-base-de-donn\xe9es-information_schema"},"La base de donn\xe9es information_schema"),(0,r.kt)("p",null,"La base de donn\xe9es ",(0,r.kt)("em",{parentName:"p"},"information_schema")," contient des informations sur les sch\xe9mas."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"En MySQL, un sch\xe9ma est une base de donn\xe9es. Ce sont des synonymes. La base ",(0,r.kt)("em",{parentName:"p"},"information_schema")," contient donc des ",(0,r.kt)("strong",{parentName:"p"},"informations sur les bases de donn\xe9es"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SHOW TABLES FROM information_schema;\n")),(0,r.kt)("h3",{id:"d\xe9roulement-dune-requ\xeate"},"D\xe9roulement d'une requ\xeate"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"EXPLAIN")," permet de d\xe9cortiquer l'ex\xe9cution d'une requ\xeate. Gr\xe2ce \xe0 cette commande, il est possible de savoir quelles tables et quels index sont utilis\xe9s, et dans quel ordre."),(0,r.kt)("p",null,"L'utilisation de cette commande est extr\xeamement simple : il suffit d'ajouter ",(0,r.kt)("inlineCode",{parentName:"p"},"EXPLAIN")," devant la requ\xeate que l'on d\xe9sire examiner. ",(0,r.kt)("inlineCode",{parentName:"p"},"EXPLAIN")," peut \xeatre utilis\xe9e pour les requ\xeates ",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"UPDATE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"INSERT")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"REPLACE"),"."),(0,r.kt)("h4",{id:"exemple-1"},"Exemple"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"EXPLAIN SELECT Eleves.nom, Nom.nom_courant AS nom, Classe.nom AS classe\nFROM Eleves\nINNER JOIN Nom ON Eleve.nom = Nom.id\nLEFT JOIN Nom ON Eleve.classe = Classe.id\nWHERE Eleve.id = 37;\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"annexes"},"Annexes"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://openclassrooms.com/fr/courses/1959476-administrez-vos-bases-de-donnees-avec-mysql"},"Cours OpenClassroom")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://dev.mysql.com/doc/refman/8.0/en"},"Documentation Officielle"))),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"R\xe9alis\xe9 en Markdown avec ",(0,r.kt)("a",{parentName:"em",href:"https://dillinger.io/"},"Dillinger")," - Par ",(0,r.kt)("a",{parentName:"em",href:"https://www.nicolas-barbarisi.com"},"Nicolas Barbarisi")," & ",(0,r.kt)("a",{parentName:"em",href:"https://www.linkedin.com/in/alexandre-kramer-41bba2198/"},"Alexandre Kramer"))))}m.isMDXComponent=!0}}]);